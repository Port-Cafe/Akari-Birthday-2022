"use strict";(self.webpackChunkproject_akari=self.webpackChunkproject_akari||[]).push([[179],{491:()=>{function J(t){return"function"==typeof t}function Cs(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Zo=Cs(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function ci(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class Pt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const s of n)s.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(J(r))try{r()}catch(s){e=s instanceof Zo?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{qf(s)}catch(o){e=e??[],o instanceof Zo?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Zo(e)}}add(e){var n;if(e&&e!==this)if(this.closed)qf(e);else{if(e instanceof Pt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ci(n,e)}remove(e){const{_finalizers:n}=this;n&&ci(n,e),e instanceof Pt&&e._removeParent(this)}}Pt.EMPTY=(()=>{const t=new Pt;return t.closed=!0,t})();const zf=Pt.EMPTY;function Gf(t){return t instanceof Pt||t&&"closed"in t&&J(t.remove)&&J(t.add)&&J(t.unsubscribe)}function qf(t){J(t)?t():t.unsubscribe()}const Fr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Qo={setTimeout(t,e,...n){const{delegate:r}=Qo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Qo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Wf(t){Qo.setTimeout(()=>{const{onUnhandledError:e}=Fr;if(!e)throw t;e(t)})}function Jo(){}const pS=hu("C",void 0,void 0);function hu(t,e,n){return{kind:t,value:e,error:n}}let Nr=null;function ea(t){if(Fr.useDeprecatedSynchronousErrorHandling){const e=!Nr;if(e&&(Nr={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=Nr;if(Nr=null,n)throw r}}else t()}class fu extends Pt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Gf(e)&&e.add(this)):this.destination=wS}static create(e,n,r){return new ta(e,n,r)}next(e){this.isStopped?pu(function _S(t){return hu("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?pu(function mS(t){return hu("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?pu(pS,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const vS=Function.prototype.bind;function gu(t,e){return vS.call(t,e)}class CS{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){na(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){na(r)}else na(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){na(n)}}}class ta extends fu{constructor(e,n,r){let i;if(super(),J(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&Fr.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&gu(e.next,s),error:e.error&&gu(e.error,s),complete:e.complete&&gu(e.complete,s)}):i=e}this.destination=new CS(i)}}function na(t){Fr.useDeprecatedSynchronousErrorHandling?function yS(t){Fr.useDeprecatedSynchronousErrorHandling&&Nr&&(Nr.errorThrown=!0,Nr.error=t)}(t):Wf(t)}function pu(t,e){const{onStoppedNotification:n}=Fr;n&&Qo.setTimeout(()=>n(t,e))}const wS={closed:!0,next:Jo,error:function DS(t){throw t},complete:Jo},mu="function"==typeof Symbol&&Symbol.observable||"@@observable";function kr(t){return t}let Ee=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){const s=function MS(t){return t&&t instanceof fu||function SS(t){return t&&J(t.next)&&J(t.error)&&J(t.complete)}(t)&&Gf(t)}(n)?n:new ta(n,r,i);return ea(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Xf(r))((i,s)=>{const o=new ta({next:a=>{try{n(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[mu](){return this}pipe(...n){return function Yf(t){return 0===t.length?kr:1===t.length?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}(n)(this)}toPromise(n){return new(n=Xf(n))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function Xf(t){var e;return null!==(e=t??Fr.Promise)&&void 0!==e?e:Promise}const xS=Cs(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let At=(()=>{class t extends Ee{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new Kf(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new xS}next(n){ea(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){ea(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){ea(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:i,observers:s}=this;return r||i?zf:(this.currentObservers=null,s.push(n),new Pt(()=>{this.currentObservers=null,ci(s,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){const n=new Ee;return n.source=this,n}}return t.create=(e,n)=>new Kf(e,n),t})();class Kf extends At{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:zf}}function Zf(t){return J(t?.lift)}function He(t){return e=>{if(Zf(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ke(t,e,n,r,i){return new ES(t,e,n,r,i)}class ES extends fu{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ie(t,e){return He((n,r)=>{let i=0;n.subscribe(Ke(r,s=>{r.next(t.call(e,s,i++))}))})}function Lr(t){return this instanceof Lr?(this.v=t,this):new Lr(t)}function TS(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(h){r[h]&&(i[h]=function(f){return new Promise(function(g,p){s.push([h,f,g,p])>1||a(h,f)})})}function a(h,f){try{!function l(h){h.value instanceof Lr?Promise.resolve(h.value.v).then(u,c):d(s[0][2],h)}(r[h](f))}catch(g){d(s[0][3],g)}}function u(h){a("next",h)}function c(h){a("throw",h)}function d(h,f){h(f),s.shift(),s.length&&a(s[0][0],s[0][1])}}function PS(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function eg(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){!function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}(a,l,(o=t[s](o)).done,o.value)})}}}const yu=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function tg(t){return J(t?.then)}function ng(t){return J(t[mu])}function rg(t){return Symbol.asyncIterator&&J(t?.[Symbol.asyncIterator])}function ig(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const sg=function RS(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function og(t){return J(t?.[sg])}function ag(t){return TS(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:i}=yield Lr(n.read());if(i)return yield Lr(void 0);yield yield Lr(r)}}finally{n.releaseLock()}})}function lg(t){return J(t?.getReader)}function Mn(t){if(t instanceof Ee)return t;if(null!=t){if(ng(t))return function FS(t){return new Ee(e=>{const n=t[mu]();if(J(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(yu(t))return function NS(t){return new Ee(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(tg(t))return function kS(t){return new Ee(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Wf)})}(t);if(rg(t))return ug(t);if(og(t))return function LS(t){return new Ee(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(lg(t))return function OS(t){return ug(ag(t))}(t)}throw ig(t)}function ug(t){return new Ee(e=>{(function BS(t,e){var n,r,i,s;return function bS(t,e,n,r){return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):function i(s){return s instanceof n?s:new n(function(o){o(s)})}(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=PS(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function Vn(t,e,n,r=0,i=!1){const s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function $e(t,e,n=1/0){return J(e)?$e((r,i)=>ie((s,o)=>e(r,s,i,o))(Mn(t(r,i))),n):("number"==typeof e&&(n=e),He((r,i)=>function VS(t,e,n,r,i,s,o,a){const l=[];let u=0,c=0,d=!1;const h=()=>{d&&!l.length&&!u&&e.complete()},f=p=>u<r?g(p):l.push(p),g=p=>{s&&e.next(p),u++;let m=!1;Mn(n(p,c++)).subscribe(Ke(e,_=>{i?.(_),s?f(_):e.next(_)},()=>{m=!0},void 0,()=>{if(m)try{for(u--;l.length&&u<r;){const _=l.shift();o?Vn(e,o,()=>g(_)):g(_)}h()}catch(_){e.error(_)}}))};return t.subscribe(Ke(e,f,()=>{d=!0,h()})),()=>{a?.()}}(r,i,t,n)))}function di(t=1/0){return $e(kr,t)}const jn=new Ee(t=>t.complete());function cg(t){return t&&J(t.schedule)}function vu(t){return t[t.length-1]}function Ds(t){return cg(vu(t))?t.pop():void 0}function dg(t,e=0){return He((n,r)=>{n.subscribe(Ke(r,i=>Vn(r,t,()=>r.next(i),e),()=>Vn(r,t,()=>r.complete(),e),i=>Vn(r,t,()=>r.error(i),e)))})}function hg(t,e=0){return He((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function fg(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ee(n=>{Vn(n,e,()=>{const r=t[Symbol.asyncIterator]();Vn(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function ze(t,e){return e?function YS(t,e){if(null!=t){if(ng(t))return function $S(t,e){return Mn(t).pipe(hg(e),dg(e))}(t,e);if(yu(t))return function GS(t,e){return new Ee(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(tg(t))return function zS(t,e){return Mn(t).pipe(hg(e),dg(e))}(t,e);if(rg(t))return fg(t,e);if(og(t))return function qS(t,e){return new Ee(n=>{let r;return Vn(n,e,()=>{r=t[sg](),Vn(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void n.error(o)}s?n.complete():n.next(i)},0,!0)}),()=>J(r?.return)&&r.return()})}(t,e);if(lg(t))return function WS(t,e){return fg(ag(t),e)}(t,e)}throw ig(t)}(t,e):Mn(t)}function Cu(...t){const e=Ds(t),n=function HS(t,e){return"number"==typeof vu(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?Mn(r[0]):di(n)(ze(r,e)):jn}function Rt(t){return t<=0?()=>jn:He((e,n)=>{let r=0;e.subscribe(Ke(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Du(t,e,...n){return!0===e?(t(),null):!1===e?null:e(...n).pipe(Rt(1)).subscribe(()=>t())}function fe(t){for(let e in t)if(t[e]===fe)return e;throw Error("Could not find renamed property on target object.")}function ge(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(ge).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Su(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const KS=fe({__forward_ref__:fe});function Mu(t){return t.__forward_ref__=Mu,t.toString=function(){return ge(this())},t}function N(t){return function xu(t){return"function"==typeof t&&t.hasOwnProperty(KS)&&t.__forward_ref__===Mu}(t)?t():t}class X extends Error{constructor(e,n){super(function ra(t,e){return`NG0${Math.abs(t)}${e?": "+e.trim():""}`}(e,n)),this.code=e}}function V(t){return"string"==typeof t?t:null==t?"":String(t)}function ia(t,e){throw new X(-201,!1)}function Nt(t,e){null==t&&function ue(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function G(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Hn(t){return{providers:t.providers||[],imports:t.imports||[]}}function Eu(t){return gg(t,sa)||gg(t,mg)}function gg(t,e){return t.hasOwnProperty(e)?t[e]:null}function pg(t){return t&&(t.hasOwnProperty(bu)||t.hasOwnProperty(iM))?t[bu]:null}const sa=fe({\u0275prov:fe}),bu=fe({\u0275inj:fe}),mg=fe({ngInjectableDef:fe}),iM=fe({ngInjectorDef:fe});var A=(()=>((A=A||{})[A.Default=0]="Default",A[A.Host=1]="Host",A[A.Self=2]="Self",A[A.SkipSelf=4]="SkipSelf",A[A.Optional=8]="Optional",A))();let Iu;function xn(t){const e=Iu;return Iu=t,e}function _g(t,e,n){const r=Eu(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&A.Optional?null:void 0!==e?e:void ia(ge(t))}function cr(t){return{toString:t}.toString()}var tn=(()=>((tn=tn||{})[tn.OnPush=0]="OnPush",tn[tn.Default=1]="Default",tn))(),En=(()=>{return(t=En||(En={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",En;var t})();const he=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),hi={},ae=[],oa=fe({\u0275cmp:fe}),Tu=fe({\u0275dir:fe}),Pu=fe({\u0275pipe:fe}),yg=fe({\u0275mod:fe}),$n=fe({\u0275fac:fe}),ws=fe({__NG_ELEMENT_ID__:fe});let oM=0;function zn(t){return cr(()=>{const n=!0===t.standalone,r={},i={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===tn.OnPush,directiveDefs:null,pipeDefs:null,standalone:n,dependencies:n&&t.dependencies||null,getStandaloneInjector:null,selectors:t.selectors||ae,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||En.Emulated,id:"c"+oM++,styles:t.styles||ae,_:null,setInput:null,schemas:t.schemas||null,tView:null},s=t.dependencies,o=t.features;return i.inputs=Dg(t.inputs,r),i.outputs=Dg(t.outputs),o&&o.forEach(a=>a(i)),i.directiveDefs=s?()=>("function"==typeof s?s():s).map(vg).filter(Cg):null,i.pipeDefs=s?()=>("function"==typeof s?s():s).map(ft).filter(Cg):null,i})}function vg(t){return pe(t)||ht(t)}function Cg(t){return null!==t}const lM={};function dr(t){return cr(()=>{const e={type:t.type,bootstrap:t.bootstrap||ae,declarations:t.declarations||ae,imports:t.imports||ae,exports:t.exports||ae,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(lM[t.id]=t.type),e})}function Dg(t,e){if(null==t)return hi;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,e&&(e[i]=s)}return n}const it=zn;function pe(t){return t[oa]||null}function ht(t){return t[Tu]||null}function ft(t){return t[Pu]||null}function kt(t,e){const n=t[yg]||null;if(!n&&!0===e)throw new Error(`Type ${ge(t)} does not have '\u0275mod' property.`);return n}const H=11;function Et(t){return Array.isArray(t)&&"object"==typeof t[1]}function rn(t){return Array.isArray(t)&&!0===t[1]}function Fu(t){return 0!=(8&t.flags)}function ca(t){return 2==(2&t.flags)}function da(t){return 1==(1&t.flags)}function sn(t){return null!==t.template}function fM(t){return 0!=(256&t[2])}function Ur(t,e){return t.hasOwnProperty($n)?t[$n]:null}class mM{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Gn(){return Mg}function Mg(t){return t.type.prototype.ngOnChanges&&(t.setInput=yM),_M}function _M(){const t=Eg(this),e=t?.current;if(e){const n=t.previous;if(n===hi)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function yM(t,e,n,r){const i=Eg(t)||function vM(t,e){return t[xg]=e}(t,{previous:hi,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],l=o[a];s[a]=new mM(l&&l.currentValue,e,o===hi),t[r]=e}Gn.ngInherit=!0;const xg="__ngSimpleChanges__";function Eg(t){return t[xg]||null}let Bu;function Te(t){return!!t.listen}const bg={createRenderer:(t,e)=>function Vu(){return void 0!==Bu?Bu:typeof document<"u"?document:void 0}()};function Le(t){for(;Array.isArray(t);)t=t[0];return t}function Wt(t,e){return Le(e[t.index])}function ju(t,e){return t.data[e]}function Ot(t,e){const n=e[t];return Et(n)?n:n[0]}function Uu(t){return 64==(64&t[2])}function hr(t,e){return null==e?null:t[e]}function Tg(t){t[18]=0}function Hu(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const O={lFrame:jg(null),bindingsEnabled:!0};function Ag(){return O.bindingsEnabled}function D(){return O.lFrame.lView}function te(){return O.lFrame.tView}function Ge(){let t=Ng();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ng(){return O.lFrame.currentTNode}function bn(t,e){const n=O.lFrame;n.currentTNode=t,n.isParent=e}function $u(){return O.lFrame.isParent}function zu(){O.lFrame.isParent=!1}function yi(){return O.lFrame.bindingIndex++}function LM(t,e){const n=O.lFrame;n.bindingIndex=n.bindingRootIndex=t,Gu(e)}function Gu(t){O.lFrame.currentDirectiveIndex=t}function Wu(t){O.lFrame.currentQueryIndex=t}function BM(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Bg(t,e,n){if(n&A.SkipSelf){let i=e,s=t;for(;!(i=i.parent,null!==i||n&A.Host||(i=BM(s),null===i||(s=s[15],10&i.type))););if(null===i)return!1;e=i,t=s}const r=O.lFrame=Vg();return r.currentTNode=e,r.lView=t,!0}function ga(t){const e=Vg(),n=t[1];O.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Vg(){const t=O.lFrame,e=null===t?null:t.child;return null===e?jg(t):e}function jg(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Ug(){const t=O.lFrame;return O.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Hg=Ug;function pa(){const t=Ug();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function pt(){return O.lFrame.selectedIndex}function fr(t){O.lFrame.selectedIndex=t}function ma(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:u,ngOnDestroy:c}=s;o&&(t.contentHooks||(t.contentHooks=[])).push(-n,o),a&&((t.contentHooks||(t.contentHooks=[])).push(n,a),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,a)),l&&(t.viewHooks||(t.viewHooks=[])).push(-n,l),u&&((t.viewHooks||(t.viewHooks=[])).push(n,u),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,u)),null!=c&&(t.destroyHooks||(t.destroyHooks=[])).push(n,c)}}function _a(t,e,n){$g(t,e,3,n)}function ya(t,e,n,r){(3&t[2])===n&&$g(t,e,n,r)}function Yu(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function $g(t,e,n,r){const s=r??-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&t[18]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(t[18]+=65536),(a<s||-1==s)&&(WM(t,n,e,l),t[18]=(4294901760&t[18])+l+2),l++}function WM(t,e,n,r){const i=n[r]<0,s=n[r+1],a=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(a)}finally{}}}else try{s.call(a)}finally{}}class bs{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function va(t,e,n){const r=Te(t);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],l=n[i++];r?t.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=s,a=n[++i];Ku(o)?r&&t.setProperty(e,o,a):r?t.setAttribute(e,o,a):e.setAttribute(o,a),i++}}return i}function zg(t){return 3===t||4===t||6===t}function Ku(t){return 64===t.charCodeAt(0)}function Ca(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Gg(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Gg(t,e,n,r,i){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const a=t[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<t.length;){const a=t[s];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==i&&(t[s+1]=i));if(r===t[s+1])return void(t[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==r&&t.splice(s++,0,r),null!==i&&t.splice(s++,0,i)}function qg(t){return-1!==t}function vi(t){return 32767&t}function Ci(t,e){let n=function QM(t){return t>>16}(t),r=e;for(;n>0;)r=r[15],n--;return r}let Zu=!0;function Da(t){const e=Zu;return Zu=t,e}let JM=0;const In={};function Ts(t,e){const n=Ju(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Qu(r.data,t),Qu(e,null),Qu(r.blueprint,null));const i=wa(t,e),s=t.injectorIndex;if(qg(i)){const o=vi(i),a=Ci(i,e),l=a[1].data;for(let u=0;u<8;u++)e[s+u]=a[o+u]|l[o+u]}return e[s+8]=i,s}function Qu(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Ju(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function wa(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){if(r=tp(i),null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Sa(t,e,n){!function ex(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ws)&&(r=n[ws]),null==r&&(r=n[ws]=JM++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Xg(t,e,n){if(n&A.Optional)return t;ia()}function Kg(t,e,n,r){if(n&A.Optional&&void 0===r&&(r=null),0==(n&(A.Self|A.Host))){const i=t[9],s=xn(void 0);try{return i?i.get(e,r,n&A.Optional):_g(e,r,n&A.Optional)}finally{xn(s)}}return Xg(r,0,n)}function Zg(t,e,n,r=A.Default,i){if(null!==t){if(1024&e[2]){const o=function ox(t,e,n,r,i){let s=t,o=e;for(;null!==s&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=Qg(s,o,n,r|A.Self,In);if(a!==In)return a;let l=s.parent;if(!l){const u=o[21];if(u){const c=u.get(n,In,r);if(c!==In)return c}l=tp(o),o=o[15]}s=l}return i}(t,e,n,r,In);if(o!==In)return o}const s=Qg(t,e,n,r,In);if(s!==In)return s}return Kg(e,n,r,i)}function Qg(t,e,n,r,i){const s=function rx(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(ws)?t[ws]:void 0;return"number"==typeof e?e>=0?255&e:ix:e}(n);if("function"==typeof s){if(!Bg(e,t,r))return r&A.Host?Xg(i,0,r):Kg(e,n,r,i);try{const o=s(r);if(null!=o||r&A.Optional)return o;ia()}finally{Hg()}}else if("number"==typeof s){let o=null,a=Ju(t,e),l=-1,u=r&A.Host?e[16][6]:null;for((-1===a||r&A.SkipSelf)&&(l=-1===a?wa(t,e):e[a+8],-1!==l&&ep(r,!1)?(o=e[1],a=vi(l),e=Ci(l,e)):a=-1);-1!==a;){const c=e[1];if(Jg(s,a,c.data)){const d=nx(a,e,n,o,r,u);if(d!==In)return d}l=e[a+8],-1!==l&&ep(r,e[1].data[a+8]===u)&&Jg(s,a,e)?(o=c,a=vi(l),e=Ci(l,e)):a=-1}}return i}function nx(t,e,n,r,i,s){const o=e[1],a=o.data[t+8],c=function Ma(t,e,n,r,i){const s=t.providerIndexes,o=e.data,a=1048575&s,l=t.directiveStart,c=s>>20,h=i?a+c:t.directiveEnd;for(let f=r?a:a+c;f<h;f++){const g=o[f];if(f<l&&n===g||f>=l&&g.type===n)return f}if(i){const f=o[l];if(f&&sn(f)&&f.type===n)return l}return null}(a,o,n,null==r?ca(a)&&Zu:r!=o&&0!=(3&a.type),i&A.Host&&s===a);return null!==c?Ps(e,o,c,a):In}function Ps(t,e,n,r){let i=t[n];const s=e.data;if(function YM(t){return t instanceof bs}(i)){const o=i;o.resolving&&function ZS(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new X(-200,`Circular dependency in DI detected for ${t}${n}`)}(function oe(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():V(t)}(s[n]));const a=Da(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?xn(o.injectImpl):null;Bg(t,r,A.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function qM(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Mg(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==l&&xn(l),Da(a),o.resolving=!1,Hg()}}return i}function Jg(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function ep(t,e){return!(t&A.Self||t&A.Host&&e)}class Di{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Zg(this._tNode,this._lView,e,r,n)}}function ix(){return new Di(Ge(),D())}function tp(t){const e=t[1],n=e.type;return 2===n?e.declTNode:1===n?t[6]:null}function As(t){return function tx(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let i=0;for(;i<r;){const s=n[i];if(zg(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(s===e)return n[i+1];i+=2}}}return null}(Ge(),t)}const Si="__parameters__";function xi(t,e,n){return cr(()=>{const r=function tc(t){return function(...n){if(t){const r=t(...n);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,u,c){const d=l.hasOwnProperty(Si)?l[Si]:Object.defineProperty(l,Si,{value:[]})[Si];for(;d.length<=c;)d.push(null);return(d[c]=d[c]||[]).push(o),l}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class q{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=G({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const lx=new q("AnalyzeForEntryComponents");function Yn(t,e){t.forEach(n=>Array.isArray(n)?Yn(n,e):e(n))}function rp(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function xa(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Ns(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}const ks={},sc="__NG_DI_FLAG__",ba="ngTempTokenPath",vx=/\n/gm,ap="__source";let Ls;function Ia(t){const e=Ls;return Ls=t,e}function Dx(t,e=A.Default){if(void 0===Ls)throw new X(-203,"");return null===Ls?_g(t,void 0,e):Ls.get(t,e&A.Optional?null:void 0,e)}function E(t,e=A.Default){return(function sM(){return Iu}()||Dx)(N(t),e)}function oc(t){const e=[];for(let n=0;n<t.length;n++){const r=N(t[n]);if(Array.isArray(r)){if(0===r.length)throw new X(900,"");let i,s=A.Default;for(let o=0;o<r.length;o++){const a=r[o],l=Sx(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(E(i,s))}else e.push(E(r))}return e}function Os(t,e){return t[sc]=e,t.prototype[sc]=e,t}function Sx(t){return t[sc]}const Ta=Os(xi("Inject",t=>({token:t})),-1),Xn=Os(xi("Optional"),8),Bs=Os(xi("SkipSelf"),4);function pc(t){return t.ngOriginalError}class Ti{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&pc(e);for(;n&&pc(n);)n=pc(n);return n||null}}const mc=new Map;let pE=0;const yc="__ngContext__";function at(t,e){Et(e)?(t[yc]=e[20],function _E(t){mc.set(t[20],t)}(e)):t[yc]=e}function zs(t){const e=t[yc];return"number"==typeof e?function Tp(t){return mc.get(t)||null}(e):e||null}function vc(t){const e=zs(t);return e?Et(e)?e:e.lView:null}const EE=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(he))();function Kn(t){return t instanceof Function?t():t}var jt=(()=>((jt=jt||{})[jt.Important=1]="Important",jt[jt.DashCase=2]="DashCase",jt))();function Dc(t,e){return undefined(t,e)}function Gs(t){const e=t[3];return rn(e)?e[3]:e}function wc(t){return Bp(t[13])}function Sc(t){return Bp(t[4])}function Bp(t){for(;null!==t&&!rn(t);)t=t[4];return t}function Ai(t,e,n,r,i){if(null!=r){let s,o=!1;rn(r)?s=r:Et(r)&&(o=!0,r=r[0]);const a=Le(r);0===t&&null!==n?null==i?zp(e,n,a):Hr(e,n,a,i||null,!0):1===t&&null!==n?Hr(e,n,a,i||null,!0):2===t?function Qp(t,e,n){const r=La(t,e);r&&function UE(t,e,n,r){Te(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function zE(t,e,n,r,i){const s=n[7];s!==Le(n)&&Ai(e,t,r,s,i);for(let a=10;a<n.length;a++){const l=n[a];qs(l[1],l,t,e,r,s)}}(e,t,s,n,i)}}function xc(t,e,n){if(Te(t))return t.createElement(e,n);{const r=null!==n?function SM(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(n):null;return null===r?t.createElement(e):t.createElementNS(r,e)}}function jp(t,e){const n=t[9],r=n.indexOf(e),i=e[3];512&e[2]&&(e[2]&=-513,Hu(i,-1)),n.splice(r,1)}function Ec(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const i=r[17];null!==i&&i!==t&&jp(i,r),e>0&&(t[n-1][4]=r[4]);const s=xa(t,10+e);!function FE(t,e){qs(t,e,e[H],2,null,null),e[0]=null,e[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function Up(t,e){if(!(128&e[2])){const n=e[H];Te(n)&&n.destroyNode&&qs(t,e,n,3,null,null),function LE(t){let e=t[13];if(!e)return bc(t[1],t);for(;e;){let n=null;if(Et(e))n=e[13];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)Et(e)&&bc(e[1],e),e=e[3];null===e&&(e=t),Et(e)&&bc(e[1],e),n=e&&e[4]}e=n}}(e)}}function bc(t,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function jE(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const i=e[n[r]];if(!(i instanceof bs)){const s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];try{l.call(a)}finally{}}else try{s.call(i)}finally{}}}}(t,e),function VE(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const o=n[s+1],a="function"==typeof o?o(e):Le(e[o]),l=r[i=n[s+2]],u=n[s+3];"boolean"==typeof u?a.removeEventListener(n[s],l,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),s+=2}else{const o=r[i=n[s+1]];n[s].call(o)}if(null!==r){for(let s=i+1;s<r.length;s++)r[s]();e[7]=null}}(t,e),1===e[1].type&&Te(e[H])&&e[H].destroy();const n=e[17];if(null!==n&&rn(e[3])){n!==e[3]&&jp(n,e);const r=e[19];null!==r&&r.detachView(t)}!function yE(t){mc.delete(t[20])}(e)}}function Hp(t,e,n){return function $p(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const i=t.data[r.directiveStart].encapsulation;if(i===En.None||i===En.Emulated)return null}return Wt(r,n)}(t,e.parent,n)}function Hr(t,e,n,r,i){Te(t)?t.insertBefore(e,n,r,i):(qp(e)?e.content:e).insertBefore(n,r,i)}function zp(t,e,n){Te(t)?t.appendChild(e,n):(qp(e)?e.content:e).appendChild(n)}function Gp(t,e,n,r,i){null!==r?Hr(t,e,n,r,i):zp(t,e,n)}function qp(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}function La(t,e){return Te(t)?t.parentNode(e):e.parentNode}function Wp(t,e,n){return Xp(t,e,n)}let Xp=function Yp(t,e,n){return 40&t.type?Wt(t,n):null};function Oa(t,e,n,r){const i=Hp(t,r,e),s=e[H],a=Wp(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let l=0;l<n.length;l++)Gp(s,i,n[l],a,!1);else Gp(s,i,n,a,!1)}function Ba(t,e){if(null!==e){const n=e.type;if(3&n)return Wt(e,t);if(4&n)return Tc(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Ba(t,r);{const i=t[e.index];return rn(i)?Tc(-1,i):Le(i)}}if(32&n)return Dc(e,t)()||Le(t[e.index]);{const r=Zp(t,e);return null!==r?Array.isArray(r)?r[0]:Ba(Gs(t[16]),r):Ba(t,e.next)}}return null}function Zp(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Tc(t,e){const n=10+t+1;if(n<e.length){const r=e[n],i=r[1].firstChild;if(null!==i)return Ba(r,i)}return e[7]}function Pc(t,e,n,r,i,s,o){for(;null!=n;){const a=r[n.index],l=n.type;if(o&&0===e&&(a&&at(Le(a),r),n.flags|=4),64!=(64&n.flags))if(8&l)Pc(t,e,n.child,r,i,s,!1),Ai(e,t,i,a,s);else if(32&l){const u=Dc(n,r);let c;for(;c=u();)Ai(e,t,i,c,s);Ai(e,t,i,a,s)}else 16&l?Jp(t,e,r,n,i,s):Ai(e,t,i,a,s);n=o?n.projectionNext:n.next}}function qs(t,e,n,r,i,s){Pc(n,r,t.firstChild,e,i,s,!1)}function Jp(t,e,n,r,i,s){const o=n[16],l=o[6].projection[r.projection];if(Array.isArray(l))for(let u=0;u<l.length;u++)Ai(e,t,i,l[u],s);else Pc(t,e,l,o[3],i,s,!0)}function em(t,e,n){Te(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Ac(t,e,n){Te(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function tm(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}const nm="ng-template";function qE(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==tm(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function rm(t){return 4===t.type&&t.value!==nm}function WE(t,e,n){return e===(4!==t.type||n?t.value:nm)}function YE(t,e,n){let r=4;const i=t.attrs||[],s=function ZE(t){for(let e=0;e<t.length;e++)if(zg(t[e]))return e;return t.length}(i);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!WE(t,l,n)||""===l&&1===e.length){if(on(r))return!1;o=!0}}else{const u=8&r?l:e[++a];if(8&r&&null!==t.attrs){if(!qE(t.attrs,u,n)){if(on(r))return!1;o=!0}continue}const d=XE(8&r?"class":l,i,rm(t),n);if(-1===d){if(on(r))return!1;o=!0;continue}if(""!==u){let h;h=d>s?"":i[d+1].toLowerCase();const f=8&r?h:null;if(f&&-1!==tm(f,u,0)||2&r&&u!==h){if(on(r))return!1;o=!0}}}}else{if(!o&&!on(r)&&!on(l))return!1;if(o&&on(l))continue;o=!1,r=l|1&r}}return on(r)||o}function on(t){return 0==(1&t)}function XE(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){const o=e[i];if(o===t)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function QE(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function im(t,e,n=!1){for(let r=0;r<e.length;r++)if(YE(t,e[r],n))return!0;return!1}function JE(t,e){e:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let i=0;i<t.length;i++)if(t[i]!==r[i])continue e;return!0}}return!1}function sm(t,e){return t?":not("+e.trim()+")":e}function eb(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&r){const a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!on(o)&&(e+=sm(s,i),i=""),r=o,s=s||!on(r);n++}return""!==i&&(e+=sm(s,i)),e}const j={};function _t(t){om(te(),D(),pt()+t,!1)}function om(t,e,n,r){if(!r)if(3==(3&e[2])){const s=t.preOrderCheckHooks;null!==s&&_a(e,s,n)}else{const s=t.preOrderHooks;null!==s&&ya(e,s,0,n)}fr(n)}const cm=new q("ENVIRONMENT_INITIALIZER"),dm=new q("INJECTOR_DEF_TYPES");function lb(...t){return{\u0275providers:hm(0,t)}}function hm(t,...e){const n=[],r=new Set;let i;return Yn(e,s=>{const o=s;Rc(o,n,[],r)&&(i||(i=[]),i.push(o))}),void 0!==i&&fm(i,n),n}function fm(t,e){for(let n=0;n<t.length;n++){const{providers:i}=t[n];Yn(i,s=>{e.push(s)})}}function Rc(t,e,n,r){if(!(t=N(t)))return!1;let i=null,s=pg(t);const o=!s&&pe(t);if(s||o){if(o&&!o.standalone)return!1;i=t}else{const l=t.ngModule;if(s=pg(l),!s)return!1;i=l}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const u of l)Rc(u,e,n,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let u;r.add(i);try{Yn(s.imports,c=>{Rc(c,e,n,r)&&(u||(u=[]),u.push(c))})}finally{}void 0!==u&&fm(u,e)}if(!a){const u=Ur(i)||(()=>new i);e.push({provide:i,useFactory:u,deps:ae},{provide:dm,useValue:i,multi:!0},{provide:cm,useValue:()=>E(i),multi:!0})}const l=s.providers;null==l||a||Yn(l,c=>{e.push(c)})}}return i!==t&&void 0!==t.providers}const ub=fe({provide:String,useValue:fe});function Fc(t){return null!==t&&"object"==typeof t&&ub in t}function $r(t){return"function"==typeof t}const Nc=new q("INJECTOR",-1);class mm{get(e,n=ks){if(n===ks){const r=new Error(`NullInjectorError: No provider for ${ge(e)}!`);throw r.name="NullInjectorError",r}return n}}const kc=new q("Set Injector scope."),Va={},db={};let Lc;function Oc(){return void 0===Lc&&(Lc=new mm),Lc}class zr{}class _m extends zr{constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Vc(e,o=>this.processProvider(o)),this.records.set(Nc,Ri(void 0,this)),i.has("environment")&&this.records.set(zr,Ri(void 0,this));const s=this.records.get(kc);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(dm.multi,ae,A.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}get(e,n=ks,r=A.Default){this.assertNotDestroyed();const i=Ia(this),s=xn(void 0);try{if(!(r&A.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function mb(t){return"function"==typeof t||"object"==typeof t&&t instanceof q}(e)&&Eu(e);a=l&&this.injectableDefInScope(l)?Ri(Bc(e),Va):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&A.Self?Oc():this.parent).get(e,n=r&A.Optional&&n===ks?null:n)}catch(o){if("NullInjectorError"===o.name){if((o[ba]=o[ba]||[]).unshift(ge(e)),i)throw o;return function Mx(t,e,n,r){const i=t[ba];throw e[ap]&&i.unshift(e[ap]),t.message=function xx(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let i=ge(e);if(Array.isArray(e))i=e.map(ge).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):ge(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(vx,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t[ba]=null,t}(o,e,"R3InjectorError",this.source)}throw o}finally{xn(s),Ia(i)}}resolveInjectorInitializers(){const e=Ia(this),n=xn(void 0);try{const r=this.get(cm.multi,ae,A.Self);for(const i of r)i()}finally{Ia(e),xn(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(ge(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new X(205,!1)}processProvider(e){let n=$r(e=N(e))?e:N(e&&e.provide);const r=function fb(t){return Fc(t)?Ri(void 0,t.useValue):Ri(function ym(t,e,n){let r;if($r(t)){const i=N(t);return Ur(i)||Bc(i)}if(Fc(t))r=()=>N(t.useValue);else if(function pm(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...oc(t.deps||[]));else if(function gm(t){return!(!t||!t.useExisting)}(t))r=()=>E(N(t.useExisting));else{const i=N(t&&(t.useClass||t.provide));if(!function gb(t){return!!t.deps}(t))return Ur(i)||Bc(i);r=()=>new i(...oc(t.deps))}return r}(t),Va)}(e);if($r(e)||!0!==e.multi)this.records.get(n);else{let i=this.records.get(n);i||(i=Ri(void 0,Va,!0),i.factory=()=>oc(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===Va&&(n.value=db,n.value=n.factory()),"object"==typeof n.value&&n.value&&function pb(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=N(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function Bc(t){const e=Eu(t),n=null!==e?e.factory:Ur(t);if(null!==n)return n;if(t instanceof q)throw new X(204,!1);if(t instanceof Function)return function hb(t){const e=t.length;if(e>0)throw Ns(e,"?"),new X(204,!1);const n=function nM(t){const e=t&&(t[sa]||t[mg]);if(e){const n=function rM(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new X(204,!1)}function Ri(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function _b(t){return!!t.\u0275providers}function Vc(t,e){for(const n of t)Array.isArray(n)?Vc(n,e):_b(n)?Vc(n.\u0275providers,e):e(n)}function vm(t,e=null,n=null,r){const i=Cm(t,e,n,r);return i.resolveInjectorInitializers(),i}function Cm(t,e=null,n=null,r,i=new Set){const s=[n||ae,lb(t)];return r=r||("object"==typeof t?void 0:ge(t)),new _m(s,e||Oc(),r||null,i)}let bt=(()=>{class t{static create(n,r){if(Array.isArray(n))return vm({name:""},r,n,"");{const i=n.name??"";return vm({name:i},n.parent,n.providers,i)}}}return t.THROW_IF_NOT_FOUND=ks,t.NULL=new mm,t.\u0275prov=G({token:t,providedIn:"any",factory:()=>E(Nc)}),t.__NG_ELEMENT_ID__=-1,t})();function I(t,e=A.Default){const n=D();return null===n?E(t,e):Zg(Ge(),n,N(t),e)}function zc(){throw new Error("invalid")}function jm(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const o=t.data[s];Wu(i),o.contentQueries(2,e[s],s)}}}function Ws(t,e,n,r,i,s,o,a,l,u,c){const d=e.blueprint.slice();return d[0]=i,d[2]=76|r,(null!==c||t&&1024&t[2])&&(d[2]|=1024),Tg(d),d[3]=d[15]=t,d[8]=n,d[10]=o||t&&t[10],d[H]=a||t&&t[H],d[12]=l||t&&t[12]||null,d[9]=u||t&&t[9]||null,d[6]=s,d[20]=function mE(){return pE++}(),d[21]=c,d[16]=2==e.type?t[16]:d,d}function Ni(t,e,n,r,i){let s=t.data[e];if(null===s)s=function sd(t,e,n,r,i){const s=Ng(),o=$u(),l=t.data[e]=function Xb(t,e,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l)),l}(t,e,n,r,i),function kM(){return O.lFrame.inI18n}()&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const o=function Es(){const t=O.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return bn(s,!0),s}function ki(t,e,n,r){if(0===n)return-1;const i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Ys(t,e,n){ga(e);try{const r=t.viewQuery;null!==r&&gd(1,r,n);const i=t.template;null!==i&&Um(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&jm(t,e),t.staticViewQueries&&gd(2,t.viewQuery,n);const s=t.components;null!==s&&function qb(t,e){for(let n=0;n<e.length;n++)fI(t,e[n])}(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,pa()}}function Li(t,e,n,r){const i=e[2];if(128!=(128&i)){ga(e);try{Tg(e),function kg(t){return O.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Um(t,e,n,2,r);const o=3==(3&i);if(o){const u=t.preOrderCheckHooks;null!==u&&_a(e,u,null)}else{const u=t.preOrderHooks;null!==u&&ya(e,u,0,null),Yu(e,0)}if(function dI(t){for(let e=wc(t);null!==e;e=Sc(e)){if(!e[2])continue;const n=e[9];for(let r=0;r<n.length;r++){const i=n[r],s=i[3];0==(512&i[2])&&Hu(s,1),i[2]|=512}}}(e),function cI(t){for(let e=wc(t);null!==e;e=Sc(e))for(let n=10;n<e.length;n++){const r=e[n],i=r[1];Uu(r)&&Li(i,r,i.template,r[8])}}(e),null!==t.contentQueries&&jm(t,e),o){const u=t.contentCheckHooks;null!==u&&_a(e,u)}else{const u=t.contentHooks;null!==u&&ya(e,u,1),Yu(e,1)}!function zb(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const i=n[r];if(i<0)fr(~i);else{const s=i,o=n[++r],a=n[++r];LM(o,s),a(2,e[s])}}}finally{fr(-1)}}(t,e);const a=t.components;null!==a&&function Gb(t,e){for(let n=0;n<e.length;n++)hI(t,e[n])}(e,a);const l=t.viewQuery;if(null!==l&&gd(2,l,r),o){const u=t.viewCheckHooks;null!==u&&_a(e,u)}else{const u=t.viewHooks;null!==u&&ya(e,u,2),Yu(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,Hu(e[3],-1))}finally{pa()}}}function Wb(t,e,n,r){const i=e[10],o=function Ig(t){return 4==(4&t[2])}(e);try{!o&&i.begin&&i.begin(),o&&Ys(t,e,r),Li(t,e,n,r)}finally{!o&&i.end&&i.end()}}function Um(t,e,n,r,i){const s=pt(),o=2&r;try{fr(-1),o&&e.length>22&&om(t,e,22,!1),n(r,i)}finally{fr(s)}}function od(t,e,n){!Ag()||(function nI(t,e,n,r){const i=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||Ts(n,e),at(r,e);const o=n.initialInputs;for(let a=i;a<s;a++){const l=t.data[a],u=sn(l);u&&aI(e,n,l);const c=Ps(e,t,a,n);at(c,e),null!==o&&lI(0,a-i,c,l,0,o),u&&(Ot(n.index,e)[8]=c)}}(t,e,n,Wt(n,e)),128==(128&n.flags)&&function rI(t,e,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=function OM(){return O.lFrame.currentDirectiveIndex}();try{fr(s);for(let a=r;a<i;a++){const l=t.data[a],u=e[a];Gu(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&Xm(l,u)}}finally{fr(-1),Gu(o)}}(t,e,n))}function ad(t,e,n=Wt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(e,t):t[o];t[i++]=a}}}function $m(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=za(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function za(t,e,n,r,i,s,o,a,l,u){const c=22+r,d=c+i,h=function Yb(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:j);return n}(c,d),f="function"==typeof u?u():u;return h[1]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,c),bindingStartIndex:c,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function Wm(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function ld(t,e,n,r){let i=!1;if(Ag()){const s=function iI(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];im(n,o.selectors,!1)&&(i||(i=[]),Sa(Ts(n,e),t,o.type),sn(o)?(Km(t,n),i.unshift(o)):i.push(o))}return i}(t,e,n),o=null===r?null:{"":-1};if(null!==s){i=!0,Zm(n,t.data.length,s.length);for(let c=0;c<s.length;c++){const d=s[c];d.providersResolver&&d.providersResolver(d)}let a=!1,l=!1,u=ki(t,e,s.length,null);for(let c=0;c<s.length;c++){const d=s[c];n.mergedAttrs=Ca(n.mergedAttrs,d.hostAttrs),Qm(t,n,e,u,d),oI(u,d,o),null!==d.contentQueries&&(n.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(n.flags|=128);const h=d.type.prototype;!a&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),a=!0),!l&&(h.ngOnChanges||h.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),l=!0),u++}!function Kb(t,e){const r=e.directiveEnd,i=t.data,s=e.attrs,o=[];let a=null,l=null;for(let u=e.directiveStart;u<r;u++){const c=i[u],d=c.inputs,h=null===s||rm(e)?null:uI(d,s);o.push(h),a=Wm(d,u,a),l=Wm(c.outputs,u,l)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=a,e.outputs=l}(t,n)}o&&function sI(t,e,n){if(e){const r=t.localNames=[];for(let i=0;i<e.length;i+=2){const s=n[e[i+1]];if(null==s)throw new X(-301,!1);r.push(e[i],s)}}}(n,r,o)}return n.mergedAttrs=Ca(n.mergedAttrs,n.attrs),i}function Ym(t,e,n,r,i,s){const o=s.hostBindings;if(o){let a=t.hostBindingOpCodes;null===a&&(a=t.hostBindingOpCodes=[]);const l=~e.index;(function tI(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(a)!=l&&a.push(l),a.push(r,i,o)}}function Xm(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Km(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function oI(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;sn(e)&&(n[""]=t)}}function Zm(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Qm(t,e,n,r,i){t.data[r]=i;const s=i.factory||(i.factory=Ur(i.type)),o=new bs(s,sn(i),I);t.blueprint[r]=o,n[r]=o,Ym(t,e,0,r,ki(t,n,i.hostVars,j),i)}function aI(t,e,n){const r=Wt(e,t),i=$m(n),s=t[10],o=Ga(t,Ws(t,i,null,n.onPush?32:16,r,e,s,s.createRenderer(r,n),null,null,null));t[e.index]=o}function lI(t,e,n,r,i,s){const o=s[e];if(null!==o){const a=r.setInput;for(let l=0;l<o.length;){const u=o[l++],c=o[l++],d=o[l++];null!==a?r.setInput(n,d,u,c):n[c]=d}}}function uI(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Jm(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function hI(t,e){const n=Ot(e,t);if(Uu(n)){const r=n[1];48&n[2]?Li(r,n,r.template,n[8]):n[5]>0&&cd(n)}}function cd(t){for(let r=wc(t);null!==r;r=Sc(r))for(let i=10;i<r.length;i++){const s=r[i];if(512&s[2]){const o=s[1];Li(o,s,o.template,s[8])}else s[5]>0&&cd(s)}const n=t[1].components;if(null!==n)for(let r=0;r<n.length;r++){const i=Ot(n[r],t);Uu(i)&&i[5]>0&&cd(i)}}function fI(t,e){const n=Ot(e,t),r=n[1];(function gI(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(r,n),Ys(r,n,n[8])}function Ga(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function dd(t){for(;t;){t[2]|=32;const e=Gs(t);if(fM(t)&&!e)return t;t=e}return null}function e_(t){!function hd(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=vc(n);if(null!==r){const i=r[1];Wb(i,r,i.template,n)}}}(t[8])}function gd(t,e,n){Wu(0),e(t,n)}const mI=(()=>Promise.resolve(null))();function t_(t){return t[7]||(t[7]=[])}function n_(t){return t.cleanup||(t.cleanup=[])}function i_(t,e){const n=t[9],r=n?n.get(Ti,null):null;r&&r.handleError(e)}function s_(t,e,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],l=e[o],u=t.data[o];null!==u.setInput?u.setInput(l,i,r,a):l[a]=i}}function Qn(t,e,n){const r=function ha(t,e){return Le(e[t])}(e,t);!function Vp(t,e,n){Te(t)?t.setValue(e,n):e.textContent=n}(t[H],r,n)}function qa(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Su(i,a):2==s&&(r=Su(r,a+": "+e[++o]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function bI(){const t=Ge();ma(D()[1],t)}function lt(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Jn(t,e,n,r,i,s,o,a){const l=D(),u=te(),c=t+22,d=u.firstCreatePass?function BI(t,e,n,r,i,s,o,a,l){const u=e.consts,c=Ni(e,t,4,o||null,hr(u,a));ld(e,n,c,hr(u,l)),ma(e,c);const d=c.tViews=za(2,c,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u);return null!==e.queries&&(e.queries.template(e,c),d.queries=e.queries.embeddedTView(c)),c}(c,u,l,e,n,r,i,s,o):u.data[c];bn(d,!1);const h=l[H].createComment("");Oa(u,l,h,d),at(h,l),Ga(l,l[c]=Jm(h,l,h,d)),da(d)&&od(u,l,d),null!=o&&ad(l,d,a)}function et(t,e,n){const r=D();return lt(r,yi(),e)&&function Ut(t,e,n,r,i,s,o,a){const l=Wt(e,n);let c,u=e.inputs;!a&&null!=u&&(c=u[r])?(s_(t,n,c,r,i),ca(e)&&function Qb(t,e){const n=Ot(e,t);16&n[2]||(n[2]|=32)}(n,e.index)):3&e.type&&(r=function Zb(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=o?o(i,e.value||"",r):i,Te(s)?s.setProperty(l,r,i):Ku(r)||(l.setProperty?l.setProperty(r,i):l[r]=i))}(te(),function Pe(){const t=O.lFrame;return ju(t.tView,t.selectedIndex)}(),r,t,e,r[H],n,!1),et}function vd(t,e,n,r,i){const o=i?"class":"style";s_(t,n,e.inputs[o],o,r)}function Qe(t,e,n,r){const i=D(),s=te(),o=22+t,a=i[H],l=i[o]=xc(a,e,function GM(){return O.lFrame.currentNamespace}()),u=s.firstCreatePass?function UI(t,e,n,r,i,s,o){const a=e.consts,u=Ni(e,t,2,i,hr(a,s));return ld(e,n,u,hr(a,o)),null!==u.attrs&&qa(u,u.attrs,!1),null!==u.mergedAttrs&&qa(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,s,i,0,e,n,r):s.data[o];bn(u,!0);const c=u.mergedAttrs;null!==c&&va(a,l,c);const d=u.classes;null!==d&&Ac(a,l,d);const h=u.styles;return null!==h&&em(a,l,h),64!=(64&u.flags)&&Oa(s,i,l,u),0===function TM(){return O.lFrame.elementDepthCount}()&&at(l,i),function PM(){O.lFrame.elementDepthCount++}(),da(u)&&(od(s,i,u),function Hm(t,e,n){if(Fu(e)){const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const o=t.data[s];o.contentQueries&&o.contentQueries(1,n[s],s)}}}(s,u,i)),null!==r&&ad(i,u),Qe}function yt(){let t=Ge();$u()?zu():(t=t.parent,bn(t,!1));const e=t;!function AM(){O.lFrame.elementDepthCount--}();const n=te();return n.firstCreatePass&&(ma(n,t),Fu(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function KM(t){return 0!=(16&t.flags)}(e)&&vd(n,e,D(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function ZM(t){return 0!=(32&t.flags)}(e)&&vd(n,e,D(),e.stylesWithoutHost,!1),yt}function ut(t,e,n,r){return Qe(t,e,n,r),yt(),ut}function Xa(t){return!!t&&"function"==typeof t.then}const A_=function P_(t){return!!t&&"function"==typeof t.subscribe};function er(t,e,n,r){const i=D(),s=te(),o=Ge();return function F_(t,e,n,r,i,s,o,a){const l=da(r),c=t.firstCreatePass&&n_(t),d=e[8],h=t_(e);let f=!0;if(3&r.type||a){const m=Wt(r,e),_=a?a(m):m,v=h.length,y=a?C=>a(Le(C[r.index])):r.index;if(Te(n)){let C=null;if(!a&&l&&(C=function $I(t,e,n,r){const i=t.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===n&&i[s+1]===r){const a=e[7],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(t,e,i,r.index)),null!==C)(C.__ngLastListenerFn__||C).__ngNextListenerFn__=s,C.__ngLastListenerFn__=s,f=!1;else{s=wd(r,e,d,s,!1);const x=n.listen(_,i,s);h.push(s,x),c&&c.push(i,y,v,v+1)}}else s=wd(r,e,d,s,!0),_.addEventListener(i,s,o),h.push(s),c&&c.push(i,y,v,o)}else s=wd(r,e,d,s,!1);const g=r.outputs;let p;if(f&&null!==g&&(p=g[i])){const m=p.length;if(m)for(let _=0;_<m;_+=2){const W=e[p[_]][p[_+1]].subscribe(s),Xe=h.length;h.push(s,W),c&&c.push(i,r.index,Xe,-(Xe+1))}}}(s,i,i[H],o,t,e,!!n,r),er}function N_(t,e,n,r){try{return!1!==n(r)}catch(i){return i_(t,i),!1}}function wd(t,e,n,r,i){return function s(o){if(o===Function)return r;dd(2&t.flags?Ot(t.index,e):e);let l=N_(e,0,r,o),u=s.__ngNextListenerFn__;for(;u;)l=N_(e,0,u,o)&&l,u=u.__ngNextListenerFn__;return i&&!1===l&&(o.preventDefault(),o.returnValue=!1),l}}function Ka(t=1){return function VM(t){return(O.lFrame.contextLView=function jM(t,e){for(;t>0;)e=e[15],t--;return e}(t,O.lFrame.contextLView))[8]}(t)}function zI(t,e){let n=null;const r=function KE(t){const e=t.attrs;if(null!=e){const n=e.indexOf(5);if(0==(1&n))return e[n+1]}return null}(t);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?im(t,s,!0):JE(r,s))return i}else n=i}return n}function yr(t,e=""){const n=D(),r=te(),i=t+22,s=r.firstCreatePass?Ni(r,i,1,e,null):r.data[i],o=n[i]=function Mc(t,e){return Te(t)?t.createText(e):t.createTextNode(e)}(n[H],e);Oa(r,n,o,s),bn(s,!1)}function Wi(t,e,n){const r=D(),i=function Bi(t,e,n,r){return lt(t,yi(),n)?e+V(n)+r:j}(r,t,e,n);return i!==j&&Qn(r,pt(),i),Wi}const Xi="en-US";let Ty=Xi;class TP{resolveComponentFactory(e){throw function IP(t){const e=Error(`No component factory found for ${ge(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(e)}}let no=(()=>{class t{}return t.NULL=new TP,t})();class vr{}class nv{}class rv{}function AP(){return Zi(Ge(),D())}function Zi(t,e){return new Cr(Wt(t,e))}let Cr=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=AP,t})();class iv{}let nl=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function NP(){const t=D(),n=Ot(Ge().index,t);return function FP(t){return t[H]}(Et(n)?n:t)}(),t})(),kP=(()=>{class t{}return t.\u0275prov=G({token:t,providedIn:"root",factory:()=>null}),t})();class rl{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const LP=new rl("14.0.2"),Ad={};function il(t,e,n,r,i=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&r.push(Le(s)),rn(s))for(let a=10;a<s.length;a++){const l=s[a],u=l[1].firstChild;null!==u&&il(l[1],l,u,r)}const o=n.type;if(8&o)il(t,e,n.child,r);else if(32&o){const a=Dc(n,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=Zp(e,n);if(Array.isArray(a))r.push(...a);else{const l=Gs(e[16]);il(l[1],l,a,r,!0)}}n=i?n.projectionNext:n.next}return r}class ro{constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,n=e[1];return il(n,e,n.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(rn(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Ec(e,r),xa(n,r))}this._attachedToViewContainer=!1}Up(this._lView[1],this._lView)}onDestroy(e){!function qm(t,e,n,r){const i=t_(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&n_(t).push(r,i.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){dd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function fd(t,e,n){const r=e[10];r.begin&&r.begin();try{Li(t,e,t.template,n)}catch(i){throw i_(e,i),i}finally{r.end&&r.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new X(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function kE(t,e){qs(t,e,e[H],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new X(902,"");this._appRef=e}}class OP extends ro{constructor(e){super(e),this._view=e}detectChanges(){e_(this._view)}checkNoChanges(){}get context(){return null}}class Rd extends no{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=pe(e);return new Fd(n,this.ngModule)}}function sv(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class VP{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){const i=this.injector.get(e,Ad,r);return i!==Ad||n===Ad?i:this.parentInjector.get(e,n,r)}}class Fd extends rv{constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function tb(t){return t.map(eb).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return sv(this.componentDef.inputs)}get outputs(){return sv(this.componentDef.outputs)}create(e,n,r,i){let s=(i=i||this.ngModule)instanceof zr?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new VP(e,s):e,a=o.get(iv,bg),l=o.get(kP,null),u=a.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",d=r?function Gm(t,e,n){if(Te(t))return t.selectRootElement(e,n===En.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(u,r,this.componentDef.encapsulation):xc(a.createRenderer(null,this.componentDef),c,function BP(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(c)),h=this.componentDef.onPush?288:272,f=function m_(t,e){return{components:[],scheduler:t||EE,clean:mI,playerHandler:e||null,flags:0}}(),g=za(0,null,null,1,0,null,null,null,null,null),p=Ws(null,g,f,h,null,null,a,u,l,o,null);let m,_;ga(p);try{const v=function g_(t,e,n,r,i,s){const o=n[1];n[22]=t;const l=Ni(o,22,2,"#host",null),u=l.mergedAttrs=e.hostAttrs;null!==u&&(qa(l,u,!0),null!==t&&(va(i,t,u),null!==l.classes&&Ac(i,t,l.classes),null!==l.styles&&em(i,t,l.styles)));const c=r.createRenderer(t,e),d=Ws(n,$m(e),null,e.onPush?32:16,n[22],l,r,c,s||null,null,null);return o.firstCreatePass&&(Sa(Ts(l,n),o,e.type),Km(o,l),Zm(l,n.length,1)),Ga(n,d),n[22]=d}(d,this.componentDef,p,a,u);if(d)if(r)va(u,d,["ng-version",LP.full]);else{const{attrs:y,classes:C}=function nb(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let s=t[r];if("string"==typeof s)2===i?""!==s&&e.push(s,t[++r]):8===i&&n.push(s);else{if(!on(i))break;i=s}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);y&&va(u,d,y),C&&C.length>0&&Ac(u,d,C.join(" "))}if(_=ju(g,22),void 0!==n){const y=_.projection=[];for(let C=0;C<this.ngContentSelectors.length;C++){const x=n[C];y.push(null!=x?Array.from(x):null)}}m=function p_(t,e,n,r,i){const s=n[1],o=function eI(t,e,n){const r=Ge();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Qm(t,r,e,ki(t,e,1,null),n));const i=Ps(e,t,r.directiveStart,r);at(i,e);const s=Wt(r,e);return s&&at(s,e),i}(s,n,e);if(r.components.push(o),t[8]=o,null!==i)for(const l of i)l(o,e);if(e.contentQueries){const l=Ge();e.contentQueries(1,o,l.directiveStart)}const a=Ge();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(fr(a.index),Ym(n[1],a,0,a.directiveStart,a.directiveEnd,e),Xm(e,o)),o}(v,this.componentDef,p,f,[bI]),Ys(g,p,null)}finally{pa()}return new UP(this.componentType,m,Zi(_,p),p,_)}}class UP extends class PP{}{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.instance=n,this.hostView=this.changeDetectorRef=new OP(i),this.componentType=e}get injector(){return new Di(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class ov extends vr{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Rd(this);const r=kt(e);this._bootstrapComponents=Kn(r.bootstrap),this._r3Injector=Cm(e,n,[{provide:vr,useValue:this},{provide:no,useValue:this.componentFactoryResolver}],ge(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this.get(e)}get(e,n=bt.THROW_IF_NOT_FOUND,r=A.Default){return e===bt||e===vr||e===Nc?this:this._r3Injector.get(e,n,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Nd extends nv{constructor(e){super(),this.moduleType=e}create(e){return new ov(this.moduleType,e)}}class $P extends vr{constructor(e,n,r){super(),this.componentFactoryResolver=new Rd(this),this.instance=null;const i=new _m([...e,{provide:vr,useValue:this},{provide:no,useValue:this.componentFactoryResolver}],n||Oc(),r,new Set(["environment"]));this.injector=i,i.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function sl(t,e=null,n=null){return new $P(t,e,n).injector}function kd(t,e,n){const r=function gt(){const t=O.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}()+t,i=D();return i[r]===j?function An(t,e,n){return t[e]=n}(i,r,n?e.call(n):e()):function Ks(t,e){return t[e]}(i,r)}function Ld(t){return e=>{setTimeout(t,void 0,e)}}const ct=class uA extends At{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&"object"==typeof e){const l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=Ld(s),i&&(i=Ld(i)),o&&(o=Ld(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof Pt&&e.add(a),a}};let tr=(()=>{class t{}return t.__NG_ELEMENT_ID__=fA,t})();const dA=tr,hA=class extends dA{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(e,n){const r=this._declarationTContainer.tViews,i=Ws(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,n||null);i[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(i[19]=o.createEmbeddedView(r)),Ys(r,i,e),new ro(i)}};function fA(){return function ol(t,e){return 4&t.type?new hA(e,t,Zi(t,e)):null}(Ge(),D())}let dn=(()=>{class t{}return t.__NG_ELEMENT_ID__=gA,t})();function gA(){return function gv(t,e){let n;const r=e[t.index];if(rn(r))n=r;else{let i;if(8&t.type)i=Le(r);else{const s=e[H];i=s.createComment("");const o=Wt(t,e);Hr(s,La(s,o),i,function HE(t,e){return Te(t)?t.nextSibling(e):e.nextSibling}(s,o),!1)}e[t.index]=n=Jm(r,e,i,t),Ga(e,n)}return new hv(n,t,e)}(Ge(),D())}const pA=dn,hv=class extends pA{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Zi(this._hostTNode,this._hostLView)}get injector(){return new Di(this._hostTNode,this._hostLView)}get parentInjector(){const e=wa(this._hostTNode,this._hostLView);if(qg(e)){const n=Ci(e,this._hostLView),r=vi(e);return new Di(n[1].data[r+8],n)}return new Di(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=fv(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const o=e.createEmbeddedView(n||{},s);return this.insert(o,i),o}createComponent(e,n,r,i,s){const o=e&&!function Fs(t){return"function"==typeof t}(e);let a;if(o)a=n;else{const d=n||{};a=d.index,r=d.injector,i=d.projectableNodes,s=d.environmentInjector||d.ngModuleRef}const l=o?e:new Fd(pe(e)),u=r||this.parentInjector;if(!s&&null==l.ngModule){const h=(o?u:this.parentInjector).get(zr,null);h&&(s=h)}const c=l.create(u,i,void 0,s);return this.insert(c.hostView,a),c}insert(e,n){const r=e._lView,i=r[1];if(function IM(t){return rn(t[3])}(r)){const c=this.indexOf(e);if(-1!==c)this.detach(c);else{const d=r[3],h=new hv(d,d[6],d[3]);h.detach(h.indexOf(e))}}const s=this._adjustIndex(n),o=this._lContainer;!function OE(t,e,n,r){const i=10+r,s=n.length;r>0&&(n[i-1][4]=e),r<s-10?(e[4]=n[i],rp(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function BE(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=64}(i,r,o,s);const a=Tc(s,o),l=r[H],u=La(l,o[7]);return null!==u&&function NE(t,e,n,r,i,s){r[0]=i,r[6]=e,qs(t,r,n,1,i,s)}(i,o[6],l,r,u,a),e.attachToViewContainerRef(),rp(Bd(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=fv(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Ec(this._lContainer,n);r&&(xa(Bd(this._lContainer),n),Up(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=Ec(this._lContainer,n);return r&&null!=xa(Bd(this._lContainer),n)?new ro(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function fv(t){return t[8]}function Bd(t){return t[8]||(t[8]=[])}function ll(...t){}const ul=new q("Application Initializer");let cl=(()=>{class t{constructor(n){this.appInits=n,this.resolve=ll,this.reject=ll,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let i=0;i<this.appInits.length;i++){const s=this.appInits[i]();if(Xa(s))n.push(s);else if(A_(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});n.push(o)}}Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(E(ul,8))},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const ao=new q("AppId",{providedIn:"root",factory:function Bv(){return`${Zd()}${Zd()}${Zd()}`}});function Zd(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Vv=new q("Platform Initializer"),dl=new q("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),jv=new q("appBootstrapListener");let GA=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();const nr=new q("LocaleId",{providedIn:"root",factory:()=>function wx(t,e=A.Default){return E(t,e)}(nr,A.Optional|A.SkipSelf)||function qA(){return typeof $localize<"u"&&$localize.locale||Xi}()});class YA{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let Qd=(()=>{class t{compileModuleSync(n){return new Nd(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),s=Kn(kt(n).declarations).reduce((o,a)=>{const l=pe(a);return l&&o.push(new Fd(l)),o},[]);return new YA(r,s)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const KA=(()=>Promise.resolve(0))();function Jd(t){typeof Zone>"u"?KA.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Re{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ct(!1),this.onMicrotaskEmpty=new ct(!1),this.onStable=new ct(!1),this.onError=new ct(!1),typeof Zone>"u")throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function ZA(){let t=he.requestAnimationFrame,e=he.cancelAnimationFrame;if(typeof Zone<"u"&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function e1(t){const e=()=>{!function JA(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(he,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,th(t),t.isCheckStableRunning=!0,eh(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),th(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return Uv(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),Hv(t)}},onInvoke:(n,r,i,s,o,a,l)=>{try{return Uv(t),n.invoke(i,s,o,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),Hv(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,th(t),eh(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Re.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Re.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,QA,ll,ll);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const QA={};function eh(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function th(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Uv(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Hv(t){t._nesting--,eh(t)}class t1{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ct,this.onMicrotaskEmpty=new ct,this.onStable=new ct,this.onError=new ct}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}}const $v=new q(""),hl=new q("");let ih,nh=(()=>{class t{constructor(n,r,i){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ih||(function n1(t){ih=t}(i),i.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Re.assertNotInAngularZone(),Jd(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Jd(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:s,updateCb:i})}whenStable(n,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,i){return[]}}return t.\u0275fac=function(n){return new(n||t)(E(Re),E(rh),E(hl))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})(),rh=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return ih?.findTestabilityInTree(this,n,r)??null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})(),Dr=null;const zv=new q("AllowMultipleToken"),Gv=new q("PlatformOnDestroy");class qv{constructor(e,n){this.name=e,this.token=n}}function Yv(t,e,n=[]){const r=`Platform: ${e}`,i=new q(r);return(s=[])=>{let o=sh();if(!o||o.injector.get(zv,!1)){const a=[...n,...s,{provide:i,useValue:!0}];t?t(a):function s1(t){if(Dr&&!Dr.get(zv,!1))throw new X(400,"");Dr=t;const e=t.get(Kv);(function Wv(t){const e=t.get(Vv,null);e&&e.forEach(n=>n())})(t)}(function Xv(t=[],e){return bt.create({name:e,providers:[{provide:kc,useValue:"platform"},{provide:Gv,useValue:()=>Dr=null},...t]})}(a,r))}return function a1(t){const e=sh();if(!e)throw new X(401,"");return e}()}}function sh(){return Dr?.get(Kv)??null}let Kv=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const i=function l1(t,e){let n;return n="noop"===t?new t1:("zone.js"===t?void 0:t)||new Re(e),n}(r?.ngZone,function Zv(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!t||!t.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!t||!t.ngZoneRunCoalescing)||!1}}(r)),s=[{provide:Re,useValue:i}];return i.run(()=>{const o=bt.create({providers:s,parent:this.injector,name:n.moduleType.name}),a=n.create(o),l=a.injector.get(Ti,null);if(!l)throw new X(402,"");return i.runOutsideAngular(()=>{const u=i.onError.subscribe({next:c=>{l.handleError(c)}});a.onDestroy(()=>{fl(this._modules,a),u.unsubscribe()})}),function Qv(t,e,n){try{const r=n();return Xa(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(l,i,()=>{const u=a.injector.get(cl);return u.runInitializers(),u.donePromise.then(()=>(function Py(t){Nt(t,"Expected localeId to be defined"),"string"==typeof t&&(Ty=t.toLowerCase().replace(/_/g,"-"))}(a.injector.get(nr,Xi)||Xi),this._moduleDoBootstrap(a),a))})})}bootstrapModule(n,r=[]){const i=Jv({},r);return function r1(t,e,n){const r=new Nd(n);return Promise.resolve(r)}(0,0,n).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(n){const r=n.injector.get(lo);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!n.instance.ngDoBootstrap)throw new X(403,"");n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new X(404,"");this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r()),this._injector.get(Gv,null)?.(),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(E(bt))},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function Jv(t,e){return Array.isArray(e)?e.reduce(Jv,t):{...t,...e}}let lo=(()=>{class t{constructor(n,r,i,s){this._zone=n,this._injector=r,this._exceptionHandler=i,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const o=new Ee(l=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{l.next(this._stable),l.complete()})}),a=new Ee(l=>{let u;this._zone.runOutsideAngular(()=>{u=this._zone.onStable.subscribe(()=>{Re.assertNotInAngularZone(),Jd(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,l.next(!0))})})});const c=this._zone.onUnstable.subscribe(()=>{Re.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{l.next(!1)}))});return()=>{u.unsubscribe(),c.unsubscribe()}});this.isStable=Cu(o,a.pipe(function XS(t={}){const{connector:e=(()=>new At),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=t;return s=>{let o=null,a=null,l=null,u=0,c=!1,d=!1;const h=()=>{a?.unsubscribe(),a=null},f=()=>{h(),o=l=null,c=d=!1},g=()=>{const p=o;f(),p?.unsubscribe()};return He((p,m)=>{u++,!d&&!c&&h();const _=l=l??e();m.add(()=>{u--,0===u&&!d&&!c&&(a=Du(g,i))}),_.subscribe(m),o||(o=new ta({next:v=>_.next(v),error:v=>{d=!0,h(),a=Du(f,n,v),_.error(v)},complete:()=>{c=!0,h(),a=Du(f,r),_.complete()}}),ze(p).subscribe(o))})(s)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const i=n instanceof rv;if(!this._initStatus.done)throw!i&&function Ji(t){const e=pe(t)||ht(t)||ft(t);return null!==e&&e.standalone}(n),new X(405,false);let s;s=i?n:this._injector.get(no).resolveComponentFactory(n),this.componentTypes.push(s.componentType);const o=function i1(t){return t.isBoundToModule}(s)?void 0:this._injector.get(vr),l=s.create(bt.NULL,[],r||s.selector,o),u=l.location.nativeElement,c=l.injector.get($v,null);return c?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),fl(this.components,l),c?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){if(this._runningTick)throw new X(101,"");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;fl(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(jv,[]).concat(this._bootstrapListeners).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>fl(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new X(406,false);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(n){return new(n||t)(E(Re),E(bt),E(Ti),E(cl))},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function fl(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}let t0=!0,oh=(()=>{class t{}return t.__NG_ELEMENT_ID__=d1,t})();function d1(t){return function h1(t,e,n){if(ca(t)&&!n){const r=Ot(t.index,e);return new ro(r,r)}return 47&t.type?new ro(e[16],e):null}(Ge(),D(),16==(16&t))}const x1=Yv(null,"core",[]);let E1=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(E(lo))},t.\u0275mod=dr({type:t}),t.\u0275inj=Hn({}),t})();function ts(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}let _l=null;function wr(){return _l}const It=new q("DocumentToken");let co=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:function(){return function P1(){return E(f0)}()},providedIn:"platform"}),t})();const A1=new q("Location Initialized");let f0=(()=>{class t extends co{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return wr().getBaseHref(this._doc)}onPopState(n){const r=wr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=wr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,r,i){g0()?this._history.pushState(n,r,i):this.location.hash=i}replaceState(n,r,i){g0()?this._history.replaceState(n,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return t.\u0275fac=function(n){return new(n||t)(E(It))},t.\u0275prov=G({token:t,factory:function(){return function R1(){return new f0(E(It))}()},providedIn:"platform"}),t})();function g0(){return!!window.history.pushState}function dh(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p0(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function rr(t){return t&&"?"!==t[0]?"?"+t:t}let ns=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:function(){return function F1(){const t=E(It).location;return new m0(E(co),t&&t.origin||"")}()},providedIn:"root"}),t})();const hh=new q("appBaseHref");let m0=(()=>{class t extends ns{constructor(n,r){if(super(),this._platformLocation=n,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return dh(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+rr(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,s){const o=this.prepareExternalUrl(i+rr(s));this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){const o=this.prepareExternalUrl(i+rr(s));this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return t.\u0275fac=function(n){return new(n||t)(E(co),E(hh,8))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})(),N1=(()=>{class t extends ns{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=dh(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,i,s){let o=this.prepareExternalUrl(i+rr(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(n,r,o)}replaceState(n,r,i,s){let o=this.prepareExternalUrl(i+rr(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}}return t.\u0275fac=function(n){return new(n||t)(E(co),E(hh,8))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})(),fh=(()=>{class t{constructor(n){this._subject=new ct,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._baseHref=p0(_0(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+rr(r))}normalize(n){return t.stripTrailingSlash(function L1(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,_0(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+rr(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+rr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r,complete:i})}}return t.normalizeQueryParams=rr,t.joinWithSlash=dh,t.stripTrailingSlash=p0,t.\u0275fac=function(n){return new(n||t)(E(ns))},t.\u0275prov=G({token:t,factory:function(){return function k1(){return new fh(E(ns))}()},providedIn:"root"}),t})();function _0(t){return t.replace(/\/index.html$/,"")}let go=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new MR,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){I0("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){I0("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(I(dn),I(tr))},t.\u0275dir=it({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class MR{constructor(){this.$implicit=null,this.ngIf=null}}function I0(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${ge(e)}'.`)}let ZR=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=dr({type:t}),t.\u0275inj=Hn({}),t})();const A0="browser";function R0(t){return t===A0}let tF=(()=>{class t{}return t.\u0275prov=G({token:t,providedIn:"root",factory:()=>new nF(E(It),window)}),t})();class nF{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function rF(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=F0(this.window.history)||F0(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function F0(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class bh extends class sF extends class T1{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function I1(t){_l||(_l=t)}(new bh)}onAndCancel(e,n,r){return e.addEventListener(n,r,!1),()=>{e.removeEventListener(n,r,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function oF(){return po=po||document.querySelector("base"),po?po.getAttribute("href"):null}();return null==n?null:function aF(t){bl=bl||document.createElement("a"),bl.setAttribute("href",t);const e=bl.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){po=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function vR(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[i,s]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let bl,po=null;const N0=new q("TRANSITION_ID"),uF=[{provide:ul,useFactory:function lF(t,e,n){return()=>{n.get(cl).donePromise.then(()=>{const r=wr(),i=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[N0,It,bt],multi:!0}];let dF=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})();const Il=new q("EventManagerPlugins");let Tl=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(i=>i.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,i){return this._findPluginFor(r).addEventListener(n,r,i)}addGlobalEventListener(n,r,i){return this._findPluginFor(r).addGlobalEventListener(n,r,i)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const o=i[s];if(o.supports(n))return this._eventNameToPlugin.set(n,o),o}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(E(Il),E(Re))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})();class k0{constructor(e){this._doc=e}addGlobalEventListener(e,n,r){const i=wr().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${n}`);return this.addEventListener(i,n,r)}}let L0=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})(),mo=(()=>{class t extends L0{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,i){n.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,i.push(r.appendChild(o))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(O0),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(n,i,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(O0))}}return t.\u0275fac=function(n){return new(n||t)(E(It))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})();function O0(t){wr().remove(t)}const Ih={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Th=/%COMP%/g;function Pl(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Pl(t,i,n):(i=i.replace(Th,t),n.push(i))}return n}function j0(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ph=(()=>{class t{constructor(n,r,i){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Ah(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case En.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new _F(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(n),i}case 1:case En.ShadowDom:return new yF(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const i=Pl(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(E(Tl),E(mo),E(ao))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})();class Ah{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?document.createElementNS(Ih[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){(H0(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(H0(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;const s=Ih[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const i=Ih[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(jt.DashCase|jt.Important)?e.style.setProperty(n,r,i&jt.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&jt.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,j0(r)):this.eventManager.addEventListener(e,n,j0(r))}}function H0(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class _F extends Ah{constructor(e,n,r,i){super(e),this.component=r;const s=Pl(i+"-"+r.id,r.styles,[]);n.addStyles(s),this.contentAttr=function gF(t){return"_ngcontent-%COMP%".replace(Th,t)}(i+"-"+r.id),this.hostAttr=function pF(t){return"_nghost-%COMP%".replace(Th,t)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class yF extends Ah{constructor(e,n,r,i){super(e),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Pl(i.id,i.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let vF=(()=>{class t extends k0{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i){return n.addEventListener(r,i,!1),()=>this.removeEventListener(n,r,i)}removeEventListener(n,r,i){return n.removeEventListener(r,i)}}return t.\u0275fac=function(n){return new(n||t)(E(It))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})();const $0=["alt","control","meta","shift"],DF={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},z0={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},wF={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let SF=(()=>{class t extends k0{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,i){const s=t.parseEventName(r),o=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>wr().onAndCancel(n,s.domEventName,o))}static parseEventName(n){const r=n.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=t._normalizeKey(r.pop());let o="";if($0.forEach(l=>{const u=r.indexOf(l);u>-1&&(r.splice(u,1),o+=l+".")}),o+=s,0!=r.length||0===s.length)return null;const a={};return a.domEventName=i,a.fullKey=o,a}static getEventFullKey(n){let r="",i=function MF(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&z0.hasOwnProperty(e)&&(e=z0[e]))}return DF[e]||e}(n);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),$0.forEach(s=>{s!=i&&wF[s](n)&&(r+=s+".")}),r+=i,r}static eventCallback(n,r,i){return s=>{t.getEventFullKey(s)===n&&i.runGuarded(()=>r(s))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return t.\u0275fac=function(n){return new(n||t)(E(It))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})();const G0=[{provide:dl,useValue:A0},{provide:Vv,useValue:function xF(){bh.makeCurrent()},multi:!0},{provide:It,useFactory:function bF(){return function MM(t){Bu=t}(document),document},deps:[]}],IF=Yv(x1,"browser",G0),q0=new q(""),W0=[{provide:hl,useClass:class cF{addToWindow(e){he.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},he.getAllAngularTestabilities=()=>e.getAllTestabilities(),he.getAllAngularRootElements=()=>e.getAllRootElements(),he.frameworkStabilizers||(he.frameworkStabilizers=[]),he.frameworkStabilizers.push(r=>{const i=he.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(function(l){l.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?wr().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:$v,useClass:nh,deps:[Re,rh,hl]},{provide:nh,useClass:nh,deps:[Re,rh,hl]}],Y0=[{provide:kc,useValue:"root"},{provide:Ti,useFactory:function EF(){return new Ti},deps:[]},{provide:Il,useClass:vF,multi:!0,deps:[It,Re,dl]},{provide:Il,useClass:SF,multi:!0,deps:[It]},{provide:Ph,useClass:Ph,deps:[Tl,mo,ao]},{provide:iv,useExisting:Ph},{provide:L0,useExisting:mo},{provide:mo,useClass:mo,deps:[It]},{provide:Tl,useClass:Tl,deps:[Il,Re]},{provide:class iF{},useClass:dF,deps:[]},[]];let TF=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:ao,useValue:n.appId},{provide:N0,useExisting:ao},uF]}}}return t.\u0275fac=function(n){return new(n||t)(E(q0,12))},t.\u0275mod=dr({type:t}),t.\u0275inj=Hn({providers:[...Y0,...W0],imports:[ZR,E1]}),t})(),X0=(()=>{class t{constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}}return t.\u0275fac=function(n){return new(n||t)(E(It))},t.\u0275prov=G({token:t,factory:function(n){let r=null;return r=n?new n:function AF(){return new X0(E(It))}(),r},providedIn:"root"}),t})();function L(...t){return ze(t,Ds(t))}typeof window<"u"&&window;class gn extends At{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:jF}=Array,{getPrototypeOf:UF,prototype:HF,keys:$F}=Object;const{isArray:qF}=Array;function Q0(t){return ie(e=>function WF(t,e){return qF(e)?t(...e):t(e)}(t,e))}function J0(...t){const e=Ds(t),n=function US(t){return J(vu(t))?t.pop():void 0}(t),{args:r,keys:i}=function zF(t){if(1===t.length){const e=t[0];if(jF(e))return{args:e,keys:null};if(function GF(t){return t&&"object"==typeof t&&UF(t)===HF}(e)){const n=$F(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}(t);if(0===r.length)return ze([],e);const s=new Ee(function XF(t,e,n=kr){return r=>{eC(e,()=>{const{length:i}=t,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)eC(e,()=>{const u=ze(t[l],e);let c=!1;u.subscribe(Ke(r,d=>{s[l]=d,c||(c=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>function YF(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}(i,o):kr));return n?s.pipe(Q0(n)):s}function eC(t,e,n){t?Vn(n,t,e):e()}function rs(t,e){const n=J(t)?t:()=>t,r=i=>i.error(n());return new Ee(e?i=>e.schedule(r,0,i):r)}const _o=Cs(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function yo(...t){return function KF(){return di(1)}()(ze(t,Ds(t)))}function Al(t){return new Ee(e=>{Mn(t()).subscribe(e)})}function Nh(){return He((t,e)=>{let n=null;t._refCount++;const r=Ke(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}class kh extends Ee{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,Zf(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Pt;const n=this.getSubject();e.add(this.source.subscribe(Ke(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Pt.EMPTY)}return e}refCount(){return Nh()(this)}}function pn(t,e){return He((n,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();n.subscribe(Ke(r,l=>{i?.unsubscribe();let u=0;const c=s++;Mn(t(l,c)).subscribe(i=Ke(r,d=>r.next(e?e(l,d,c,u++):d),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function QF(t,e,n,r,i){return(s,o)=>{let a=n,l=e,u=0;s.subscribe(Ke(o,c=>{const d=u++;l=a?t(l,c,d):(a=!0,c),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}function tC(t,e){return He(QF(t,e,arguments.length>=2,!0))}function Zt(t,e){return He((n,r)=>{let i=0;n.subscribe(Ke(r,s=>t.call(e,s,i++)&&r.next(s)))})}function Mr(t){return He((e,n)=>{let s,r=null,i=!1;r=e.subscribe(Ke(n,void 0,void 0,o=>{s=Mn(t(o,Mr(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function vo(t,e){return J(e)?$e(t,e,1):$e(t,1)}function Lh(t){return t<=0?()=>jn:He((e,n)=>{let r=[];e.subscribe(Ke(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(const i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function nC(t=JF){return He((e,n)=>{let r=!1;e.subscribe(Ke(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function JF(){return new _o}function Oh(t){return He((e,n)=>{let r=!1;e.subscribe(Ke(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Xr(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Zt((i,s)=>t(i,s,r)):kr,Rt(1),n?Oh(e):nC(()=>new _o))}function tt(t,e,n){const r=J(t)||e||n?{next:t,error:e,complete:n}:t;return r?He((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Ke(s,l=>{var u;null===(u=r.next)||void 0===u||u.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,l),s.error(l)},()=>{var l,u;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):kr}function rC(t){return ie(()=>t)}function Bh(t){return He((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}class sr{constructor(e,n){this.id=e,this.url=n}}class Vh extends sr{constructor(e,n,r="imperative",i=null){super(e,n),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Co extends sr{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class iC extends sr{constructor(e,n,r){super(e,n),this.reason=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class tN extends sr{constructor(e,n,r){super(e,n),this.error=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class nN extends sr{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rN extends sr{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iN extends sr{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class sN extends sr{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oN extends sr{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class aN{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class lN{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class uN{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cN{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dN{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hN{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sC{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Y="primary";class fN{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function is(t){return new fN(t)}const oC="ngNavigationCancelingError";function jh(t){const e=Error("NavigationCancelingError: "+t);return e[oC]=!0,e}function pN(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function kn(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!aC(t[i],e[i]))return!1;return!0}function aC(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}return t===e}function lC(t){return Array.prototype.concat.apply([],t)}function uC(t){return t.length>0?t[t.length-1]:null}function nt(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function mn(t){return A_(t)?t:Xa(t)?ze(Promise.resolve(t)):L(t)}const yN={exact:function hC(t,e,n){if(!Zr(t.segments,e.segments)||!Rl(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!hC(t.children[r],e.children[r],n))return!1;return!0},subset:fC},cC={exact:function vN(t,e){return kn(t,e)},subset:function CN(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>aC(t[n],e[n]))},ignored:()=>!0};function dC(t,e,n){return yN[n.paths](t.root,e.root,n.matrixParams)&&cC[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function fC(t,e,n){return gC(t,e,e.segments,n)}function gC(t,e,n,r){if(t.segments.length>n.length){const i=t.segments.slice(0,n.length);return!(!Zr(i,n)||e.hasChildren()||!Rl(i,n,r))}if(t.segments.length===n.length){if(!Zr(t.segments,n)||!Rl(t.segments,n,r))return!1;for(const i in e.children)if(!t.children[i]||!fC(t.children[i],e.children[i],r))return!1;return!0}{const i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!(Zr(t.segments,i)&&Rl(t.segments,i,r)&&t.children[Y])&&gC(t.children[Y],e,s,r)}}function Rl(t,e,n){return e.every((r,i)=>cC[n](t[i].parameters,r.parameters))}class Kr{constructor(e,n,r){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=is(this.queryParams)),this._queryParamMap}toString(){return SN.serialize(this)}}class Z{constructor(e,n){this.segments=e,this.children=n,this.parent=null,nt(n,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Fl(this)}}class Do{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=is(this.parameters)),this._parameterMap}toString(){return vC(this)}}function Zr(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}class pC{}class mC{parse(e){const n=new RN(e);return new Kr(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${wo(e.root,!0)}`,r=function EN(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(i=>`${Nl(n)}=${Nl(i)}`).join("&"):`${Nl(n)}=${Nl(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function MN(t){return encodeURI(t)}(e.fragment)}`:""}`}}const SN=new mC;function Fl(t){return t.segments.map(e=>vC(e)).join("/")}function wo(t,e){if(!t.hasChildren())return Fl(t);if(e){const n=t.children[Y]?wo(t.children[Y],!1):"",r=[];return nt(t.children,(i,s)=>{s!==Y&&r.push(`${s}:${wo(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function wN(t,e){let n=[];return nt(t.children,(r,i)=>{i===Y&&(n=n.concat(e(r,i)))}),nt(t.children,(r,i)=>{i!==Y&&(n=n.concat(e(r,i)))}),n}(t,(r,i)=>i===Y?[wo(t.children[Y],!1)]:[`${i}:${wo(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[Y]?`${Fl(t)}/${n[0]}`:`${Fl(t)}/(${n.join("//")})`}}function _C(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Nl(t){return _C(t).replace(/%3B/gi,";")}function Uh(t){return _C(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function kl(t){return decodeURIComponent(t)}function yC(t){return kl(t.replace(/\+/g,"%20"))}function vC(t){return`${Uh(t.path)}${function xN(t){return Object.keys(t).map(e=>`;${Uh(e)}=${Uh(t[e])}`).join("")}(t.parameters)}`}const bN=/^[^\/()?;=#]+/;function Ll(t){const e=t.match(bN);return e?e[0]:""}const IN=/^[^=?&#]+/,PN=/^[^&#]+/;class RN{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Z([],{}):new Z([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Y]=new Z(e,n)),r}parseSegment(){const e=Ll(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Do(kl(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=Ll(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const i=Ll(this.remaining);i&&(r=i,this.capture(r))}e[kl(n)]=kl(r)}parseQueryParam(e){const n=function TN(t){const e=t.match(IN);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=function AN(t){const e=t.match(PN);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=yC(n),s=yC(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ll(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Y);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[Y]:new Z([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class CC{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=Hh(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=Hh(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=$h(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return $h(e,this._root).map(n=>n.value)}}function Hh(t,e){if(t===e.value)return e;for(const n of e.children){const r=Hh(t,n);if(r)return r}return null}function $h(t,e){if(t===e.value)return[e];for(const n of e.children){const r=$h(t,n);if(r.length)return r.unshift(e),r}return[]}class or{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function ss(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class DC extends CC{constructor(e,n){super(e),this.snapshot=n,zh(this,e)}toString(){return this.snapshot.toString()}}function wC(t,e){const n=function FN(t,e){const o=new Ol([],{},{},"",{},Y,e,null,t.root,-1,{});return new MC("",new or(o,[]))}(t,e),r=new gn([new Do("",{})]),i=new gn({}),s=new gn({}),o=new gn({}),a=new gn(""),l=new Qr(r,i,o,a,s,Y,e,n.root);return l.snapshot=n.root,new DC(new or(l,[]),n)}class Qr{constructor(e,n,r,i,s,o,a,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this._futureSnapshot=l}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ie(e=>is(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ie(e=>is(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function SC(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const i=n[r],s=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function NN(t){return t.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Ol{constructor(e,n,r,i,s,o,a,l,u,c,d,h){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._urlSegment=u,this._lastPathIndex=c,this._correctedLastPathIndex=h??c,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=is(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=is(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class MC extends CC{constructor(e,n){super(n),this.url=e,zh(this,n)}toString(){return xC(this._root)}}function zh(t,e){e.value._routerState=t,e.children.forEach(n=>zh(t,n))}function xC(t){const e=t.children.length>0?` { ${t.children.map(xC).join(", ")} } `:"";return`${t.value}${e}`}function Gh(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,kn(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),kn(e.params,n.params)||t.params.next(n.params),function mN(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!kn(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),kn(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function qh(t,e){const n=kn(t.params,e.params)&&function DN(t,e){return Zr(t,e)&&t.every((n,r)=>kn(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||qh(t.parent,e.parent))}function So(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function LN(t,e,n){return e.children.map(r=>{for(const i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return So(t,r,i);return So(t,r)})}(t,e,n);return new or(r,i)}{if(t.shouldAttach(e.value)){const s=t.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>So(t,a)),o}}const r=function ON(t){return new Qr(new gn(t.url),new gn(t.params),new gn(t.queryParams),new gn(t.fragment),new gn(t.data),t.outlet,t.component,t)}(e.value),i=e.children.map(s=>So(t,s));return new or(r,i)}}function Bl(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Mo(t){return"object"==typeof t&&null!=t&&t.outlets}function Wh(t,e,n,r,i){let s={};if(r&&nt(r,(a,l)=>{s[l]=Array.isArray(a)?a.map(u=>`${u}`):`${a}`}),t===e)return new Kr(n,s,i);const o=EC(t,e,n);return new Kr(o,s,i)}function EC(t,e,n){const r={};return nt(t.children,(i,s)=>{r[s]=i===e?n:EC(i,e,n)}),new Z(t.segments,r)}class bC{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Bl(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Mo);if(i&&i!==uC(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Yh{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function IC(t,e,n){if(t||(t=new Z([],{})),0===t.segments.length&&t.hasChildren())return Vl(t,e,n);const r=function $N(t,e,n){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;const o=t.segments[i],a=n[r];if(Mo(a))break;const l=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===l)break;if(l&&u&&"object"==typeof u&&void 0===u.outlets){if(!PC(l,u,o))return s;r+=2}else{if(!PC(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const s=new Z(t.segments.slice(0,r.pathIndex),{});return s.children[Y]=new Z(t.segments.slice(r.pathIndex),t.children),Vl(s,0,i)}return r.match&&0===i.length?new Z(t.segments,{}):r.match&&!t.hasChildren()?Xh(t,e,n):r.match?Vl(t,0,i):Xh(t,e,n)}function Vl(t,e,n){if(0===n.length)return new Z(t.segments,{});{const r=function HN(t){return Mo(t[0])?t[0].outlets:{[Y]:t}}(n),i={};return nt(r,(s,o)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[o]=IC(t.children[o],e,s))}),nt(t.children,(s,o)=>{void 0===r[o]&&(i[o]=s)}),new Z(t.segments,i)}}function Xh(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const s=n[i];if(Mo(s)){const l=zN(s.outlets);return new Z(r,l)}if(0===i&&Bl(n[0])){r.push(new Do(t.segments[e].path,TC(n[0]))),i++;continue}const o=Mo(s)?s.outlets[Y]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Bl(a)?(r.push(new Do(o,TC(a))),i+=2):(r.push(new Do(o,{})),i++)}return new Z(r,{})}function zN(t){const e={};return nt(t,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(e[r]=Xh(new Z([],{}),0,n))}),e}function TC(t){const e={};return nt(t,(n,r)=>e[r]=`${n}`),e}function PC(t,e,n){return t==n.path&&kn(e,n.parameters)}class GN{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new xo,this.attachRef=null}}class xo{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){const r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){const n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new GN,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}}let Kh=(()=>{class t{constructor(n,r,i,s,o){this.parentContexts=n,this.location=r,this.changeDetector=s,this.environmentInjector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new ct,this.deactivateEvents=new ct,this.attachEvents=new ct,this.detachEvents=new ct,this.name=i||Y,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=n;const i=this.location,o=n._futureSnapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new qN(n,a,i.injector);if(r&&function WN(t){return!!t.resolveComponentFactory}(r)){const u=r.resolveComponentFactory(o);this.activated=i.createComponent(u,i.length,l)}else this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(n){return new(n||t)(I(xo),I(dn),As("name"),I(oh),I(zr))},t.\u0275dir=it({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),t})();class qN{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===Qr?this.route:e===xo?this.childContexts:this.parent.get(e,n)}}let AC=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=zn({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,r){1&n&&ut(0,"router-outlet")},dependencies:[Kh],encapsulation:2}),t})();function RC(t,e){return t.providers&&!t._injector&&(t._injector=sl(t.providers,e,`Route: ${t.path}`)),t._injector??e}function Qh(t){const e=t.children&&t.children.map(Qh),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Y&&(n.component=AC),n}function Qt(t){return t.outlet||Y}function FC(t,e){const n=t.filter(r=>Qt(r)===e);return n.push(...t.filter(r=>Qt(r)!==e)),n}function NC(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class QN{constructor(e,n,r,i){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Gh(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const i=ss(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),nt(i,(s,o)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ss(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=ss(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,n,r){const i=ss(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new hN(s.value.snapshot))}),e.children.length&&this.forwardEvent(new cN(e.value.snapshot))}activateRoutes(e,n,r){const i=e.value,s=n?n.value:null;if(Gh(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Gh(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=NC(i.snapshot),l=a?.get(no)??null;o.attachRef=null,o.route=i,o.resolver=l,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}function xr(t){return"function"==typeof t}function Jr(t){return t instanceof Kr}const Eo=Symbol("INITIAL_VALUE");function bo(){return pn(t=>J0(t.map(e=>e.pipe(Rt(1),function ZF(...t){const e=Ds(t);return He((n,r)=>{(e?yo(t,n,e):yo(t,n)).subscribe(r)})}(Eo)))).pipe(tC((e,n)=>{let r=!1;return n.reduce((i,s,o)=>i!==Eo?i:(s===Eo&&(r=!0),r||!1!==s&&o!==n.length-1&&!Jr(s)?i:s),e)},Eo),Zt(e=>e!==Eo),ie(e=>Jr(e)?e:!0===e),Rt(1)))}const kC={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function jl(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...kC}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const i=(e.matcher||pN)(n,t,e);if(!i)return{...kC};const s={};nt(i.posParams,(a,l)=>{s[l]=a.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Ul(t,e,n,r,i="corrected"){if(n.length>0&&function ok(t,e,n){return n.some(r=>Hl(t,e,r)&&Qt(r)!==Y)}(t,n,r)){const o=new Z(e,function sk(t,e,n,r){const i={};i[Y]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&Qt(s)!==Y){const o=new Z([],{});o._sourceSegment=t,o._segmentIndexShift=e.length,i[Qt(s)]=o}return i}(t,e,r,new Z(n,t.children)));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:[]}}if(0===n.length&&function ak(t,e,n){return n.some(r=>Hl(t,e,r))}(t,n,r)){const o=new Z(t.segments,function ik(t,e,n,r,i,s){const o={};for(const a of r)if(Hl(t,n,a)&&!i[Qt(a)]){const l=new Z([],{});l._sourceSegment=t,l._segmentIndexShift="legacy"===s?t.segments.length:e.length,o[Qt(a)]=l}return{...i,...o}}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const s=new Z(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function Hl(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function LC(t,e,n,r){return!!(Qt(t)===r||r!==Y&&Hl(e,n,t))&&("**"===t.path||jl(e,t,n).matched)}function OC(t,e,n){return 0===e.length&&!t.children[n]}class $l{constructor(e){this.segmentGroup=e||null}}class BC{constructor(e){this.urlTree=e}}function Io(t){return rs(new $l(t))}function VC(t){return rs(new BC(t))}class dk{constructor(e,n,r,i,s){this.injector=e,this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=Ul(this.urlTree.root,[],[],this.config).segmentGroup,n=new Z(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,n,Y).pipe(ie(s=>this.createUrlTree(Jh(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Mr(s=>{if(s instanceof BC)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof $l?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Y).pipe(ie(i=>this.createUrlTree(Jh(i),e.queryParams,e.fragment))).pipe(Mr(i=>{throw i instanceof $l?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,n,r){const i=e.segments.length>0?new Z([],{[Y]:e}):e;return new Kr(i,n,r)}expandSegmentGroup(e,n,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,n,r).pipe(ie(s=>new Z([],s))):this.expandSegment(e,r,n,r.segments,i,!0)}expandChildren(e,n,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return ze(i).pipe(vo(s=>{const o=r.children[s],a=FC(n,s);return this.expandSegmentGroup(e,a,o,s).pipe(ie(l=>({segment:l,outlet:s})))}),tC((s,o)=>(s[o.outlet]=o.segment,s),{}),function eN(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Zt((i,s)=>t(i,s,r)):kr,Lh(1),n?Oh(e):nC(()=>new _o))}())}expandSegment(e,n,r,i,s,o){return ze(r).pipe(vo(a=>this.expandSegmentAgainstRoute(e,n,r,a,i,s,o).pipe(Mr(u=>{if(u instanceof $l)return L(null);throw u}))),Xr(a=>!!a),Mr((a,l)=>{if(a instanceof _o||"EmptyError"===a.name)return OC(n,i,s)?L(new Z([],{})):Io(n);throw a}))}expandSegmentAgainstRoute(e,n,r,i,s,o,a){return LC(i,n,s,o)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,n,i,s,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o):Io(n):Io(n)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?VC(s):this.lineralizeSegments(r,s).pipe($e(o=>{const a=new Z(o,{});return this.expandSegment(e,a,n,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){const{matched:a,consumedSegments:l,remainingSegments:u,positionalParamSegments:c}=jl(n,i,s);if(!a)return Io(n);const d=this.applyRedirectCommands(l,i.redirectTo,c);return i.redirectTo.startsWith("/")?VC(d):this.lineralizeSegments(i,d).pipe($e(h=>this.expandSegment(e,n,r,h.concat(u),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){if("**"===r.path)return e=RC(r,e),r.loadChildren?(r._loadedRoutes?L({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe(ie(d=>(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,new Z(i,{})))):L(new Z(i,{}));const{matched:o,consumedSegments:a,remainingSegments:l}=jl(n,r,i);return o?(e=RC(r,e),this.getChildConfig(e,r,i).pipe($e(c=>{const d=c.injector??e,h=c.routes,{segmentGroup:f,slicedSegments:g}=Ul(n,a,l,h),p=new Z(f.segments,f.children);if(0===g.length&&p.hasChildren())return this.expandChildren(d,h,p).pipe(ie(y=>new Z(a,y)));if(0===h.length&&0===g.length)return L(new Z(a,{}));const m=Qt(r)===s;return this.expandSegment(d,p,h,g,m?Y:s,!0).pipe(ie(v=>new Z(a.concat(v.segments),v.children)))}))):Io(n)}getChildConfig(e,n,r){return n.children?L({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?L({routes:n._loadedRoutes,injector:n._loadedInjector}):this.runCanLoadGuards(e,n,r).pipe($e(i=>i?this.configLoader.loadChildren(e,n).pipe(tt(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function uk(t){return rs(jh(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`))}(n))):L({routes:[],injector:e})}runCanLoadGuards(e,n,r){const i=n.canLoad;return i&&0!==i.length?L(i.map(o=>{const a=e.get(o);let l;if(function ek(t){return t&&xr(t.canLoad)}(a))l=a.canLoad(n,r);else{if(!xr(a))throw new Error("Invalid CanLoad guard");l=a(n,r)}return mn(l)})).pipe(bo(),tt(o=>{if(!Jr(o))return;const a=jh(`Redirecting to "${this.urlSerializer.serialize(o)}"`);throw a.url=o,a}),ie(o=>!0===o)):L(!0)}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return L(r);if(i.numberOfChildren>1||!i.children[Y])return rs(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));i=i.children[Y]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreatreUrlTree(e,n,r,i){const s=this.createSegmentGroup(e,n.root,r,i);return new Kr(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return nt(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const a=i.substring(1);r[s]=n[a]}else r[s]=i}),r}createSegmentGroup(e,n,r,i){const s=this.createSegments(e,n.segments,r,i);let o={};return nt(n.children,(a,l)=>{o[l]=this.createSegmentGroup(e,a,r,i)}),new Z(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){const i=r[n.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${n.path}'.`);return i}findOrReturn(e,n){let r=0;for(const i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}}function Jh(t){const e={};for(const r of Object.keys(t.children)){const s=Jh(t.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function hk(t){if(1===t.numberOfChildren&&t.children[Y]){const e=t.children[Y];return new Z(t.segments.concat(e.segments),e.children)}return t}(new Z(t.segments,e))}class jC{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class zl{constructor(e,n){this.component=e,this.route=n}}function gk(t,e,n){const r=t._root;return To(r,e?e._root:null,n,[r.value])}function Gl(t,e,n){return(NC(e)??n).get(t)}function To(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=ss(e);return t.children.forEach(o=>{(function mk(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function _k(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Zr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Zr(t.url,e.url)||!kn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!qh(t,e)||!kn(t.queryParams,e.queryParams);default:return!qh(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new jC(r)):(s.data=o.data,s._resolvedData=o._resolvedData),To(t,e,s.component?a?a.children:null:n,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new zl(a.outlet.component,o))}else o&&Po(e,a,i),i.canActivateChecks.push(new jC(r)),To(t,null,s.component?a?a.children:null:n,r,i)})(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),nt(s,(o,a)=>Po(o,n.getContext(a),i)),i}function Po(t,e,n){const r=ss(t),i=t.value;nt(r,(s,o)=>{Po(s,i.component?e?e.children.getContext(o):null:e,n)}),n.canDeactivateChecks.push(new zl(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Ek{}function HC(t){return new Ee(e=>e.error(t))}class Ik{constructor(e,n,r,i,s,o){this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=o}recognize(){const e=Ul(this.urlTree.root,[],[],this.config.filter(o=>void 0===o.redirectTo),this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,e,Y);if(null===n)return null;const r=new Ol([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Y,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new or(r,n),s=new MC(this.url,i);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const n=e.value,r=SC(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(e,n):this.processSegment(e,n,n.segments,r)}processChildren(e,n){const r=[];for(const s of Object.keys(n.children)){const o=n.children[s],a=FC(e,s),l=this.processSegmentGroup(a,o,s);if(null===l)return null;r.push(...l)}const i=$C(r);return function Tk(t){t.sort((e,n)=>e.value.outlet===Y?-1:n.value.outlet===Y?1:e.value.outlet.localeCompare(n.value.outlet))}(i),i}processSegment(e,n,r,i){for(const s of e){const o=this.processSegmentAgainstRoute(s,n,r,i);if(null!==o)return o}return OC(n,r,i)?[]:null}processSegmentAgainstRoute(e,n,r,i){if(e.redirectTo||!LC(e,n,r,i))return null;let s,o=[],a=[];if("**"===e.path){const f=r.length>0?uC(r).parameters:{},g=GC(n)+r.length;s=new Ol(r,f,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,WC(e),Qt(e),e.component??e._loadedComponent??null,e,zC(n),g,YC(e),g)}else{const f=jl(n,e,r);if(!f.matched)return null;o=f.consumedSegments,a=f.remainingSegments;const g=GC(n)+o.length;s=new Ol(o,f.parameters,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,WC(e),Qt(e),e.component??e._loadedComponent??null,e,zC(n),g,YC(e),g)}const l=function Pk(t){return t.children?t.children:t.loadChildren?t._loadedRoutes:[]}(e),{segmentGroup:u,slicedSegments:c}=Ul(n,o,a,l.filter(f=>void 0===f.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const f=this.processChildren(l,u);return null===f?null:[new or(s,f)]}if(0===l.length&&0===c.length)return[new or(s,[])];const d=Qt(e)===i,h=this.processSegment(l,u,c,d?Y:i);return null===h?null:[new or(s,h)]}}function Ak(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function $C(t){const e=[],n=new Set;for(const r of t){if(!Ak(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),n.add(i)):e.push(r)}for(const r of n){const i=$C(r.children);e.push(new or(r.value,i))}return e.filter(r=>!n.has(r))}function zC(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function GC(t){let e=t,n=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift??0;return n-1}function WC(t){return t.data||{}}function YC(t){return t.resolve||{}}const ef=Symbol("RouteTitle");function XC(t){return"string"==typeof t.title||null===t.title}function tf(t){return pn(e=>{const n=t(e);return n?ze(n).pipe(ie(()=>e)):L(e)})}class jk extends class Vk{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}{}const nf=new q("ROUTES");let rf=(()=>{class t{constructor(n,r){this.injector=n,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(n){if(this.componentLoaders.get(n))return this.componentLoaders.get(n);if(n._loadedComponent)return L(n._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(n);const r=mn(n.loadComponent()).pipe(tt(s=>{this.onLoadEndListener&&this.onLoadEndListener(n),n._loadedComponent=s}),Bh(()=>{this.componentLoaders.delete(n)})),i=new kh(r,()=>new At).pipe(Nh());return this.componentLoaders.set(n,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return L({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(ie(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let l,u,c=!1;Array.isArray(a)?u=a:(l=a.create(n).injector,u=lC(l.get(nf,[],A.Self|A.Optional)));return{routes:u.map(Qh),injector:l}}),Bh(()=>{this.childrenLoaders.delete(r)})),o=new kh(s,()=>new At).pipe(Nh());return this.childrenLoaders.set(r,o),o}loadModuleFactoryOrRoutes(n){return mn(n()).pipe($e(r=>r instanceof nv||Array.isArray(r)?L(r):ze(this.compiler.compileModuleAsync(r))))}}return t.\u0275fac=function(n){return new(n||t)(E(bt),E(Qd))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})();class Hk{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}}function zk(t){throw t}function Gk(t,e,n){return e.parse("/")}const qk={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Wk={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Ht=(()=>{class t{constructor(n,r,i,s,o,a,l){this.rootComponentType=n,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=l,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new At,this.errorHandler=zk,this.malformedUriErrorHandler=Gk,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>L(void 0),this.urlHandlingStrategy=new Hk,this.routeReuseStrategy=new jk,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=o.get(rf),this.configLoader.onLoadEndListener=h=>this.triggerEvent(new lN(h)),this.configLoader.onLoadStartListener=h=>this.triggerEvent(new aN(h)),this.ngModule=o.get(vr),this.console=o.get(GA);const d=o.get(Re);this.isNgZoneEnabled=d instanceof Re&&Re.isInAngularZone(),this.resetConfig(l),this.currentUrlTree=function _N(){return new Kr(new Z([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=wC(this.currentUrlTree,this.rootComponentType),this.transitions=new gn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(n){const r=this.events;return n.pipe(Zt(i=>0!==i.id),ie(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),pn(i=>{let s=!1,o=!1;return L(i).pipe(tt(a=>{this.currentNavigation={id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),pn(a=>{const l=this.browserUrlTree.toString(),u=!this.navigated||a.extractedUrl.toString()!==l||l!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||u)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return ZC(a.source)&&(this.browserUrlTree=a.extractedUrl),L(a).pipe(pn(d=>{const h=this.transitions.getValue();return r.next(new Vh(d.id,this.serializeUrl(d.extractedUrl),d.source,d.restoredState)),h!==this.transitions.getValue()?jn:Promise.resolve(d)}),function fk(t,e,n,r){return pn(i=>function ck(t,e,n,r,i){return new dk(t,e,n,r,i).apply()}(t,e,n,i.extractedUrl,r).pipe(ie(s=>({...i,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),tt(d=>{this.currentNavigation={...this.currentNavigation,finalUrl:d.urlAfterRedirects}}),function Rk(t,e,n,r,i){return $e(s=>function bk(t,e,n,r,i="emptyOnly",s="legacy"){try{const o=new Ik(t,e,n,r,i,s).recognize();return null===o?HC(new Ek):L(o)}catch(o){return HC(o)}}(t,e,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe(ie(o=>({...s,targetSnapshot:o}))))}(this.rootComponentType,this.config,d=>this.serializeUrl(d),this.paramsInheritanceStrategy,this.relativeLinkResolution),tt(d=>{if("eager"===this.urlUpdateStrategy){if(!d.extras.skipLocationChange){const f=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl);this.setBrowserUrl(f,d)}this.browserUrlTree=d.urlAfterRedirects}const h=new nN(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);r.next(h)}));if(u&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:h,extractedUrl:f,source:g,restoredState:p,extras:m}=a,_=new Vh(h,this.serializeUrl(f),g,p);r.next(_);const v=wC(f,this.rootComponentType).snapshot;return L({...a,targetSnapshot:v,urlAfterRedirects:f,extras:{...m,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=a.rawUrl,a.resolve(null),jn}),tt(a=>{const l=new rN(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(l)}),ie(a=>({...a,guards:gk(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function yk(t,e){return $e(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?L({...n,guardsResult:!0}):function vk(t,e,n,r){return ze(t).pipe($e(i=>function xk(t,e,n,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?L(s.map(a=>{const l=Gl(a,e,i);let u;if(function rk(t){return t&&xr(t.canDeactivate)}(l))u=mn(l.canDeactivate(t,e,n,r));else{if(!xr(l))throw new Error("Invalid CanDeactivate guard");u=mn(l(t,e,n,r))}return u.pipe(Xr())})).pipe(bo()):L(!0)}(i.component,i.route,n,e,r)),Xr(i=>!0!==i,!0))}(o,r,i,t).pipe($e(a=>a&&function JN(t){return"boolean"==typeof t}(a)?function Ck(t,e,n,r){return ze(e).pipe(vo(i=>yo(function wk(t,e){return null!==t&&e&&e(new uN(t)),L(!0)}(i.route.parent,r),function Dk(t,e){return null!==t&&e&&e(new dN(t)),L(!0)}(i.route,r),function Mk(t,e,n){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function pk(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Al(()=>L(o.guards.map(l=>{const u=Gl(l,o.node,n);let c;if(function nk(t){return t&&xr(t.canActivateChild)}(u))c=mn(u.canActivateChild(r,t));else{if(!xr(u))throw new Error("Invalid CanActivateChild guard");c=mn(u(r,t))}return c.pipe(Xr())})).pipe(bo())));return L(s).pipe(bo())}(t,i.path,n),function Sk(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return L(!0);const i=r.map(s=>Al(()=>{const o=Gl(s,e,n);let a;if(function tk(t){return t&&xr(t.canActivate)}(o))a=mn(o.canActivate(e,t));else{if(!xr(o))throw new Error("Invalid CanActivate guard");a=mn(o(e,t))}return a.pipe(Xr())}));return L(i).pipe(bo())}(t,i.route,n))),Xr(i=>!0!==i,!0))}(r,s,t,e):L(a)),ie(a=>({...n,guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),tt(a=>{if(Jr(a.guardsResult)){const u=jh(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw u.url=a.guardsResult,u}const l=new iN(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(l)}),Zt(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),tf(a=>{if(a.guards.canActivateChecks.length)return L(a).pipe(tt(l=>{const u=new sN(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(u)}),pn(l=>{let u=!1;return L(l).pipe(function Fk(t,e){return $e(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return L(n);let s=0;return ze(i).pipe(vo(o=>function Nk(t,e,n,r){const i=t.routeConfig,s=t._resolve;return void 0!==i?.title&&!XC(i)&&(s[ef]=i.title),function kk(t,e,n,r){const i=function Lk(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}(t);if(0===i.length)return L({});const s={};return ze(i).pipe($e(o=>function Ok(t,e,n,r){const i=Gl(t,e,r);return mn(i.resolve?i.resolve(e,n):i(e,n))}(t[o],e,n,r).pipe(Xr(),tt(a=>{s[o]=a}))),Lh(1),rC(s),Mr(o=>o instanceof _o?jn:rs(o)))}(s,t,e,r).pipe(ie(o=>(t._resolvedData=o,t.data=SC(t,n).resolve,i&&XC(i)&&(t.data[ef]=i.title),null)))}(o.route,r,t,e)),tt(()=>s++),Lh(1),$e(o=>s===i.length?L(n):jn))})}(this.paramsInheritanceStrategy,this.ngModule.injector),tt({next:()=>u=!0,complete:()=>{u||(this.restoreHistory(l),this.cancelNavigationTransition(l,"At least one route resolver didn't emit any value."))}}))}),tt(l=>{const u=new oN(l.id,this.serializeUrl(l.extractedUrl),this.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);this.triggerEvent(u)}))}),tf(()=>this.afterPreactivation()),tf(a=>{const l=u=>{const c=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(u.routeConfig).pipe(tt(d=>{u.component=d}),ie(()=>{})));for(const d of u.children)c.push(...l(d));return c};return J0(l(a.targetSnapshot.root)).pipe(Oh(),Rt(1))}),ie(a=>{const l=function kN(t,e,n){const r=So(t,e._root,n?n._root:void 0);return new DC(r,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return{...a,targetRouterState:l}}),tt(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((t,e,n)=>ie(r=>(new QN(e,r.targetRouterState,r.currentRouterState,n).activate(t),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),tt({next(){s=!0},complete(){s=!0}}),Bh(()=>{s||o||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Mr(a=>{if(o=!0,function gN(t){return t&&t[oC]}(a)){const l=Jr(a.url);l||(this.navigated=!0,this.restoreHistory(i,!0));const u=new iC(i.id,this.serializeUrl(i.extractedUrl),a.message);if(r.next(u),l){const c=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),d={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ZC(i.source)};this.scheduleNavigation(c,"imperative",null,d,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const l=new tN(i.id,this.serializeUrl(i.extractedUrl),a);r.next(l);try{i.resolve(this.errorHandler(a))}catch(u){i.reject(u)}}return jn}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}setTransition(n){this.transitions.next({...this.transitions.value,...n})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r="popstate"===n.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},s=n.state?.navigationId?n.state:null;if(s){const a={...s};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(i.state=a)}const o=this.parseUrl(n.url);this.scheduleNavigation(o,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){this.config=n.map(Qh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,u=i||this.routerState.root,c=l?this.currentUrlTree.fragment:o;let d=null;switch(a){case"merge":d={...this.currentUrlTree.queryParams,...s};break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}return null!==d&&(d=this.removeEmptyProps(d)),function BN(t,e,n,r,i){if(0===n.length)return Wh(e.root,e.root,e.root,r,i);const s=function VN(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new bC(!0,0,t);let e=0,n=!1;const r=t.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return nt(s.outlets,(l,u)=>{a[u]="string"==typeof l?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?n=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new bC(n,e,r)}(n);return s.toRoot()?Wh(e.root,e.root,new Z([],{}),r,i):function o(l){const u=function jN(t,e,n,r){return t.isAbsolute?new Yh(e.root,!0,0):-1===r?new Yh(n,n===e.root,0):function UN(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Yh(r,!1,i-s)}(n,r+(Bl(t.commands[0])?0:1),t.numberOfDoubleDots)}(s,e,t.snapshot?._urlSegment,l),c=u.processChildren?Vl(u.segmentGroup,u.index,s.commands):IC(u.segmentGroup,u.index,s.commands);return Wh(e.root,u.segmentGroup,c,r,i)}(t.snapshot?._lastPathIndex)}(u,this.currentUrlTree,n,d,c??null)}navigateByUrl(n,r={skipLocationChange:!1}){const i=Jr(n)?n:this.parseUrl(n),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(n,r={skipLocationChange:!1}){return function Yk(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,n)}return r}isActive(n,r){let i;if(i=!0===r?{...qk}:!1===r?{...Wk}:r,Jr(n))return dC(this.currentUrlTree,n,i);const s=this.parseUrl(n);return dC(this.currentUrlTree,s,i)}removeEmptyProps(n){return Object.keys(n).reduce((r,i)=>{const s=n[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new Co(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,u;o?(a=o.resolve,l=o.reject,u=o.promise):u=new Promise((h,f)=>{a=h,l=f});const c=++this.navigationId;let d;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),d=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):d=0,this.setTransition({id:c,targetPageId:d,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:s,resolve:a,reject:l,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}setBrowserUrl(n,r){const i=this.urlSerializer.serialize(n),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,r){const i=new iC(n.id,this.serializeUrl(n.extractedUrl),r);this.triggerEvent(i),n.resolve(!1)}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return t.\u0275fac=function(n){zc()},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})();function ZC(t){return"imperative"!==t}let ql=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.commands=null,this.onChanges=new At,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(n){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==n?r.setAttribute(i,"tabindex",n):r.removeAttribute(i,"tabindex")}ngOnChanges(n){this.onChanges.next(this)}set routerLink(n){null!=n?(this.commands=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const n={skipLocationChange:ts(this.skipLocationChange),replaceUrl:ts(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,n),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ts(this.preserveFragment)})}}return t.\u0275fac=function(n){return new(n||t)(I(Ht),I(Qr),As("tabindex"),I(nl),I(Cr))},t.\u0275dir=it({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(n,r){1&n&&er("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[Gn]}),t})();class QC{buildTitle(e){let n,r=e.root;for(;void 0!==r;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(i=>i.outlet===Y);return n}getResolvedTitleForRoute(e){return e.data[ef]}}let Zk=(()=>{class t extends QC{constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}}return t.\u0275fac=function(n){return new(n||t)(E(X0))},t.\u0275prov=G({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class JC{}class eD{preload(e,n){return L(null)}}let tD=(()=>{class t{constructor(n,r,i,s,o){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(Zt(n=>n instanceof Co),vo(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=sl(s.providers,n,`Route: ${s.path}`));const o=s._injector??n,a=s._loadedInjector??o;s.loadChildren&&!s._loadedRoutes||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(o,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return ze(i).pipe(di())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(n,r):L(null);const s=i.pipe($e(o=>null===o?L(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??n,o.routes))));return r.loadComponent&&!r._loadedComponent?ze([s,this.loader.loadComponent(r)]).pipe(di()):s})}}return t.\u0275fac=function(n){return new(n||t)(E(Ht),E(Qd),E(zr),E(JC),E(rf))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})(),of=(()=>{class t{constructor(n,r,i={}){this.router=n,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof Vh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Co&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof sC&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.router.triggerEvent(new sC(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(n){zc()},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})();const ei=new q("ROUTER_CONFIGURATION"),nD=new q("ROUTER_FORROOT_GUARD"),Jk=[fh,{provide:pC,useClass:mC},{provide:Ht,useFactory:function iL(t,e,n,r,i,s,o={},a,l,u,c){const d=new Ht(null,t,e,n,r,i,lC(s));return u&&(d.urlHandlingStrategy=u),c&&(d.routeReuseStrategy=c),d.titleStrategy=l??a,function sL(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy),t.canceledNavigationResolution&&(e.canceledNavigationResolution=t.canceledNavigationResolution)}(o,d),d},deps:[pC,xo,fh,bt,Qd,nf,ei,Zk,[QC,new Xn],[class Uk{},new Xn],[class Bk{},new Xn]]},xo,{provide:Qr,useFactory:function oL(t){return t.routerState.root},deps:[Ht]},tD,eD,class Qk{preload(e,n){return n().pipe(Mr(()=>L(null)))}},{provide:ei,useValue:{enableTracing:!1}},rf];function eL(){return new qv("Router",Ht)}let rD=(()=>{class t{constructor(n,r){}static forRoot(n,r){return{ngModule:t,providers:[Jk,iD(n),{provide:nD,useFactory:rL,deps:[[Ht,new Xn,new Bs]]},{provide:ei,useValue:r||{}},{provide:ns,useFactory:nL,deps:[co,[new Ta(hh),new Xn],ei]},{provide:of,useFactory:tL,deps:[Ht,tF,ei]},{provide:JC,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:eD},{provide:qv,multi:!0,useFactory:eL},[af,{provide:ul,multi:!0,useFactory:aL,deps:[af]},{provide:sD,useFactory:lL,deps:[af]},{provide:jv,multi:!0,useExisting:sD}]]}}static forChild(n){return{ngModule:t,providers:[iD(n)]}}}return t.\u0275fac=function(n){return new(n||t)(E(nD,8),E(Ht,8))},t.\u0275mod=dr({type:t}),t.\u0275inj=Hn({}),t})();function tL(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new of(t,e,n)}function nL(t,e,n={}){return n.useHash?new N1(t,e):new m0(t,e)}function rL(t){return"guarded"}function iD(t){return[{provide:lx,multi:!0,useValue:t},{provide:nf,multi:!0,useValue:t}]}let af=(()=>{class t{constructor(n){this.injector=n,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new At}appInitializer(){return this.injector.get(A1,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(a=>r=a),s=this.injector.get(Ht),o=this.injector.get(ei);return"disabled"===o.initialNavigation?(s.setUpLocationChangeListener(),r(!0)):"enabledBlocking"===o.initialNavigation?(s.afterPreactivation=()=>this.initNavigation?L(void 0):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),s.initialNavigation()):r(!0),i})}bootstrapListener(n){const r=this.injector.get(ei),i=this.injector.get(tD),s=this.injector.get(of),o=this.injector.get(Ht),a=this.injector.get(lo);n===a.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&o.initialNavigation(),i.setUpPreloading(),s.init(),o.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(void 0),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(n){return new(n||t)(E(bt))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})();function aL(t){return t.appInitializer.bind(t)}function lL(t){return t.bootstrapListener.bind(t)}const sD=new q("Router Initializer");function cL(t,e){1&t&&(Qe(0,"div",3),ut(1,"img",4),yt())}function dL(t,e){1&t&&(Qe(0,"div",5),ut(1,"img",6),yt())}const hL=function(){return["/greetings"]},fL=function(){return{greetedby:"intro"}};function gL(t,e){1&t&&(Qe(0,"div",7),ut(1,"img",8),Qe(2,"audio",9),ut(3,"source",10),yr(4," This content is displayed by browsers that don't recognize the audio element "),yt(),Qe(5,"video",11),ut(6,"source",12),yr(7," Your browser does not support the video tag. "),yt()()),2&t&&(et("routerLink",kd(4,hL))("queryParams",kd(5,fL)),_t(2),et("autoplay",!0),_t(3),et("muted",!0))}let pL=(()=>{class t{constructor(){this.portCafe=!0,this.projectAkari=!1,this.loginPage=!1}ngAfterViewInit(){this._initLogos()}ngOnInit(){navigator.serviceWorker.addEventListener("controllerchange",()=>{console.log("controller changed")})}_initLogos(){const n=[new lf("portCafeLogo",r=>this.portCafe=r),new lf("projectAkariLogo",r=>this.projectAkari=r),new lf("loginPage",r=>this.loginPage=r)];for(let r=0;r<n.length;r++){const i=n[r];r<n.length-1&&setTimeout(()=>{this._fadeOut(i.name,()=>{i.hideLogo(),n[r+1].showLogo()})},0==r?2500:6500*r)}}_fadeOut(n,r){var i=document.getElementById(n);i.classList.remove("fade-in"),i.classList.add("fade-out"),setTimeout(r,2e3)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=zn({type:t,selectors:[["app-landing-page"]],decls:3,vars:3,consts:[["id","portCafeLogo","class","center-content max-height fade-in",4,"ngIf"],["id","projectAkariLogo","class","center-content max-height fade-in",4,"ngIf"],["id","loginPage","class","max-height fade-in",3,"routerLink","queryParams",4,"ngIf"],["id","portCafeLogo",1,"center-content","max-height","fade-in"],["src","assets/logo/port_cafe.png","alt","",1,"port-cafe-logo"],["id","projectAkariLogo",1,"center-content","max-height","fade-in"],["src","assets/logo/project_akari.png","alt","",1,"project-akari-logo"],["id","loginPage",1,"max-height","fade-in",3,"routerLink","queryParams"],["src","assets/logo/project_akari.png","alt","",1,"project-akari-img"],["loop","",3,"autoplay"],["src","assets/sound/bgm/LoginBGM.mp3","type","audio/mpeg"],["autoplay","","playsinline","","loop","",1,"login-video",3,"muted"],["src","assets/videos/login_video.mp4","type","video/mp4"]],template:function(n,r){1&n&&(Jn(0,cL,2,0,"div",0),Jn(1,dL,2,0,"div",1),Jn(2,gL,8,6,"div",2)),2&n&&(et("ngIf",r.portCafe),_t(1),et("ngIf",r.projectAkari),_t(1),et("ngIf",r.loginPage))},dependencies:[go,ql],styles:["[_nghost-%COMP%]{height:100vh}.port-cafe-logo[_ngcontent-%COMP%]{height:35%;width:25%}.project-akari-logo[_ngcontent-%COMP%]{height:20%;width:35%}.project-akari-img[_ngcontent-%COMP%]{position:fixed;bottom:15%;left:30%;z-index:2;height:20%;width:35%}.login-video[_ngcontent-%COMP%]{width:100%;height:99.5%;object-fit:fill}.fade-in[_ngcontent-%COMP%]{animation:fadeIn 2s}.fade-out[_ngcontent-%COMP%]{animation:fadeOut 2s}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeOut{0%{opacity:1}to{opacity:0}}"]}),t})();class lf{constructor(e,n){this._name=e,this._logoVisiblity=n}get name(){return this._name}showLogo(){this._logoVisiblity(!0)}hideLogo(){this._logoVisiblity(!1)}}let z=(()=>{class t{constructor(n=0){n<1?(this._ptr=[],this._capacity=0,this._size=0):(this._ptr=new Array(n),this._capacity=n,this._size=0)}at(n){return this._ptr[n]}set(n,r){this._ptr[n]=r}get(n=0){const r=new Array;for(let i=n;i<this._size;i++)r.push(this._ptr[i]);return r}pushBack(n){this._size>=this._capacity&&this.prepareCapacity(0==this._capacity?t.s_defaultSize:2*this._capacity),this._ptr[this._size++]=n}clear(){this._ptr.length=0,this._size=0}getSize(){return this._size}assign(n,r){this._size<n&&this.prepareCapacity(n);for(let s=0;s<n;s++)this._ptr[s]=r;this._size=n}resize(n,r=null){this.updateSize(n,r,!0)}updateSize(n,r=null,i=!0){if(this._size<n)if(this.prepareCapacity(n),i)for(let o=this._size;o<n;o++)this._ptr[o]="function"==typeof r?JSON.parse(JSON.stringify(new r)):r;else for(let o=this._size;o<n;o++)this._ptr[o]=r;else{const o=this._size-n;this._ptr.splice(this._size-o,o)}this._size=n}insert(n,r,i){let s=n._index;const o=r._index,a=i._index,l=a-o;this.prepareCapacity(this._size+l);const u=this._size-s;if(u>0)for(let c=0;c<u;c++)this._ptr.splice(s+c,0,null);for(let c=o;c<a;c++,s++)this._ptr[s]=r._vector._ptr[c];this._size=this._size+l}remove(n){return!(n<0||this._size<=n||(this._ptr.splice(n,1),--this._size,0))}erase(n){const r=n._index;return r<0||this._size<=r?n:(this._ptr.splice(r,1),--this._size,new ti(this,r))}prepareCapacity(n){n>this._capacity&&(0==this._capacity?(this._ptr=new Array(n),this._capacity=n):(this._ptr.length=n,this._capacity=n))}begin(){return 0==this._size?this.end():new ti(this,0)}end(){return new ti(this,this._size)}getOffset(n){const r=new t;return r._ptr=this.get(n),r._size=this.get(n).length,r._capacity=this.get(n).length,r}}return t.s_defaultSize=10,t})();class ti{constructor(e,n){this._vector=e??null,this._index=n??0}set(e){return this._index=e._index,this._vector=e._vector,this}preIncrement(){return++this._index,this}preDecrement(){return--this._index,this}increment(){return new ti(this._vector,this._index++)}decrement(){return new ti(this._vector,this._index--)}ptr(){return this._vector._ptr[this._index]}substitution(e){return this._index=e._index,this._vector=e._vector,this}notEqual(e){return this._index!=e._index||this._vector!=e._vector}}var oD,t,aD,lD,cD,dD;(t=oD||(oD={})).csmVector=z,t.iterator=ti;class Jt{constructor(e){this.s=e}append(e,n){return this.s+=void 0!==n?e.substr(0,n):e,this}expansion(e,n){for(let r=0;r<e;r++)this.append(n);return this}getBytes(){return encodeURIComponent(this.s).replace(/%../g,"x").length}getLength(){return this.s.length}isLess(e){return this.s<e.s}isGreat(e){return this.s>e.s}isEqual(e){return this.s==e}isEmpty(){return 0==this.s.length}}!function(t){t.csmString=Jt}(aD||(aD={}));class Ao{constructor(e){this._id="string"!=typeof e?e:new Jt(e)}getString(){return this._id}isEqual(e){return"string"==typeof e?this._id.isEqual(e):e instanceof Jt?this._id.isEqual(e.s):e instanceof Ao&&this._id.isEqual(e._id.s)}isNotEqual(e){return"string"==typeof e?!this._id.isEqual(e):e instanceof Jt?!this._id.isEqual(e.s):e instanceof Ao&&!this._id.isEqual(e._id.s)}}!function(t){t.CubismId=Ao}(lD||(lD={}));class uD{constructor(){this._ids=new z}release(){for(let e=0;e<this._ids.getSize();++e)this._ids.set(e,void 0);this._ids=null}registerIds(e){for(let n=0;n<e.length;n++)this.registerId(e[n])}registerId(e){let n=null;return"string"!=typeof e?this.registerId(e.s):(null!=(n=this.findId(e))||(n=new Ao(e),this._ids.pushBack(n)),n)}getId(e){return this.registerId(e)}isExist(e){return"string"==typeof e?null!=this.findId(e):this.isExist(e.s)}findId(e){for(let n=0;n<this._ids.getSize();++n)if(this._ids.at(n).getString().isEqual(e))return this._ids.at(n);return null}}!function(t){t.CubismIdManager=uD}(cD||(cD={}));class Ne{constructor(){this._tr=new Float32Array(16),this.loadIdentity()}static multiply(e,n,r){const i=new Float32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);for(let o=0;o<4;++o)for(let a=0;a<4;++a)for(let l=0;l<4;++l)i[a+4*o]+=e[l+4*o]*n[a+4*l];for(let o=0;o<16;++o)r[o]=i[o]}loadIdentity(){const e=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);this.setMatrix(e)}setMatrix(e){for(let n=0;n<16;++n)this._tr[n]=e[n]}getArray(){return this._tr}getScaleX(){return this._tr[0]}getScaleY(){return this._tr[5]}getTranslateX(){return this._tr[12]}getTranslateY(){return this._tr[13]}transformX(e){return this._tr[0]*e+this._tr[12]}transformY(e){return this._tr[5]*e+this._tr[13]}invertTransformX(e){return(e-this._tr[12])/this._tr[0]}invertTransformY(e){return(e-this._tr[13])/this._tr[5]}translateRelative(e,n){const r=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,e,n,0,1]);Ne.multiply(r,this._tr,this._tr)}translate(e,n){this._tr[12]=e,this._tr[13]=n}translateX(e){this._tr[12]=e}translateY(e){this._tr[13]=e}scaleRelative(e,n){const r=new Float32Array([e,0,0,0,0,n,0,0,0,0,1,0,0,0,0,1]);Ne.multiply(r,this._tr,this._tr)}scale(e,n){this._tr[0]=e,this._tr[5]=n}multiplyByMatrix(e){Ne.multiply(e.getArray(),this._tr,this._tr)}clone(){const e=new Ne;for(let n=0;n<this._tr.length;n++)e._tr[n]=this._tr[n];return e}}!function(t){t.CubismMatrix44=Ne}(dD||(dD={}));class Wl{constructor(){this._isCulling=!1,this._isPremultipliedAlpha=!1,this._anisortopy=0,this._model=null,this._modelColor=new os,this._mvpMatrix4x4=new Ne,this._mvpMatrix4x4.loadIdentity()}static create(){return null}static delete(e){}initialize(e){this._model=e}drawModel(){null!=this.getModel()&&this.doDrawModel()}setMvpMatrix(e){this._mvpMatrix4x4.setMatrix(e.getArray())}getMvpMatrix(){return this._mvpMatrix4x4}setModelColor(e,n,r,i){e<0?e=0:e>1&&(e=1),n<0?n=0:n>1&&(n=1),r<0?r=0:r>1&&(r=1),i<0?i=0:i>1&&(i=1),this._modelColor.R=e,this._modelColor.G=n,this._modelColor.B=r,this._modelColor.A=i}getModelColor(){return JSON.parse(JSON.stringify(this._modelColor))}setIsPremultipliedAlpha(e){this._isPremultipliedAlpha=e}isPremultipliedAlpha(){return this._isPremultipliedAlpha}setIsCulling(e){this._isCulling=e}isCulling(){return this._isCulling}setAnisotropy(e){this._anisortopy=e}getAnisotropy(){return this._anisortopy}getModel(){return this._model}}var hD,_n=(()=>(function(t){t[t.CubismBlendMode_Normal=0]="CubismBlendMode_Normal",t[t.CubismBlendMode_Additive=1]="CubismBlendMode_Additive",t[t.CubismBlendMode_Multiplicative=2]="CubismBlendMode_Multiplicative"}(_n||(_n={})),_n))();class os{constructor(){this.R=1,this.G=1,this.B=1,this.A=1}}!function(t){t.CubismBlendMode=_n,t.CubismRenderer=Wl,t.CubismTextureColor=os}(hD||(hD={}));const Dt=(t,e,n)=>{((t,e,n)=>{gD.print(t,"[CSM]"+e,n)})(t,e+"\n",n)},Ln=t=>{console.assert(t)};let DL,as,yn,ar,en;DL=(t,...e)=>{Dt(je.LogLevel_Verbose,"[V]"+t,e)},as=(t,...e)=>{Dt(je.LogLevel_Debug,"[D]"+t,e)},yn=(t,...e)=>{Dt(je.LogLevel_Info,"[I]"+t,e)},ar=(t,...e)=>{Dt(je.LogLevel_Warning,"[W]"+t,e)},en=(t,...e)=>{Dt(je.LogLevel_Error,"[E]"+t,e)};class gD{static print(e,n,r){if(e<le.getLoggingLevel())return;const i=le.coreLogFunction;i&&i(n.replace(/\{(\d+)\}/g,(o,a)=>r[a]))}static dumpBytes(e,n,r){for(let i=0;i<r;i++)i%16==0&&i>0?this.print(e,"\n"):i%8==0&&i>0&&this.print(e,"  "),this.print(e,"{0} ",[255&n[i]]);this.print(e,"\n")}constructor(){}}var pD;!function(t){t.CubismDebug=gD}(pD||(pD={}));class mD{constructor(e,n){this.first=e??null,this.second=n??null}}let vn=(()=>{class t{constructor(n){null!=n?n<1?(this._keyValues=[],this._dummyValue=null,this._size=0):(this._keyValues=new Array(n),this._size=n):(this._keyValues=[],this._dummyValue=null,this._size=0)}release(){this.clear()}appendKey(n){this.prepareCapacity(this._size+1,!1),this._keyValues[this._size]=new mD(n),this._size+=1}getValue(n){let r=-1;for(let i=0;i<this._size;i++)if(this._keyValues[i].first==n){r=i;break}return r>=0?this._keyValues[r].second:(this.appendKey(n),this._keyValues[this._size-1].second)}setValue(n,r){let i=-1;for(let s=0;s<this._size;s++)if(this._keyValues[s].first==n){i=s;break}i>=0?this._keyValues[i].second=r:(this.appendKey(n),this._keyValues[this._size-1].second=r)}isExist(n){for(let r=0;r<this._size;r++)if(this._keyValues[r].first==n)return!0;return!1}clear(){this._keyValues=void 0,this._keyValues=null,this._keyValues=[],this._size=0}getSize(){return this._size}prepareCapacity(n,r){n>this._keyValues.length&&(0==this._keyValues.length?(!r&&n<t.DefaultSize&&(n=t.DefaultSize),this._keyValues.length=n):(!r&&n<2*this._keyValues.length&&(n=2*this._keyValues.length),this._keyValues.length=n))}begin(){return new ni(this,0)}end(){return new ni(this,this._size)}erase(n){const r=n._index;return r<0||this._size<=r?n:(this._keyValues.splice(r,1),--this._size,new ni(this,r))}dumpAsInt(){for(let n=0;n<this._size;n++)as("{0} ,",this._keyValues[n]),as("\n")}}return t.DefaultSize=10,t})();class ni{constructor(e,n){this._map=e??new vn,this._index=n??0}set(e){return this._index=e._index,this._map=e._map,this}preIncrement(){return++this._index,this}preDecrement(){return--this._index,this}increment(){return new ni(this._map,this._index++)}decrement(){const e=new ni(this._map,this._index);return this._map=e._map,this._index=e._index,this}ptr(){return this._map._keyValues[this._index]}notEqual(e){return this._index!=e._index||this._map!=e._map}}var _D;!function(t){t.csmMap=vn,t.csmPair=mD,t.iterator=ni}(_D||(_D={}));const Yl="Error: type mismatch";class Ce{constructor(){}getRawString(e,n){return this.getString(e,n)}toInt(e=0){return e}toFloat(e=0){return e}toBoolean(e=!1){return e}getSize(){return 0}getArray(e=null){return e}getVector(e=new z){return e}getMap(e){return e}getValueByIndex(e){return Ce.errorValue.setErrorNotForClientCall(Yl)}getValueByString(e){return Ce.nullValue.setErrorNotForClientCall(Yl)}getKeys(){return Ce.s_dummyKeys}isError(){return!1}isNull(){return!1}isBool(){return!1}isFloat(){return!1}isString(){return!1}isArray(){return!1}isMap(){return!1}equals(e){return!1}isStatic(){return!1}setErrorNotForClientCall(e){return Fo.errorValue}static staticInitializeNotForClientCall(){lr.trueValue=new lr(!0),lr.falseValue=new lr(!1),Ce.errorValue=new Fo("ERROR",!0),Ce.nullValue=new uf,Ce.s_dummyKeys=new z}static staticReleaseNotForClientCall(){lr.trueValue=null,lr.falseValue=null,Ce.errorValue=null,Ce.nullValue=null,Ce.s_dummyKeys=null}}class dt{constructor(e,n){this._error=null,this._lineCount=0,this._root=null,null!=e&&this.parseBytes(e,n)}static create(e,n){const r=new dt;return r.parseBytes(e,n)?r:(dt.delete(r),null)}static delete(e){}getRoot(){return this._root}arrayBufferToString(e){const n=new Uint8Array(e);let r="";for(let i=0,s=n.length;i<s;++i)r+="%"+this.pad(n[i].toString(16));return r=decodeURIComponent(r),r}pad(e){return e.length<2?"0"+e:e}parseBytes(e,n){const r=new Array(1),i=this.arrayBufferToString(e);if(this._root=this.parseValue(i,n,0,r),this._error){let s="\0";return s="Json parse error : @line "+(this._lineCount+1)+"\n",this._root=new Xl(s),yn("{0}",this._root.getRawString()),!1}return null!=this._root||(this._root=new Fo(new Jt(this._error),!1),!1)}getParseError(){return this._error}checkEndOfFile(){return this._root.getArray()[1].equals("EOF")}parseValue(e,n,r,i){if(this._error)return null;let a,s=null,o=r;for(;o<n;o++)switch(e[o]){case"-":case".":case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":{const u=new Array(1);return a=SL(e.slice(o),u),i[0]=e.indexOf(u[0]),new yD(a)}case'"':return new Xl(this.parseString(e,n,o+1,i));case"[":return s=this.parseArray(e,n,o+1,i),s;case"{":return s=this.parseObject(e,n,o+1,i),s;case"n":return o+3<n?(s=new uf,i[0]=o+4):this._error="parse null",s;case"t":return o+3<n?(s=lr.trueValue,i[0]=o+4):this._error="parse true",s;case"f":return o+4<n?(s=lr.falseValue,i[0]=o+5):this._error="illegal ',' position",s;case",":return this._error="illegal ',' position",null;case"]":return i[0]=o,null;case"\n":this._lineCount++}return this._error="illegal end of value",null}parseString(e,n,r,i){if(this._error)return null;let o,a,s=r;const l=new Jt("");let u=r;for(;s<n;s++)switch(o=e[s],o){case'"':return i[0]=s+1,l.append(e.slice(u),s-u),l.s;case"//":if(s++,s-1>u&&l.append(e.slice(u),s-u),u=s+1,s<n)switch(a=e[s],a){case"\\":l.expansion(1,"\\");break;case'"':l.expansion(1,'"');break;case"/":l.expansion(1,"/");break;case"b":l.expansion(1,"\b");break;case"f":l.expansion(1,"\f");break;case"n":l.expansion(1,"\n");break;case"r":l.expansion(1,"\r");break;case"t":l.expansion(1,"\t");break;case"u":this._error="parse string/unicord escape not supported"}else this._error="parse string/escape error"}return this._error="parse string/illegal end",null}parseObject(e,n,r,i){if(this._error)return null;const s=new CD;let o="",a=r,l="";const u=Array(1);let c=!1;for(;a<n;a++){e:for(;a<n;a++)switch(l=e[a],l){case'"':if(o=this.parseString(e,n,a+1,u),this._error)return null;a=u[0],c=!0;break e;case"}":return i[0]=a+1,s;case":":this._error="illegal ':' position";break;case"\n":this._lineCount++}if(!c)return this._error="key not found",null;c=!1;e:for(;a<n;a++)switch(l=e[a],l){case":":c=!0,a++;break e;case"}":this._error="illegal '}' position";break;case"\n":this._lineCount++}if(!c)return this._error="':' not found",null;const d=this.parseValue(e,n,a,u);if(this._error)return null;a=u[0],s.put(o,d);e:for(;a<n;a++)switch(l=e[a],l){case",":break e;case"}":return i[0]=a+1,s;case"\n":this._lineCount++}}return this._error="illegal end of perseObject",null}parseArray(e,n,r,i){if(this._error)return null;let a,s=new vD,o=r;const l=new Array(1);for(;o<n;o++){const u=this.parseValue(e,n,o,l);if(this._error)return null;o=l[0],u&&s.add(u);e:for(;o<n;o++)switch(a=e[o],a){case",":break e;case"]":return i[0]=o+1,s;case"\n":++this._lineCount}}return s=void 0,this._error="illegal end of parseObject",null}}class yD extends Ce{constructor(e){super(),this._value=e}isFloat(){return!0}getString(e,n){return this._value=parseFloat("\0"),this._stringBuffer="\0",this._stringBuffer}toInt(e=0){return parseInt(this._value.toString())}toFloat(e=0){return this._value}equals(e){return"number"==typeof e&&!Math.round(e)&&e==this._value}}class lr extends Ce{constructor(e){super(),this._boolValue=e}isBool(){return!0}toBoolean(e=!1){return this._boolValue}getString(e,n){return this._stringBuffer=this._boolValue?"true":"false",this._stringBuffer}equals(e){return"boolean"==typeof e&&e==this._boolValue}isStatic(){return!0}}class Xl extends Ce{constructor(e){super(),"string"==typeof e&&(this._stringBuffer=e),e instanceof Jt&&(this._stringBuffer=e.s)}isString(){return!0}getString(e,n){return this._stringBuffer}equals(e){return"string"==typeof e?this._stringBuffer==e:e instanceof Jt&&this._stringBuffer==e.s}}class Fo extends Xl{constructor(e,n){super(e),this._isStatic=n}isStatic(){return this._isStatic}setErrorNotForClientCall(e){return this._stringBuffer=e,this}isError(){return!0}}class uf extends Ce{isNull(){return!0}getString(e,n){return this._stringBuffer}isStatic(){return!0}setErrorNotForClientCall(e){return this._stringBuffer=e,Fo.nullValue}constructor(){super(),this._stringBuffer="NullValue"}}class vD extends Ce{constructor(){super(),this._array=new z}release(){for(let e=this._array.begin();e.notEqual(this._array.end());e.preIncrement()){let n=e.ptr();n&&!n.isStatic()&&(n=void 0,n=null)}}isArray(){return!0}getValueByIndex(e){return e<0||this._array.getSize()<=e?Ce.errorValue.setErrorNotForClientCall("Error: index out of bounds"):this._array.at(e)??Ce.nullValue}getValueByString(e){return Ce.errorValue.setErrorNotForClientCall(Yl)}getString(e,n){const r=n+"[\n";for(let i=this._array.begin();i.notEqual(this._array.end());i.increment()){const s=i.ptr();this._stringBuffer+=n+""+s.getString(n+" ")+"\n"}return this._stringBuffer=r+n+"]\n",this._stringBuffer}add(e){this._array.pushBack(e)}getVector(e=null){return this._array}getSize(){return this._array.getSize()}}class CD extends Ce{constructor(){super(),this._map=new vn}release(){const e=this._map.begin();for(;e.notEqual(this._map.end());){let n=e.ptr().second;n&&!n.isStatic()&&(n=void 0,n=null),e.preIncrement()}}isMap(){return!0}getValueByString(e){if(e instanceof Jt)return this._map.getValue(e.s)??Ce.nullValue;for(let n=this._map.begin();n.notEqual(this._map.end());n.preIncrement())if(n.ptr().first==e)return null==n.ptr().second?Ce.nullValue:n.ptr().second;return Ce.nullValue}getValueByIndex(e){return Ce.errorValue.setErrorNotForClientCall(Yl)}getString(e,n){this._stringBuffer=n+"{\n";const r=this._map.begin();for(;r.notEqual(this._map.end());){const i=r.ptr().first,s=r.ptr().second;this._stringBuffer+=n+" "+i+" : "+s.getString(n+"   ")+" \n",r.preIncrement()}return this._stringBuffer+=n+"}\n",this._stringBuffer}getMap(e){return this._map}put(e,n){this._map.setValue(e,n)}getKeys(){if(!this._keys){this._keys=new z;const e=this._map.begin();for(;e.notEqual(this._map.end());){const n=e.ptr().first;this._keys.pushBack(n),e.preIncrement()}}return this._keys}getSize(){return this._keys.getSize()}}var DD;function SL(t,e){let n=0;for(let i=1;;i++){const s=t.slice(i-1,i);if("e"==s||"-"==s||"E"==s)continue;const o=t.substring(0,i),a=Number(o);if(isNaN(a))break;n=i}let r=parseFloat(t);return isNaN(r)&&(r=NaN),e[0]=t.slice(n),r}!function(t){t.CubismJson=dt,t.JsonArray=vD,t.JsonBoolean=lr,t.JsonError=Fo,t.JsonFloat=yD,t.JsonMap=CD,t.JsonNullvalue=uf,t.JsonString=Xl,t.Value=Ce}(DD||(DD={}));let Cn=!1,ls=!1,us=null,No=null;const Er=Object.freeze({vertexOffset:0,vertexStep:2});function ML(t){!t||(t=void 0)}class le{static startUp(e=null){if(Cn)return yn("CubismFramework.startUp() is already done."),Cn;if(us=e,null!=us&&Live2DCubismCore.Logging.csmSetLogFunction(us.logFunction),Cn=!0,Cn){const n=Live2DCubismCore.Version.csmGetVersion(),i=(16711680&n)>>16,s=65535&n,o=n;yn("Live2D Cubism Core version: {0}.{1}.{2} ({3})",("00"+((4278190080&n)>>24)).slice(-2),("00"+i).slice(-2),("0000"+s).slice(-4),o)}return yn("CubismFramework.startUp() is complete."),Cn}static cleanUp(){Cn=!1,ls=!1,us=null,No=null}static initialize(){Ln(Cn),Cn?ls?ar("CubismFramework.initialize() skipped, already initialized."):(Ce.staticInitializeNotForClientCall(),No=new uD,ls=!0,yn("CubismFramework.initialize() is complete.")):ar("CubismFramework is not started.")}static dispose(){Ln(Cn),Cn?ls?(Ce.staticReleaseNotForClientCall(),No.release(),No=null,Wl.staticRelease(),ls=!1,yn("CubismFramework.dispose() is complete.")):ar("CubismFramework.dispose() skipped, not initialized."):ar("CubismFramework is not started.")}static isStarted(){return Cn}static isInitialized(){return ls}static coreLogFunction(e){!Live2DCubismCore.Logging.csmGetLogFunction()||Live2DCubismCore.Logging.csmGetLogFunction()(e)}static getLoggingLevel(){return null!=us?us.loggingLevel:je.LogLevel_Off}static getIdManager(){return No}constructor(){}}class xL{}var wD,je=(()=>(function(t){t[t.LogLevel_Verbose=0]="LogLevel_Verbose",t[t.LogLevel_Debug=1]="LogLevel_Debug",t[t.LogLevel_Info=2]="LogLevel_Info",t[t.LogLevel_Warning=3]="LogLevel_Warning",t[t.LogLevel_Error=4]="LogLevel_Error",t[t.LogLevel_Off=5]="LogLevel_Off"}(je||(je={})),je))();!function(t){t.Constant=Er,t.csmDelete=ML,t.CubismFramework=le}(wD||(wD={}));var ur=(()=>(function(t){t[t.ModelLoaded=0]="ModelLoaded",t[t.ModelReleased=1]="ModelReleased",t[t.MotionCompleted=2]="MotionCompleted"}(ur||(ur={})),ur))();const MD="assets/l2d-setup/Resources/";var wt=(()=>(function(t){t[t.Ena=0]="Ena",t[t.Luka=1]="Luka",t[t.Mafuyu=2]="Mafuyu",t[t.Haruka=3]="Haruka",t[t.An=4]="An",t[t.Honami=5]="Honami",t[t.Akito=6]="Akito",t[t.Touya=7]="Touya",t[t.Tsukasa=8]="Tsukasa",t[t.Kanade=9]="Kanade",t[t.Kaito=10]="Kaito",t[t.Shizuku=11]="Shizuku"}(wt||(wt={})),wt))();const cs=["19ena","24luka","18mafuyu","06haruka","10an","03honami","11akito","12touya","13tsukasa","17kanade","26kaito","08shizuku"],NL=cs.length,VL=je.LogLevel_Verbose,T=Object.freeze({HitAreaPrefix:"HitArea",HitAreaHead:"Head",HitAreaBody:"Body",PartsIdCore:"Parts01Core",PartsArmPrefix:"Parts01Arm_",PartsArmLPrefix:"Parts01ArmL_",PartsArmRPrefix:"Parts01ArmR_",ParamAngleX:"ParamAngleX",ParamAngleY:"ParamAngleY",ParamAngleZ:"ParamAngleZ",ParamEyeLOpen:"ParamEyeLOpen",ParamEyeLSmile:"ParamEyeLSmile",ParamEyeROpen:"ParamEyeROpen",ParamEyeRSmile:"ParamEyeRSmile",ParamEyeBallX:"ParamEyeBallX",ParamEyeBallY:"ParamEyeBallY",ParamEyeBallForm:"ParamEyeBallForm",ParamBrowLY:"ParamBrowLY",ParamBrowRY:"ParamBrowRY",ParamBrowLX:"ParamBrowLX",ParamBrowRX:"ParamBrowRX",ParamBrowLAngle:"ParamBrowLAngle",ParamBrowRAngle:"ParamBrowRAngle",ParamBrowLForm:"ParamBrowLForm",ParamBrowRForm:"ParamBrowRForm",ParamMouthForm:"ParamMouthForm",ParamMouthOpenY:"ParamMouthOpenY",ParamCheek:"ParamCheek",ParamBodyAngleX:"ParamBodyAngleX",ParamBodyAngleY:"ParamBodyAngleY",ParamBodyAngleZ:"ParamBodyAngleZ",ParamBreath:"ParamBreath",ParamArmLA:"ParamArmLA",ParamArmRA:"ParamArmRA",ParamArmLB:"ParamArmLB",ParamArmRB:"ParamArmRB",ParamHandL:"ParamHandL",ParamHandR:"ParamHandR",ParamHairFront:"ParamHairFront",ParamHairSide:"ParamHairSide",ParamHairBack:"ParamHairBack",ParamHairFluffy:"ParamHairFluffy",ParamShoulderY:"ParamShoulderY",ParamBustX:"ParamBustX",ParamBustY:"ParamBustY",ParamBaseX:"ParamBaseX",ParamBaseY:"ParamBaseY",ParamNONE:"NONE:"});var bD,TD;!function(t){t.HitAreaBody=T.HitAreaBody,t.HitAreaHead=T.HitAreaHead,t.HitAreaPrefix=T.HitAreaPrefix,t.ParamAngleX=T.ParamAngleX,t.ParamAngleY=T.ParamAngleY,t.ParamAngleZ=T.ParamAngleZ,t.ParamArmLA=T.ParamArmLA,t.ParamArmLB=T.ParamArmLB,t.ParamArmRA=T.ParamArmRA,t.ParamArmRB=T.ParamArmRB,t.ParamBaseX=T.ParamBaseX,t.ParamBaseY=T.ParamBaseY,t.ParamBodyAngleX=T.ParamBodyAngleX,t.ParamBodyAngleY=T.ParamBodyAngleY,t.ParamBodyAngleZ=T.ParamBodyAngleZ,t.ParamBreath=T.ParamBreath,t.ParamBrowLAngle=T.ParamBrowLAngle,t.ParamBrowLForm=T.ParamBrowLForm,t.ParamBrowLX=T.ParamBrowLX,t.ParamBrowLY=T.ParamBrowLY,t.ParamBrowRAngle=T.ParamBrowRAngle,t.ParamBrowRForm=T.ParamBrowRForm,t.ParamBrowRX=T.ParamBrowRX,t.ParamBrowRY=T.ParamBrowRY,t.ParamBustX=T.ParamBustX,t.ParamBustY=T.ParamBustY,t.ParamCheek=T.ParamCheek,t.ParamEyeBallForm=T.ParamEyeBallForm,t.ParamEyeBallX=T.ParamEyeBallX,t.ParamEyeBallY=T.ParamEyeBallY,t.ParamEyeLOpen=T.ParamEyeLOpen,t.ParamEyeLSmile=T.ParamEyeLSmile,t.ParamEyeROpen=T.ParamEyeROpen,t.ParamEyeRSmile=T.ParamEyeRSmile,t.ParamHairBack=T.ParamHairBack,t.ParamHairFluffy=T.ParamHairFluffy,t.ParamHairFront=T.ParamHairFront,t.ParamHairSide=T.ParamHairSide,t.ParamHandL=T.ParamHandL,t.ParamHandR=T.ParamHandR,t.ParamMouthForm=T.ParamMouthForm,t.ParamMouthOpenY=T.ParamMouthOpenY,t.ParamNONE=T.ParamNONE,t.ParamShoulderY=T.ParamShoulderY,t.PartsArmLPrefix=T.PartsArmLPrefix,t.PartsArmPrefix=T.PartsArmPrefix,t.PartsArmRPrefix=T.PartsArmRPrefix,t.PartsIdCore=T.PartsIdCore}(bD||(bD={}));class ID{}!function(t){t.ICubismModelSetting=ID}(TD||(TD={}));const br="FileReferences",PD="UserData",Ir="Name",Zl="Ids",FD="FadeInTime",ND="FadeOutTime",df="LipSync",hf="EyeBlink";var LD,OD,F=(()=>(function(t){t[t.FrequestNode_Groups=0]="FrequestNode_Groups",t[t.FrequestNode_Moc=1]="FrequestNode_Moc",t[t.FrequestNode_Motions=2]="FrequestNode_Motions",t[t.FrequestNode_Expressions=3]="FrequestNode_Expressions",t[t.FrequestNode_Textures=4]="FrequestNode_Textures",t[t.FrequestNode_Physics=5]="FrequestNode_Physics",t[t.FrequestNode_Pose=6]="FrequestNode_Pose",t[t.FrequestNode_HitAreas=7]="FrequestNode_HitAreas"}(F||(F={})),F))();class kD extends ID{constructor(e,n){super(),this._json=dt.create(e,n),this._json&&(this._jsonValue=new z,this._jsonValue.pushBack(this._json.getRoot().getValueByString("Groups")),this._jsonValue.pushBack(this._json.getRoot().getValueByString(br).getValueByString("Moc")),this._jsonValue.pushBack(this._json.getRoot().getValueByString(br).getValueByString("Motions")),this._jsonValue.pushBack(this._json.getRoot().getValueByString(br).getValueByString("Expressions")),this._jsonValue.pushBack(this._json.getRoot().getValueByString(br).getValueByString("Textures")),this._jsonValue.pushBack(this._json.getRoot().getValueByString(br).getValueByString("Physics")),this._jsonValue.pushBack(this._json.getRoot().getValueByString(br).getValueByString("Pose")),this._jsonValue.pushBack(this._json.getRoot().getValueByString("HitAreas")))}release(){dt.delete(this._json),this._jsonValue=null}GetJson(){return this._json}getModelFileName(){return this.isExistModelFile()?this._jsonValue.at(F.FrequestNode_Moc).getRawString():""}getTextureCount(){return this.isExistTextureFiles()?this._jsonValue.at(F.FrequestNode_Textures).getSize():0}getTextureDirectory(){return this._jsonValue.at(F.FrequestNode_Textures).getRawString()}getTextureFileName(e){return this._jsonValue.at(F.FrequestNode_Textures).getValueByIndex(e).getRawString()}getHitAreasCount(){return this.isExistHitAreas()?this._jsonValue.at(F.FrequestNode_HitAreas).getSize():0}getHitAreaId(e){return le.getIdManager().getId(this._jsonValue.at(F.FrequestNode_HitAreas).getValueByIndex(e).getValueByString("Id").getRawString())}getHitAreaName(e){return this._jsonValue.at(F.FrequestNode_HitAreas).getValueByIndex(e).getValueByString(Ir).getRawString()}getPhysicsFileName(){return this.isExistPhysicsFile()?this._jsonValue.at(F.FrequestNode_Physics).getRawString():""}getPoseFileName(){return this.isExistPoseFile()?this._jsonValue.at(F.FrequestNode_Pose).getRawString():""}getExpressionCount(){return this.isExistExpressionFile()?this._jsonValue.at(F.FrequestNode_Expressions).getSize():0}getExpressionName(e){return this._jsonValue.at(F.FrequestNode_Expressions).getValueByIndex(e).getValueByString(Ir).getRawString()}getExpressionFileName(e){return this._jsonValue.at(F.FrequestNode_Expressions).getValueByIndex(e).getValueByString("File").getRawString()}getMotionGroupCount(){return this.isExistMotionGroups()?this._jsonValue.at(F.FrequestNode_Motions).getKeys().getSize():0}getMotionGroupName(e){return this.isExistMotionGroups()?this._jsonValue.at(F.FrequestNode_Motions).getKeys().at(e):null}getMotionCount(e){return this.isExistMotionGroupName(e)?this._jsonValue.at(F.FrequestNode_Motions).getValueByString(e).getSize():0}getMotionFileName(e,n){return this.isExistMotionGroupName(e)?this._jsonValue.at(F.FrequestNode_Motions).getValueByString(e).getValueByIndex(n).getValueByString("File").getRawString():""}getMotionSoundFileName(e,n){return this.isExistMotionSoundFile(e,n)?this._jsonValue.at(F.FrequestNode_Motions).getValueByString(e).getValueByIndex(n).getValueByString("Sound").getRawString():""}getMotionFadeInTimeValue(e,n){return this.isExistMotionFadeIn(e,n)?this._jsonValue.at(F.FrequestNode_Motions).getValueByString(e).getValueByIndex(n).getValueByString(FD).toFloat():-1}getMotionFadeOutTimeValue(e,n){return this.isExistMotionFadeOut(e,n)?this._jsonValue.at(F.FrequestNode_Motions).getValueByString(e).getValueByIndex(n).getValueByString(ND).toFloat():-1}getUserDataFile(){return this.isExistUserDataFile()?this._json.getRoot().getValueByString(br).getValueByString(PD).getRawString():""}getLayoutMap(e){const n=this._json.getRoot().getValueByString("Layout").getMap();if(null==n)return!1;let r=!1;for(const i=n.begin();i.notEqual(n.end());i.preIncrement())e.setValue(i.ptr().first,i.ptr().second.toFloat()),r=!0;return r}getEyeBlinkParameterCount(){if(!this.isExistEyeBlinkParameters())return 0;let e=0;for(let n=0;n<this._jsonValue.at(F.FrequestNode_Groups).getSize();n++){const r=this._jsonValue.at(F.FrequestNode_Groups).getValueByIndex(n);if(!r.isNull()&&!r.isError()&&r.getValueByString(Ir).getRawString()==hf){e=r.getValueByString(Zl).getVector().getSize();break}}return e}getEyeBlinkParameterId(e){if(!this.isExistEyeBlinkParameters())return null;for(let n=0;n<this._jsonValue.at(F.FrequestNode_Groups).getSize();n++){const r=this._jsonValue.at(F.FrequestNode_Groups).getValueByIndex(n);if(!r.isNull()&&!r.isError()&&r.getValueByString(Ir).getRawString()==hf)return le.getIdManager().getId(r.getValueByString(Zl).getValueByIndex(e).getRawString())}return null}getLipSyncParameterCount(){if(!this.isExistLipSyncParameters())return 0;let e=0;for(let n=0;n<this._jsonValue.at(F.FrequestNode_Groups).getSize();n++){const r=this._jsonValue.at(F.FrequestNode_Groups).getValueByIndex(n);if(!r.isNull()&&!r.isError()&&r.getValueByString(Ir).getRawString()==df){e=r.getValueByString(Zl).getVector().getSize();break}}return e}getLipSyncParameterId(e){if(!this.isExistLipSyncParameters())return null;for(let n=0;n<this._jsonValue.at(F.FrequestNode_Groups).getSize();n++){const r=this._jsonValue.at(F.FrequestNode_Groups).getValueByIndex(n);if(!r.isNull()&&!r.isError()&&r.getValueByString(Ir).getRawString()==df)return le.getIdManager().getId(r.getValueByString(Zl).getValueByIndex(e).getRawString())}return null}isExistModelFile(){const e=this._jsonValue.at(F.FrequestNode_Moc);return!e.isNull()&&!e.isError()}isExistTextureFiles(){const e=this._jsonValue.at(F.FrequestNode_Textures);return!e.isNull()&&!e.isError()}isExistHitAreas(){const e=this._jsonValue.at(F.FrequestNode_HitAreas);return!e.isNull()&&!e.isError()}isExistPhysicsFile(){const e=this._jsonValue.at(F.FrequestNode_Physics);return!e.isNull()&&!e.isError()}isExistPoseFile(){const e=this._jsonValue.at(F.FrequestNode_Pose);return!e.isNull()&&!e.isError()}isExistExpressionFile(){const e=this._jsonValue.at(F.FrequestNode_Expressions);return!e.isNull()&&!e.isError()}isExistMotionGroups(){const e=this._jsonValue.at(F.FrequestNode_Motions);return!e.isNull()&&!e.isError()}isExistMotionGroupName(e){const n=this._jsonValue.at(F.FrequestNode_Motions).getValueByString(e);return!n.isNull()&&!n.isError()}isExistMotionSoundFile(e,n){const r=this._jsonValue.at(F.FrequestNode_Motions).getValueByString(e).getValueByIndex(n).getValueByString("Sound");return!r.isNull()&&!r.isError()}isExistMotionFadeIn(e,n){const r=this._jsonValue.at(F.FrequestNode_Motions).getValueByString(e).getValueByIndex(n).getValueByString(FD);return!r.isNull()&&!r.isError()}isExistMotionFadeOut(e,n){const r=this._jsonValue.at(F.FrequestNode_Motions).getValueByString(e).getValueByIndex(n).getValueByString(ND);return!r.isNull()&&!r.isError()}isExistUserDataFile(){const e=this._json.getRoot().getValueByString(br).getValueByString(PD);return!e.isNull()&&!e.isError()}isExistEyeBlinkParameters(){if(this._jsonValue.at(F.FrequestNode_Groups).isNull()||this._jsonValue.at(F.FrequestNode_Groups).isError())return!1;for(let e=0;e<this._jsonValue.at(F.FrequestNode_Groups).getSize();++e)if(this._jsonValue.at(F.FrequestNode_Groups).getValueByIndex(e).getValueByString(Ir).getRawString()==hf)return!0;return!1}isExistLipSyncParameters(){if(this._jsonValue.at(F.FrequestNode_Groups).isNull()||this._jsonValue.at(F.FrequestNode_Groups).isError())return!1;for(let e=0;e<this._jsonValue.at(F.FrequestNode_Groups).getSize();++e)if(this._jsonValue.at(F.FrequestNode_Groups).getValueByIndex(e).getValueByString(Ir).getRawString()==df)return!0;return!1}}!function(t){t.CubismModelSettingJson=kD}(LD||(LD={}));class Lo{constructor(){this._currentTime=0}static create(){return new Lo}static delete(e){null!=e&&(e=null)}setParameters(e){this._breathParameters=e}getParameters(){return this._breathParameters}updateParameters(e,n){this._currentTime+=n;const r=2*this._currentTime*3.14159;for(let i=0;i<this._breathParameters.getSize();++i){const s=this._breathParameters.at(i);e.addParameterValueById(s.parameterId,s.offset+s.peak*Math.sin(r/s.cycle),s.weight)}}}class ds{constructor(e,n,r,i,s){this.parameterId=e??null,this.offset=n??0,this.peak=r??0,this.cycle=i??0,this.weight=s??0}}!function(t){t.BreathParameterData=ds,t.CubismBreath=Lo}(OD||(OD={}));let ff=(()=>{class t{constructor(n){if(this._blinkingState=St.EyeState_First,this._nextBlinkingTime=0,this._stateStartTimeSeconds=0,this._blinkingIntervalSeconds=4,this._closingSeconds=.1,this._closedSeconds=.05,this._openingSeconds=.15,this._userTimeSeconds=0,this._parameterIds=new z,null!=n)for(let r=0;r<n.getEyeBlinkParameterCount();++r)this._parameterIds.pushBack(n.getEyeBlinkParameterId(r))}static create(n=null){return new t(n)}static delete(n){null!=n&&(n=null)}setBlinkingInterval(n){this._blinkingIntervalSeconds=n}setBlinkingSetting(n,r,i){this._closingSeconds=n,this._closedSeconds=r,this._openingSeconds=i}setParameterIds(n){this._parameterIds=n}getParameterIds(){return this._parameterIds}updateParameters(n,r){this._userTimeSeconds+=r;let i,s=0;switch(this._blinkingState){case St.EyeState_Closing:s=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closingSeconds,s>=1&&(s=1,this._blinkingState=St.EyeState_Closed,this._stateStartTimeSeconds=this._userTimeSeconds),i=1-s;break;case St.EyeState_Closed:s=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._closedSeconds,s>=1&&(this._blinkingState=St.EyeState_Opening,this._stateStartTimeSeconds=this._userTimeSeconds),i=0;break;case St.EyeState_Opening:s=(this._userTimeSeconds-this._stateStartTimeSeconds)/this._openingSeconds,s>=1&&(s=1,this._blinkingState=St.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming()),i=s;break;case St.EyeState_Interval:this._nextBlinkingTime<this._userTimeSeconds&&(this._blinkingState=St.EyeState_Closing,this._stateStartTimeSeconds=this._userTimeSeconds),i=1;break;default:this._blinkingState=St.EyeState_Interval,this._nextBlinkingTime=this.determinNextBlinkingTiming(),i=1}t.CloseIfZero||(i=-i);for(let o=0;o<this._parameterIds.getSize();++o)n.setParameterValueById(this._parameterIds.at(o),i)}determinNextBlinkingTiming(){const n=Math.random();return this._userTimeSeconds+n*(2*this._blinkingIntervalSeconds-1)}}return t.CloseIfZero=!0,t})();var BD,St=(()=>(function(t){t[t.EyeState_First=0]="EyeState_First",t[t.EyeState_Interval=1]="EyeState_Interval",t[t.EyeState_Closing=2]="EyeState_Closing",t[t.EyeState_Closed=3]="EyeState_Closed",t[t.EyeState_Opening=4]="EyeState_Opening"}(St||(St={})),St))();!function(t){t.CubismEyeBlink=ff,t.EyeState=St}(BD||(BD={}));const VD="FadeInTime";class Oo{constructor(){this._fadeTimeSeconds=.5,this._lastModel=null,this._partGroups=new z,this._partGroupCounts=new z}static create(e,n){const r=new Oo,i=dt.create(e,n),s=i.getRoot();s.getValueByString(VD).isNull()||(r._fadeTimeSeconds=s.getValueByString(VD).toFloat(.5),r._fadeTimeSeconds<=0&&(r._fadeTimeSeconds=.5));const o=s.getValueByString("Groups"),a=o.getSize();for(let l=0;l<a;++l){const u=o.getValueByIndex(l),c=u.getSize();let d=0;for(let h=0;h<c;++h){const f=u.getValueByIndex(h),g=new Bo,p=le.getIdManager().getId(f.getValueByString("Id").getRawString());if(g.partId=p,!f.getValueByString("Link").isNull()){const m=f.getValueByString("Link"),_=m.getSize();for(let v=0;v<_;++v){const y=new Bo,C=le.getIdManager().getId(m.getValueByIndex(v).getString());y.partId=C,g.link.pushBack(y)}}r._partGroups.pushBack(g.clone()),++d}r._partGroupCounts.pushBack(d)}return dt.delete(i),r}static delete(e){null!=e&&(e=null)}updateParameters(e,n){e!=this._lastModel&&this.reset(e),this._lastModel=e,n<0&&(n=0);let r=0;for(let i=0;i<this._partGroupCounts.getSize();i++){const s=this._partGroupCounts.at(i);this.doFade(e,n,r,s),r+=s}this.copyPartOpacities(e)}reset(e){let n=0;for(let r=0;r<this._partGroupCounts.getSize();++r){const i=this._partGroupCounts.at(r);for(let s=n;s<n+i;++s){this._partGroups.at(s).initialize(e);const o=this._partGroups.at(s).partIndex,a=this._partGroups.at(s).parameterIndex;if(!(o<0)){e.setPartOpacityByIndex(o,s==n?1:0),e.setParameterValueByIndex(a,s==n?1:0);for(let l=0;l<this._partGroups.at(s).link.getSize();++l)this._partGroups.at(s).link.at(l).initialize(e)}}n+=i}}copyPartOpacities(e){for(let n=0;n<this._partGroups.getSize();++n){const r=this._partGroups.at(n);if(0==r.link.getSize())continue;const i=this._partGroups.at(n).partIndex,s=e.getPartOpacityByIndex(i);for(let o=0;o<r.link.getSize();++o){const l=r.link.at(o).partIndex;l<0||e.setPartOpacityByIndex(l,s)}}}doFade(e,n,r,i){let s=-1,o=1;const a=.5;for(let u=r;u<r+i;++u){const c=this._partGroups.at(u).partIndex,d=this._partGroups.at(u).parameterIndex;if(e.getParameterValueByIndex(d)>.001){if(s>=0)break;s=u,o=e.getPartOpacityByIndex(c),o+=n/this._fadeTimeSeconds,o>1&&(o=1)}}s<0&&(s=0,o=1);for(let u=r;u<r+i;++u){const c=this._partGroups.at(u).partIndex;if(s==u)e.setPartOpacityByIndex(c,o);else{let h,d=e.getPartOpacityByIndex(c);h=o<a?o*(a-1)/a+1:(1-o)*a/.5,(1-h)*(1-o)>.15&&(h=1-.15/(1-o)),d>h&&(d=h),e.setPartOpacityByIndex(c,d)}}}}class Bo{constructor(e){if(this.parameterIndex=0,this.partIndex=0,this.link=new z,null!=e){this.partId=e.partId;for(const n=e.link.begin();n.notEqual(e.link.end());n.preIncrement())this.link.pushBack(n.ptr().clone())}}assignment(e){this.partId=e.partId;for(const n=e.link.begin();n.notEqual(e.link.end());n.preIncrement())this.link.pushBack(n.ptr().clone());return this}initialize(e){this.parameterIndex=e.getParameterIndex(this.partId),this.partIndex=e.getPartIndex(this.partId),e.setParameterValueByIndex(this.parameterIndex,1)}clone(){const e=new Bo;e.partId=this.partId,e.parameterIndex=this.parameterIndex,e.partIndex=this.partIndex,e.link=new z;for(let n=this.link.begin();n.notEqual(this.link.end());n.increment())e.link.pushBack(n.ptr().clone());return e}}var UD,$D,zD;!function(t){t.CubismPose=Oo,t.PartData=Bo}(UD||(UD={}));class HD extends Ne{constructor(e,n){super(),this._width=void 0!==e?e:0,this._height=void 0!==n?n:0,this.setHeight(2)}setWidth(e){const n=e/this._width;this.scale(n,n)}setHeight(e){const n=e/this._height;this.scale(n,n)}setPosition(e,n){this.translate(e,n)}setCenterPosition(e,n){this.centerX(e),this.centerY(n)}top(e){this.setY(e)}bottom(e){const n=this._height*this.getScaleY();this.translateY(e-n)}left(e){this.setX(e)}right(e){const n=this._width*this.getScaleX();this.translateX(e-n)}centerX(e){const n=this._width*this.getScaleX();this.translateX(e-n/2)}setX(e){this.translateX(e)}centerY(e){const n=this._height*this.getScaleY();this.translateY(e-n/2)}setY(e){this.translateY(e)}setupFromLayout(e){for(const h=e.begin();h.notEqual(e.end());h.preIncrement()){const f=h.ptr().first,g=h.ptr().second;"width"==f?this.setWidth(g):"height"==f&&this.setHeight(g)}for(const h=e.begin();h.notEqual(e.end());h.preIncrement()){const f=h.ptr().first,g=h.ptr().second;"x"==f?this.setX(g):"y"==f?this.setY(g):"center_x"==f?this.centerX(g):"center_y"==f?this.centerY(g):"top"==f?this.top(g):"bottom"==f?this.bottom(g):"left"==f?this.left(g):"right"==f&&this.right(g)}}}!function(t){t.CubismModelMatrix=HD}($D||($D={}));class k{constructor(e,n){this.x=e,this.y=n,this.x=e??0,this.y=n??0}add(e){const n=new k(0,0);return n.x=this.x+e.x,n.y=this.y+e.y,n}substract(e){const n=new k(0,0);return n.x=this.x-e.x,n.y=this.y-e.y,n}multiply(e){const n=new k(0,0);return n.x=this.x*e.x,n.y=this.y*e.y,n}multiplyByScaler(e){return this.multiply(new k(e,e))}division(e){const n=new k(0,0);return n.x=this.x/e.x,n.y=this.y/e.y,n}divisionByScalar(e){return this.division(new k(e,e))}getLength(){return Math.sqrt(this.x*this.x+this.y*this.y)}getDistanceWith(e){return Math.sqrt((this.x-e.x)*(this.x-e.x)+(this.y-e.y)*(this.y-e.y))}dot(e){return this.x*e.x+this.y*e.y}normalize(){const e=Math.pow(this.x*this.x+this.y*this.y,.5);this.x=this.x/e,this.y=this.y/e}isEqual(e){return this.x==e.x&&this.y==e.y}isNotEqual(e){return!this.isEqual(e)}}!function(t){t.CubismVector2=k}(zD||(zD={}));let Q=(()=>{class t{constructor(){}static range(n,r,i){return n<r?n=r:n>i&&(n=i),n}static sin(n){return Math.sin(n)}static cos(n){return Math.cos(n)}static abs(n){return Math.abs(n)}static sqrt(n){return Math.sqrt(n)}static cbrt(n){if(0===n)return n;let r=n;const i=r<0;let s;return i&&(r=-r),r===1/0?s=1/0:(s=Math.exp(Math.log(r)/3),s=(r/(s*s)+2*s)/3),i?-s:s}static getEasingSine(n){return n<0?0:n>1?1:.5-.5*this.cos(n*Math.PI)}static max(n,r){return n>r?n:r}static min(n,r){return n>r?r:n}static degreesToRadian(n){return n/180*Math.PI}static radianToDegrees(n){return 180*n/Math.PI}static directionToRadian(n,r){let o=Math.atan2(r.y,r.x)-Math.atan2(n.y,n.x);for(;o<-Math.PI;)o+=2*Math.PI;for(;o>Math.PI;)o-=2*Math.PI;return o}static directionToDegrees(n,r){const i=this.directionToRadian(n,r);let s=this.radianToDegrees(i);return r.x-n.x>0&&(s=-s),s}static radianToDirection(n){const r=new k;return r.x=this.sin(n),r.y=this.cos(n),r}static quadraticEquation(n,r,i){return this.abs(n)<t.Epsilon?this.abs(r)<t.Epsilon?-i:-i/r:-(r+this.sqrt(r*r-4*n*i))/(2*n)}static cardanoAlgorithmForBezier(n,r,i,s){if(this.sqrt(n)<t.Epsilon)return this.range(this.quadraticEquation(r,i,s),0,1);const o=r/n,a=i/n,u=(3*a-o*o)/3,c=u/3,d=(2*o*o*o-9*o*a+s/n*27)/27,h=d/2,f=h*h+c*c*c,p=.51;if(f<0){const C=-u/3,W=this.sqrt(C*C*C),Yo=this.range(-d/(2*W),-1,1),li=Math.acos(Yo),ui=2*this.cbrt(W),ys=ui*this.cos(li/3)-o/3;if(this.abs(ys-.5)<p)return this.range(ys,0,1);const vs=ui*this.cos((li+2*Math.PI)/3)-o/3;if(this.abs(vs-.5)<p)return this.range(vs,0,1);const Ko=ui*this.cos((li+4*Math.PI)/3)-o/3;return this.range(Ko,0,1)}if(0==f){let C;C=h<0?this.cbrt(-h):-this.cbrt(h);const x=2*C-o/3;return this.abs(x-.5)<p?this.range(x,0,1):this.range(-C-o/3,0,1)}const m=this.sqrt(f),_=this.cbrt(m-h),v=this.cbrt(m+h);return this.range(_-v-o/3,0,1)}}return t.Epsilon=1e-5,t})();var GD,YD,XD;!function(t){t.CubismMath=Q}(GD||(GD={}));class WD{constructor(){this._faceTargetX=0,this._faceTargetY=0,this._faceX=0,this._faceY=0,this._faceVX=0,this._faceVY=0,this._lastTimeSeconds=0,this._userTimeSeconds=0}update(e){this._userTimeSeconds+=e;const r=4/30;if(0==this._lastTimeSeconds)return void(this._lastTimeSeconds=this._userTimeSeconds);const i=30*(this._userTimeSeconds-this._lastTimeSeconds);this._lastTimeSeconds=this._userTimeSeconds;const a=i*r/4.5,l=this._faceTargetX-this._faceX,u=this._faceTargetY-this._faceY;if(Q.abs(l)<=.01&&Q.abs(u)<=.01)return;const c=Q.sqrt(l*l+u*u);let f=r*l/c-this._faceVX,g=r*u/c-this._faceVY;const p=Q.sqrt(f*f+g*g);(p<-a||p>a)&&(f*=a/p,g*=a/p),this._faceVX+=f,this._faceVY+=g;{const m=.5*(Q.sqrt(a*a+16*a*c-8*a*c)-a),_=Q.sqrt(this._faceVX*this._faceVX+this._faceVY*this._faceVY);_>m&&(this._faceVX*=m/_,this._faceVY*=m/_)}this._faceX+=this._faceVX,this._faceY+=this._faceVY}getX(){return this._faceX}getY(){return this._faceY}set(e,n){this._faceTargetX=e,this._faceTargetY=n}}!function(t){t.CubismTargetPoint=WD}(YD||(YD={}));class hs{constructor(){this.setFinishedMotionHandler=e=>this._onFinishedMotion=e,this.getFinishedMotionHandler=()=>this._onFinishedMotion,this._fadeInSeconds=-1,this._fadeOutSeconds=-1,this._weight=1,this._offsetSeconds=0,this._firedEventValues=new z}static delete(e){e.release(),e=null}release(){this._weight=0}updateParameters(e,n,r){if(!n.isAvailable()||n.isFinished())return;if(!n.isStarted()){n.setIsStarted(!0),n.setStartTime(r-this._offsetSeconds),n.setFadeInStartTime(r);const a=this.getDuration();n.getEndTime()<0&&n.setEndTime(a<=0?-1:n.getStartTime()+a)}let i=this._weight;i=i*(0==this._fadeInSeconds?1:Q.getEasingSine((r-n.getFadeInStartTime())/this._fadeInSeconds))*(0==this._fadeOutSeconds||n.getEndTime()<0?1:Q.getEasingSine((n.getEndTime()-r)/this._fadeOutSeconds)),n.setState(r,i),Ln(0<=i&&i<=1),this.doUpdateParameters(e,r,i,n),n.getEndTime()>0&&n.getEndTime()<r&&n.setIsFinished(!0)}setFadeInTime(e){this._fadeInSeconds=e}setFadeOutTime(e){this._fadeOutSeconds=e}getFadeOutTime(){return this._fadeOutSeconds}getFadeInTime(){return this._fadeInSeconds}setWeight(e){this._weight=e}getWeight(){return this._weight}getDuration(){return-1}getLoopDuration(){return-1}setOffsetTime(e){this._offsetSeconds=e}getFiredEvent(e,n){return this._firedEventValues}}!function(t){t.ACubismMotion=hs}(XD||(XD={}));const KD="Parameters",Ql="Blend";class Jl extends hs{constructor(){super(),this._parameters=new z}static create(e,n){const r=new Jl,i=dt.create(e,n),s=i.getRoot();r.setFadeInTime(s.getValueByString("FadeInTime").toFloat(1)),r.setFadeOutTime(s.getValueByString("FadeOutTime").toFloat(1));const o=s.getValueByString(KD).getSize();r._parameters.prepareCapacity(o);for(let a=0;a<o;++a){const l=s.getValueByString(KD).getValueByIndex(a),u=le.getIdManager().getId(l.getValueByString("Id").getRawString()),c=l.getValueByString("Value").toFloat();let d;d=l.getValueByString(Ql).isNull()||"Add"==l.getValueByString(Ql).getString()?Dn.ExpressionBlendType_Add:"Multiply"==l.getValueByString(Ql).getString()?Dn.ExpressionBlendType_Multiply:"Overwrite"==l.getValueByString(Ql).getString()?Dn.ExpressionBlendType_Overwrite:Dn.ExpressionBlendType_Add;const h=new QD;h.parameterId=u,h.blendType=d,h.value=c,r._parameters.pushBack(h)}return dt.delete(i),r}doUpdateParameters(e,n,r,i){for(let s=0;s<this._parameters.getSize();++s){const o=this._parameters.at(s);switch(o.blendType){case Dn.ExpressionBlendType_Add:e.addParameterValueById(o.parameterId,o.value,r);break;case Dn.ExpressionBlendType_Multiply:e.multiplyParameterValueById(o.parameterId,o.value,r);break;case Dn.ExpressionBlendType_Overwrite:e.setParameterValueById(o.parameterId,o.value,r)}}}}var JD,Dn=(()=>(function(t){t[t.ExpressionBlendType_Add=0]="ExpressionBlendType_Add",t[t.ExpressionBlendType_Multiply=1]="ExpressionBlendType_Multiply",t[t.ExpressionBlendType_Overwrite=2]="ExpressionBlendType_Overwrite"}(Dn||(Dn={})),Dn))();class QD{}!function(t){t.CubismExpressionMotion=Jl,t.ExpressionBlendType=Dn,t.ExpressionParameter=QD}(JD||(JD={}));var iw,wn=(()=>(function(t){t[t.CubismMotionCurveTarget_Model=0]="CubismMotionCurveTarget_Model",t[t.CubismMotionCurveTarget_Parameter=1]="CubismMotionCurveTarget_Parameter",t[t.CubismMotionCurveTarget_PartOpacity=2]="CubismMotionCurveTarget_PartOpacity"}(wn||(wn={})),wn))(),$t=(()=>(function(t){t[t.CubismMotionSegmentType_Linear=0]="CubismMotionSegmentType_Linear",t[t.CubismMotionSegmentType_Bezier=1]="CubismMotionSegmentType_Bezier",t[t.CubismMotionSegmentType_Stepped=2]="CubismMotionSegmentType_Stepped",t[t.CubismMotionSegmentType_InverseStepped=3]="CubismMotionSegmentType_InverseStepped"}($t||($t={})),$t))();class mf{constructor(){this.time=0,this.value=0}}class ew{constructor(){this.evaluate=null,this.basePointIndex=0,this.segmentType=0}}class tw{constructor(){this.type=wn.CubismMotionCurveTarget_Model,this.segmentCount=0,this.baseSegmentIndex=0,this.fadeInTime=0,this.fadeOutTime=0}}class nw{constructor(){this.fireTime=0}}class rw{constructor(){this.duration=0,this.loop=!1,this.curveCount=0,this.eventCount=0,this.fps=0,this.curves=new z,this.segments=new z,this.points=new z,this.events=new z}}!function(t){t.CubismMotionCurve=tw,t.CubismMotionCurveTarget=wn,t.CubismMotionData=rw,t.CubismMotionEvent=nw,t.CubismMotionPoint=mf,t.CubismMotionSegment=ew,t.CubismMotionSegmentType=$t}(iw||(iw={}));const zt="Meta",Tr="Curves",eu="FadeInTime",tu="FadeOutTime",sw="Segments",ow="UserData";class aw{constructor(e,n){this._json=dt.create(e,n)}release(){dt.delete(this._json)}getMotionDuration(){return this._json.getRoot().getValueByString(zt).getValueByString("Duration").toFloat()}isMotionLoop(){return this._json.getRoot().getValueByString(zt).getValueByString("Loop").toBoolean()}getEvaluationOptionFlag(e){return Vo.EvaluationOptionFlag_AreBeziersRistricted==e&&this._json.getRoot().getValueByString(zt).getValueByString("AreBeziersRestricted").toBoolean()}getMotionCurveCount(){return this._json.getRoot().getValueByString(zt).getValueByString("CurveCount").toInt()}getMotionFps(){return this._json.getRoot().getValueByString(zt).getValueByString("Fps").toFloat()}getMotionTotalSegmentCount(){return this._json.getRoot().getValueByString(zt).getValueByString("TotalSegmentCount").toInt()}getMotionTotalPointCount(){return this._json.getRoot().getValueByString(zt).getValueByString("TotalPointCount").toInt()}isExistMotionFadeInTime(){return!this._json.getRoot().getValueByString(zt).getValueByString(eu).isNull()}isExistMotionFadeOutTime(){return!this._json.getRoot().getValueByString(zt).getValueByString(tu).isNull()}getMotionFadeInTime(){return this._json.getRoot().getValueByString(zt).getValueByString(eu).toFloat()}getMotionFadeOutTime(){return this._json.getRoot().getValueByString(zt).getValueByString(tu).toFloat()}getMotionCurveTarget(e){return this._json.getRoot().getValueByString(Tr).getValueByIndex(e).getValueByString("Target").getRawString()}getMotionCurveId(e){return le.getIdManager().getId(this._json.getRoot().getValueByString(Tr).getValueByIndex(e).getValueByString("Id").getRawString())}isExistMotionCurveFadeInTime(e){return!this._json.getRoot().getValueByString(Tr).getValueByIndex(e).getValueByString(eu).isNull()}isExistMotionCurveFadeOutTime(e){return!this._json.getRoot().getValueByString(Tr).getValueByIndex(e).getValueByString(tu).isNull()}getMotionCurveFadeInTime(e){return this._json.getRoot().getValueByString(Tr).getValueByIndex(e).getValueByString(eu).toFloat()}getMotionCurveFadeOutTime(e){return this._json.getRoot().getValueByString(Tr).getValueByIndex(e).getValueByString(tu).toFloat()}getMotionCurveSegmentCount(e){return this._json.getRoot().getValueByString(Tr).getValueByIndex(e).getValueByString(sw).getVector().getSize()}getMotionCurveSegment(e,n){return this._json.getRoot().getValueByString(Tr).getValueByIndex(e).getValueByString(sw).getValueByIndex(n).toFloat()}getEventCount(){return this._json.getRoot().getValueByString(zt).getValueByString("UserDataCount").toInt()}getTotalEventValueSize(){return this._json.getRoot().getValueByString(zt).getValueByString("TotalUserDataSize").toInt()}getEventTime(e){return this._json.getRoot().getValueByString(ow).getValueByIndex(e).getValueByString("Time").toFloat()}getEventValue(e){return new Jt(this._json.getRoot().getValueByString(ow).getValueByIndex(e).getValueByString("Value").getRawString())}}var lw,uw,dw,Vo=(()=>(function(t){t[t.EvaluationOptionFlag_AreBeziersRistricted=0]="EvaluationOptionFlag_AreBeziersRistricted"}(Vo||(Vo={})),Vo))();function Je(t,e,n){const r=new mf;return r.time=t.time+(e.time-t.time)*n,r.value=t.value+(e.value-t.value)*n,r}function xO(t,e){let n=(e-t[0].time)/(t[1].time-t[0].time);return n<0&&(n=0),t[0].value+(t[1].value-t[0].value)*n}function EO(t,e){let n=(e-t[0].time)/(t[3].time-t[0].time);n<0&&(n=0);const r=Je(t[0],t[1],n),i=Je(t[1],t[2],n),s=Je(t[2],t[3],n),o=Je(r,i,n),a=Je(i,s,n);return Je(o,a,n).value}function bO(t,e){const r=t[0].time,s=t[1].time,o=t[2].time,d=Q.cardanoAlgorithmForBezier(t[3].time-3*o+3*s-r,3*o-6*s+3*r,3*s-3*r,r-e),h=Je(t[0],t[1],d),f=Je(t[1],t[2],d),g=Je(t[2],t[3],d),p=Je(h,f,d),m=Je(f,g,d);return Je(p,m,d).value}function IO(t,e){return t[0].value}function TO(t,e){return t[1].value}function _f(t,e,n){const r=t.curves.at(e);let i=-1;const s=r.baseSegmentIndex+r.segmentCount;let o=0;for(let l=r.baseSegmentIndex;l<s;++l)if(o=t.segments.at(l).basePointIndex+(t.segments.at(l).segmentType==$t.CubismMotionSegmentType_Bezier?3:1),t.points.at(o).time>n){i=l;break}if(-1==i)return t.points.at(o).value;const a=t.segments.at(i);return a.evaluate(t.points.get(a.basePointIndex),n)}!function(t){t.CubismMotionJson=aw}(lw||(lw={}));class nu extends hs{constructor(){super(),this._sourceFrameRate=30,this._loopDurationSeconds=-1,this._isLoop=!1,this._isLoopFadeIn=!0,this._lastWeight=0,this._motionData=null,this._modelCurveIdEyeBlink=null,this._modelCurveIdLipSync=null,this._eyeBlinkParameterIds=null,this._lipSyncParameterIds=null}static create(e,n,r){const i=new nu;return i.parse(e,n),i._sourceFrameRate=i._motionData.fps,i._loopDurationSeconds=i._motionData.duration,i._onFinishedMotion=r,i}doUpdateParameters(e,n,r,i){null==this._modelCurveIdEyeBlink&&(this._modelCurveIdEyeBlink=le.getIdManager().getId("EyeBlink")),null==this._modelCurveIdLipSync&&(this._modelCurveIdLipSync=le.getIdManager().getId("LipSync"));let s=n-i.getStartTime();s<0&&(s=0);let o=Number.MAX_VALUE,a=Number.MAX_VALUE;const l=64;let u=0,c=0;this._eyeBlinkParameterIds.getSize()>l&&as("too many eye blink targets : {0}",this._eyeBlinkParameterIds.getSize()),this._lipSyncParameterIds.getSize()>l&&as("too many lip sync targets : {0}",this._lipSyncParameterIds.getSize());const d=this._fadeInSeconds<=0?1:Q.getEasingSine((n-i.getFadeInStartTime())/this._fadeInSeconds),h=this._fadeOutSeconds<=0||i.getEndTime()<0?1:Q.getEasingSine((i.getEndTime()-n)/this._fadeOutSeconds);let f,g,p,m=s;if(this._isLoop)for(;m>this._motionData.duration;)m-=this._motionData.duration;const _=this._motionData.curves;for(g=0;g<this._motionData.curveCount&&_.at(g).type==wn.CubismMotionCurveTarget_Model;++g)f=_f(this._motionData,g,m),_.at(g).id==this._modelCurveIdEyeBlink?a=f:_.at(g).id==this._modelCurveIdLipSync&&(o=f);for(;g<this._motionData.curveCount&&_.at(g).type==wn.CubismMotionCurveTarget_Parameter;++g){if(p=e.getParameterIndex(_.at(g).id),-1==p)continue;const y=e.getParameterValueByIndex(p);if(f=_f(this._motionData,g,m),a!=Number.MAX_VALUE)for(let x=0;x<this._eyeBlinkParameterIds.getSize()&&x<l;++x)if(this._eyeBlinkParameterIds.at(x)==_.at(g).id){f*=a,c|=1<<x;break}if(o!=Number.MAX_VALUE)for(let x=0;x<this._lipSyncParameterIds.getSize()&&x<l;++x)if(this._lipSyncParameterIds.at(x)==_.at(g).id){f+=o,u|=1<<x;break}let C;if(_.at(g).fadeInTime<0&&_.at(g).fadeOutTime<0)C=y+(f-y)*r;else{let x,W;x=_.at(g).fadeInTime<0?d:0==_.at(g).fadeInTime?1:Q.getEasingSine((n-i.getFadeInStartTime())/_.at(g).fadeInTime),W=_.at(g).fadeOutTime<0?h:0==_.at(g).fadeOutTime||i.getEndTime()<0?1:Q.getEasingSine((i.getEndTime()-n)/_.at(g).fadeOutTime),C=y+this._weight*x*W*(f-y)}e.setParameterValueByIndex(p,C,1)}if(a!=Number.MAX_VALUE)for(let y=0;y<this._eyeBlinkParameterIds.getSize()&&y<l;++y){const C=e.getParameterValueById(this._eyeBlinkParameterIds.at(y));if(c>>y&1)continue;const x=C+(a-C)*r;e.setParameterValueById(this._eyeBlinkParameterIds.at(y),x)}if(o!=Number.MAX_VALUE)for(let y=0;y<this._lipSyncParameterIds.getSize()&&y<l;++y){const C=e.getParameterValueById(this._lipSyncParameterIds.at(y));if(u>>y&1)continue;const x=C+(o-C)*r;e.setParameterValueById(this._lipSyncParameterIds.at(y),x)}for(;g<this._motionData.curveCount&&_.at(g).type==wn.CubismMotionCurveTarget_PartOpacity;++g)p=e.getParameterIndex(_.at(g).id),-1!=p&&(f=_f(this._motionData,g,m),e.setParameterValueByIndex(p,f));s>=this._motionData.duration&&(this._isLoop?(i.setStartTime(n),this._isLoopFadeIn&&i.setFadeInStartTime(n)):(this._onFinishedMotion&&this._onFinishedMotion(this),i.setIsFinished(!0))),this._lastWeight=r}setIsLoop(e){this._isLoop=e}isLoop(){return this._isLoop}setIsLoopFadeIn(e){this._isLoopFadeIn=e}isLoopFadeIn(){return this._isLoopFadeIn}getDuration(){return this._isLoop?-1:this._loopDurationSeconds}getLoopDuration(){return this._loopDurationSeconds}setParameterFadeInTime(e,n){const r=this._motionData.curves;for(let i=0;i<this._motionData.curveCount;++i)if(e==r.at(i).id)return void(r.at(i).fadeInTime=n)}setParameterFadeOutTime(e,n){const r=this._motionData.curves;for(let i=0;i<this._motionData.curveCount;++i)if(e==r.at(i).id)return void(r.at(i).fadeOutTime=n)}getParameterFadeInTime(e){const n=this._motionData.curves;for(let r=0;r<this._motionData.curveCount;++r)if(e==n.at(r).id)return n.at(r).fadeInTime;return-1}getParameterFadeOutTime(e){const n=this._motionData.curves;for(let r=0;r<this._motionData.curveCount;++r)if(e==n.at(r).id)return n.at(r).fadeOutTime;return-1}setEffectIds(e,n){this._eyeBlinkParameterIds=e,this._lipSyncParameterIds=n}release(){this._motionData=void 0,this._motionData=null}parse(e,n){this._motionData=new rw;let r=new aw(e,n);this._motionData.duration=r.getMotionDuration(),this._motionData.loop=r.isMotionLoop(),this._motionData.curveCount=r.getMotionCurveCount(),this._motionData.fps=r.getMotionFps(),this._motionData.eventCount=r.getEventCount();const i=r.getEvaluationOptionFlag(Vo.EvaluationOptionFlag_AreBeziersRistricted);this._fadeInSeconds=r.isExistMotionFadeInTime()?r.getMotionFadeInTime()<0?1:r.getMotionFadeInTime():1,this._fadeOutSeconds=r.isExistMotionFadeOutTime()?r.getMotionFadeOutTime()<0?1:r.getMotionFadeOutTime():1,this._motionData.curves.updateSize(this._motionData.curveCount,tw,!0),this._motionData.segments.updateSize(r.getMotionTotalSegmentCount(),ew,!0),this._motionData.points.updateSize(r.getMotionTotalPointCount(),mf,!0),this._motionData.events.updateSize(this._motionData.eventCount,nw,!0);let s=0,o=0;for(let a=0;a<this._motionData.curveCount;++a){"Model"==r.getMotionCurveTarget(a)?this._motionData.curves.at(a).type=wn.CubismMotionCurveTarget_Model:"Parameter"==r.getMotionCurveTarget(a)?this._motionData.curves.at(a).type=wn.CubismMotionCurveTarget_Parameter:"PartOpacity"==r.getMotionCurveTarget(a)?this._motionData.curves.at(a).type=wn.CubismMotionCurveTarget_PartOpacity:ar('Warning : Unable to get segment type from Curve! The number of "CurveCount" may be incorrect!'),this._motionData.curves.at(a).id=r.getMotionCurveId(a),this._motionData.curves.at(a).baseSegmentIndex=o,this._motionData.curves.at(a).fadeInTime=r.isExistMotionCurveFadeInTime(a)?r.getMotionCurveFadeInTime(a):-1,this._motionData.curves.at(a).fadeOutTime=r.isExistMotionCurveFadeOutTime(a)?r.getMotionCurveFadeOutTime(a):-1;for(let l=0;l<r.getMotionCurveSegmentCount(a);){switch(0==l?(this._motionData.segments.at(o).basePointIndex=s,this._motionData.points.at(s).time=r.getMotionCurveSegment(a,l),this._motionData.points.at(s).value=r.getMotionCurveSegment(a,l+1),s+=1,l+=2):this._motionData.segments.at(o).basePointIndex=s-1,r.getMotionCurveSegment(a,l)){case $t.CubismMotionSegmentType_Linear:this._motionData.segments.at(o).segmentType=$t.CubismMotionSegmentType_Linear,this._motionData.segments.at(o).evaluate=xO,this._motionData.points.at(s).time=r.getMotionCurveSegment(a,l+1),this._motionData.points.at(s).value=r.getMotionCurveSegment(a,l+2),s+=1,l+=3;break;case $t.CubismMotionSegmentType_Bezier:this._motionData.segments.at(o).segmentType=$t.CubismMotionSegmentType_Bezier,this._motionData.segments.at(o).evaluate=i?EO:bO,this._motionData.points.at(s).time=r.getMotionCurveSegment(a,l+1),this._motionData.points.at(s).value=r.getMotionCurveSegment(a,l+2),this._motionData.points.at(s+1).time=r.getMotionCurveSegment(a,l+3),this._motionData.points.at(s+1).value=r.getMotionCurveSegment(a,l+4),this._motionData.points.at(s+2).time=r.getMotionCurveSegment(a,l+5),this._motionData.points.at(s+2).value=r.getMotionCurveSegment(a,l+6),s+=3,l+=7;break;case $t.CubismMotionSegmentType_Stepped:this._motionData.segments.at(o).segmentType=$t.CubismMotionSegmentType_Stepped,this._motionData.segments.at(o).evaluate=IO,this._motionData.points.at(s).time=r.getMotionCurveSegment(a,l+1),this._motionData.points.at(s).value=r.getMotionCurveSegment(a,l+2),s+=1,l+=3;break;case $t.CubismMotionSegmentType_InverseStepped:this._motionData.segments.at(o).segmentType=$t.CubismMotionSegmentType_InverseStepped,this._motionData.segments.at(o).evaluate=TO,this._motionData.points.at(s).time=r.getMotionCurveSegment(a,l+1),this._motionData.points.at(s).value=r.getMotionCurveSegment(a,l+2),s+=1,l+=3;break;default:Ln(0)}++this._motionData.curves.at(a).segmentCount,++o}}for(let a=0;a<r.getEventCount();++a)this._motionData.events.at(a).fireTime=r.getEventTime(a),this._motionData.events.at(a).value=r.getEventValue(a);r.release(),r=void 0,r=null}getFiredEvent(e,n){this._firedEventValues.updateSize(0);for(let r=0;r<this._motionData.eventCount;++r)this._motionData.events.at(r).fireTime>e&&this._motionData.events.at(r).fireTime<=n&&this._firedEventValues.pushBack(new Jt(this._motionData.events.at(r).value.s));return this._firedEventValues}}!function(t){t.CubismMotion=nu}(uw||(uw={}));class cw{constructor(){this._autoDelete=!1,this._motion=null,this._available=!0,this._finished=!1,this._started=!1,this._startTimeSeconds=-1,this._fadeInStartTimeSeconds=0,this._endTimeSeconds=-1,this._stateTimeSeconds=0,this._stateWeight=0,this._lastEventCheckSeconds=0,this._motionQueueEntryHandle=this,this._fadeOutSeconds=0,this._isTriggeredFadeOut=!1}release(){this._autoDelete&&this._motion&&hs.delete(this._motion)}setFadeOut(e){this._fadeOutSeconds=e,this._isTriggeredFadeOut=!0}startFadeOut(e,n){const r=n+e;this._isTriggeredFadeOut=!0,(this._endTimeSeconds<0||r<this._endTimeSeconds)&&(this._endTimeSeconds=r)}isFinished(){return this._finished}isStarted(){return this._started}getStartTime(){return this._startTimeSeconds}getFadeInStartTime(){return this._fadeInStartTimeSeconds}getEndTime(){return this._endTimeSeconds}setStartTime(e){this._startTimeSeconds=e}setFadeInStartTime(e){this._fadeInStartTimeSeconds=e}setEndTime(e){this._endTimeSeconds=e}setIsFinished(e){this._finished=e}setIsStarted(e){this._started=e}isAvailable(){return this._available}setIsAvailable(e){this._available=e}setState(e,n){this._stateTimeSeconds=e,this._stateWeight=n}getStateTime(){return this._stateTimeSeconds}getStateWeight(){return this._stateWeight}getLastCheckEventSeconds(){return this._lastEventCheckSeconds}setLastCheckEventSeconds(e){this._lastEventCheckSeconds=e}isTriggeredFadeOut(){return this._isTriggeredFadeOut}getFadeOutSeconds(){return this._fadeOutSeconds}}!function(t){t.CubismMotionQueueEntry=cw}(dw||(dw={}));class hw{constructor(){this._userTimeSeconds=0,this._eventCallBack=null,this._eventCustomData=null,this._motions=new z}release(){for(let e=0;e<this._motions.getSize();++e)this._motions.at(e)&&(this._motions.at(e).release(),this._motions.set(e,null));this._motions=null}startMotion(e,n,r){if(null==e)return ru;let i=null;for(let s=0;s<this._motions.getSize();++s)i=this._motions.at(s),i?.setFadeOut(i._motion.getFadeOutTime());return i=new cw,i._autoDelete=n,i._motion=e,this._motions.pushBack(i),i._motionQueueEntryHandle}isFinished(){for(let e=this._motions.begin();e.notEqual(this._motions.end());){let n=e.ptr();if(null!=n)if(null!=n._motion){if(!n.isFinished())return!1;e.preIncrement()}else n.release(),n=null,e=this._motions.erase(e);else e=this._motions.erase(e)}return!0}isFinishedByHandle(e){for(let n=this._motions.begin();n.notEqual(this._motions.end());n.increment()){const r=n.ptr();if(null!=r&&r._motionQueueEntryHandle==e&&!r.isFinished())return!1}return!0}stopAllMotions(){for(let e=this._motions.begin();e.notEqual(this._motions.end());){let n=e.ptr();null!=n?(n.release(),n=null,e=this._motions.erase(e)):e=this._motions.erase(e)}}getCubismMotionQueueEntry(e){for(let n=this._motions.begin();n.notEqual(this._motions.end());n.preIncrement()){const r=n.ptr();if(null!=r&&r._motionQueueEntryHandle==e)return r}return null}setEventCallback(e,n=null){this._eventCallBack=e,this._eventCustomData=n}doUpdateMotion(e,n){let r=!1;for(let i=this._motions.begin();i.notEqual(this._motions.end());){let s=i.ptr();if(null==s){i=this._motions.erase(i);continue}const o=s._motion;if(null==o){s.release(),s=null,i=this._motions.erase(i);continue}o.updateParameters(e,s,n),r=!0;const a=o.getFiredEvent(s.getLastCheckEventSeconds()-s.getStartTime(),n-s.getStartTime());for(let l=0;l<a.getSize();++l)this._eventCallBack(this,a.at(l),this._eventCustomData);s.setLastCheckEventSeconds(n),s.isFinished()?(s.release(),s=null,i=this._motions.erase(i)):(s.isTriggeredFadeOut()&&s.startFadeOut(s.getFadeOutSeconds(),n),i.preIncrement())}return r}}const ru=-1;var fw,gw;!function(t){t.CubismMotionQueueManager=hw,t.InvalidMotionQueueEntryHandleValue=ru}(fw||(fw={}));class jo extends hw{constructor(){super(),this._currentPriority=0,this._reservePriority=0}getCurrentPriority(){return this._currentPriority}getReservePriority(){return this._reservePriority}setReservePriority(e){this._reservePriority=e}startMotionPriority(e,n,r){return r==this._reservePriority&&(this._reservePriority=0),this._currentPriority=r,super.startMotion(e,n,this._userTimeSeconds)}updateMotion(e,n){this._userTimeSeconds+=n;const r=super.doUpdateMotion(e,this._userTimeSeconds);return this.isFinished()&&(this._currentPriority=0),r}reserveMotion(e){return!(e<=this._reservePriority||e<=this._currentPriority||(this._reservePriority=e,0))}}!function(t){t.CubismMotionManager=jo}(gw||(gw={}));var Cw,fs=(()=>(function(t){t[t.CubismPhysicsTargetType_Parameter=0]="CubismPhysicsTargetType_Parameter"}(fs||(fs={})),fs))(),On=(()=>(function(t){t[t.CubismPhysicsSource_X=0]="CubismPhysicsSource_X",t[t.CubismPhysicsSource_Y=1]="CubismPhysicsSource_Y",t[t.CubismPhysicsSource_Angle=2]="CubismPhysicsSource_Angle"}(On||(On={})),On))();class PO{constructor(){this.gravity=new k(0,0),this.wind=new k(0,0)}}class yf{}class vf{}class pw{constructor(){this.initialPosition=new k(0,0),this.position=new k(0,0),this.lastPosition=new k(0,0),this.lastGravity=new k(0,0),this.force=new k(0,0),this.velocity=new k(0,0)}}class mw{constructor(){this.normalizationPosition=new vf,this.normalizationAngle=new vf}}class _w{constructor(){this.source=new yf}}class yw{constructor(){this.destination=new yf,this.translationScale=new k(0,0)}}class vw{constructor(){this.settings=new z,this.inputs=new z,this.outputs=new z,this.particles=new z,this.gravity=new k(0,0),this.wind=new k(0,0)}}!function(t){t.CubismPhysicsInput=_w,t.CubismPhysicsNormalization=vf,t.CubismPhysicsOutput=yw,t.CubismPhysicsParameter=yf,t.CubismPhysicsParticle=pw,t.CubismPhysicsRig=vw,t.CubismPhysicsSource=On,t.CubismPhysicsSubRig=mw,t.CubismPhysicsTargetType=fs,t.PhysicsJsonEffectiveForces=PO}(Cw||(Cw={}));const Uo="Position",wf="Angle",Pr="Meta",iu="EffectiveForces",Sw="Gravity",Se="PhysicsSettings",gs="Normalization",xw="Minimum",Ew="Maximum",bw="Default",Iw="Reflect",Ho="Input",ri="Output",ii="Vertices";class Pw{constructor(e,n){this._json=dt.create(e,n)}release(){dt.delete(this._json)}getGravity(){const e=new k(0,0);return e.x=this._json.getRoot().getValueByString(Pr).getValueByString(iu).getValueByString(Sw).getValueByString("X").toFloat(),e.y=this._json.getRoot().getValueByString(Pr).getValueByString(iu).getValueByString(Sw).getValueByString("Y").toFloat(),e}getWind(){const e=new k(0,0);return e.x=this._json.getRoot().getValueByString(Pr).getValueByString(iu).getValueByString("Wind").getValueByString("X").toFloat(),e.y=this._json.getRoot().getValueByString(Pr).getValueByString(iu).getValueByString("Wind").getValueByString("Y").toFloat(),e}getSubRigCount(){return this._json.getRoot().getValueByString(Pr).getValueByString("PhysicsSettingCount").toInt()}getTotalInputCount(){return this._json.getRoot().getValueByString(Pr).getValueByString("TotalInputCount").toInt()}getTotalOutputCount(){return this._json.getRoot().getValueByString(Pr).getValueByString("TotalOutputCount").toInt()}getVertexCount(){return this._json.getRoot().getValueByString(Pr).getValueByString("VertexCount").toInt()}getNormalizationPositionMinimumValue(e){return this._json.getRoot().getValueByString(Se).getValueByIndex(e).getValueByString(gs).getValueByString(Uo).getValueByString(xw).toFloat()}getNormalizationPositionMaximumValue(e){return this._json.getRoot().getValueByString(Se).getValueByIndex(e).getValueByString(gs).getValueByString(Uo).getValueByString(Ew).toFloat()}getNormalizationPositionDefaultValue(e){return this._json.getRoot().getValueByString(Se).getValueByIndex(e).getValueByString(gs).getValueByString(Uo).getValueByString(bw).toFloat()}getNormalizationAngleMinimumValue(e){return this._json.getRoot().getValueByString(Se).getValueByIndex(e).getValueByString(gs).getValueByString(wf).getValueByString(xw).toFloat()}getNormalizationAngleMaximumValue(e){return this._json.getRoot().getValueByString(Se).getValueByIndex(e).getValueByString(gs).getValueByString(wf).getValueByString(Ew).toFloat()}getNormalizationAngleDefaultValue(e){return this._json.getRoot().getValueByString(Se).getValueByIndex(e).getValueByString(gs).getValueByString(wf).getValueByString(bw).toFloat()}getInputCount(e){return this._json.getRoot().getValueByString(Se).getValueByIndex(e).getValueByString(Ho).getVector().getSize()}getInputWeight(e,n){return this._json.getRoot().getValueByString(Se).getValueByIndex(e).getValueByString(Ho).getValueByIndex(n).getValueByString("Weight").toFloat()}getInputReflect(e,n){return this._json.getRoot().getValueByString(Se).getValueByIndex(e).getValueByString(Ho).getValueByIndex(n).getValueByString(Iw).toBoolean()}getInputType(e,n){return this._json.getRoot().getValueByString(Se).getValueByIndex(e).getValueByString(Ho).getValueByIndex(n).getValueByString("Type").getRawString()}getInputSourceId(e,n){return le.getIdManager().getId(this._json.getRoot().getValueByString(Se).getValueByIndex(e).getValueByString(Ho).getValueByIndex(n).getValueByString("Source").getValueByString("Id").getRawString())}getOutputCount(e){return this._json.getRoot().getValueByString(Se).getValueByIndex(e).getValueByString(ri).getVector().getSize()}getOutputVertexIndex(e,n){return this._json.getRoot().getValueByString(Se).getValueByIndex(e).getValueByString(ri).getValueByIndex(n).getValueByString("VertexIndex").toInt()}getOutputAngleScale(e,n){return this._json.getRoot().getValueByString(Se).getValueByIndex(e).getValueByString(ri).getValueByIndex(n).getValueByString("Scale").toFloat()}getOutputWeight(e,n){return this._json.getRoot().getValueByString(Se).getValueByIndex(e).getValueByString(ri).getValueByIndex(n).getValueByString("Weight").toFloat()}getOutputDestinationId(e,n){return le.getIdManager().getId(this._json.getRoot().getValueByString(Se).getValueByIndex(e).getValueByString(ri).getValueByIndex(n).getValueByString("Destination").getValueByString("Id").getRawString())}getOutputType(e,n){return this._json.getRoot().getValueByString(Se).getValueByIndex(e).getValueByString(ri).getValueByIndex(n).getValueByString("Type").getRawString()}getOutputReflect(e,n){return this._json.getRoot().getValueByString(Se).getValueByIndex(e).getValueByString(ri).getValueByIndex(n).getValueByString(Iw).toBoolean()}getParticleCount(e){return this._json.getRoot().getValueByString(Se).getValueByIndex(e).getValueByString(ii).getVector().getSize()}getParticleMobility(e,n){return this._json.getRoot().getValueByString(Se).getValueByIndex(e).getValueByString(ii).getValueByIndex(n).getValueByString("Mobility").toFloat()}getParticleDelay(e,n){return this._json.getRoot().getValueByString(Se).getValueByIndex(e).getValueByString(ii).getValueByIndex(n).getValueByString("Delay").toFloat()}getParticleAcceleration(e,n){return this._json.getRoot().getValueByString(Se).getValueByIndex(e).getValueByString(ii).getValueByIndex(n).getValueByString("Acceleration").toFloat()}getParticleRadius(e,n){return this._json.getRoot().getValueByString(Se).getValueByIndex(e).getValueByString(ii).getValueByIndex(n).getValueByString("Radius").toFloat()}getParticlePosition(e,n){const r=new k(0,0);return r.x=this._json.getRoot().getValueByString(Se).getValueByIndex(e).getValueByString(ii).getValueByIndex(n).getValueByString(Uo).getValueByString("X").toFloat(),r.y=this._json.getRoot().getValueByString(Se).getValueByIndex(e).getValueByString(ii).getValueByIndex(n).getValueByString(Uo).getValueByString("Y").toFloat(),r}}var Aw,Ow,Bw;!function(t){t.CubismPhysicsJson=Pw}(Aw||(Aw={}));class $o{constructor(){this._physicsRig=null,this._options=new Lw,this._options.gravity.y=-1,this._options.gravity.x=0,this._options.wind.x=0,this._options.wind.y=0}static create(e,n){const r=new $o;return r.parse(e,n),r._physicsRig.gravity.y=0,r}static delete(e){null!=e&&(e.release(),e=null)}evaluate(e,n){let r,i,s,o;const a=new k;let l,u,c,d,h,f,g,p;h=e.getModel().parameters.values,f=e.getModel().parameters.maximumValues,g=e.getModel().parameters.minimumValues,p=e.getModel().parameters.defaultValues;for(let m=0;m<this._physicsRig.subRigCount;++m){r={angle:0},a.x=0,a.y=0,l=this._physicsRig.settings.at(m),u=this._physicsRig.inputs.get(l.baseInputIndex),c=this._physicsRig.outputs.get(l.baseOutputIndex),d=this._physicsRig.particles.get(l.baseParticleIndex);for(let _=0;_<l.inputCount;++_)i=u[_].weight/100,-1==u[_].sourceParameterIndex&&(u[_].sourceParameterIndex=e.getParameterIndex(u[_].source.id)),u[_].getNormalizedParameterValue(a,r,h[u[_].sourceParameterIndex],g[u[_].sourceParameterIndex],f[u[_].sourceParameterIndex],p[u[_].sourceParameterIndex],l.normalizationPosition,l.normalizationAngle,u[_].reflect,i);s=Q.degreesToRadian(-r.angle),a.x=a.x*Q.cos(s)-a.y*Q.sin(s),a.y=a.x*Q.sin(s)+a.y*Q.cos(s),rB(d,l.particleCount,a,r.angle,this._options.wind,.001*l.normalizationPosition.maximum,n,5);for(let _=0;_<l.outputCount;++_){const v=c[_].vertexIndex;if(v<1||v>=l.particleCount)break;-1==c[_].destinationParameterIndex&&(c[_].destinationParameterIndex=e.getParameterIndex(c[_].destination.id));const y=new k;y.x=d[v].position.x-d[v-1].position.x,y.y=d[v].position.y-d[v-1].position.y,o=c[_].getValue(y,d,v,c[_].reflect,this._options.gravity);const C=c[_].destinationParameterIndex,x=!Float32Array.prototype.slice&&"subarray"in Float32Array.prototype?JSON.parse(JSON.stringify(h.subarray(C))):h.slice(C);iB(x,g[C],f[C],o,c[_]);for(let W=C,Xe=0;W<h.length;W++,Xe++)h[W]=x[Xe]}}}setOptions(e){this._options=e}getOption(){return this._options}release(){this._physicsRig=void 0,this._physicsRig=null}parse(e,n){this._physicsRig=new vw;let r=new Pw(e,n);this._physicsRig.gravity=r.getGravity(),this._physicsRig.wind=r.getWind(),this._physicsRig.subRigCount=r.getSubRigCount(),this._physicsRig.settings.updateSize(this._physicsRig.subRigCount,mw,!0),this._physicsRig.inputs.updateSize(r.getTotalInputCount(),_w,!0),this._physicsRig.outputs.updateSize(r.getTotalOutputCount(),yw,!0),this._physicsRig.particles.updateSize(r.getVertexCount(),pw,!0);let i=0,s=0,o=0;for(let a=0;a<this._physicsRig.settings.getSize();++a){this._physicsRig.settings.at(a).normalizationPosition.minimum=r.getNormalizationPositionMinimumValue(a),this._physicsRig.settings.at(a).normalizationPosition.maximum=r.getNormalizationPositionMaximumValue(a),this._physicsRig.settings.at(a).normalizationPosition.defalut=r.getNormalizationPositionDefaultValue(a),this._physicsRig.settings.at(a).normalizationAngle.minimum=r.getNormalizationAngleMinimumValue(a),this._physicsRig.settings.at(a).normalizationAngle.maximum=r.getNormalizationAngleMaximumValue(a),this._physicsRig.settings.at(a).normalizationAngle.defalut=r.getNormalizationAngleDefaultValue(a),this._physicsRig.settings.at(a).inputCount=r.getInputCount(a),this._physicsRig.settings.at(a).baseInputIndex=i;for(let l=0;l<this._physicsRig.settings.at(a).inputCount;++l)this._physicsRig.inputs.at(i+l).sourceParameterIndex=-1,this._physicsRig.inputs.at(i+l).weight=r.getInputWeight(a,l),this._physicsRig.inputs.at(i+l).reflect=r.getInputReflect(a,l),"X"==r.getInputType(a,l)?(this._physicsRig.inputs.at(i+l).type=On.CubismPhysicsSource_X,this._physicsRig.inputs.at(i+l).getNormalizedParameterValue=qO):"Y"==r.getInputType(a,l)?(this._physicsRig.inputs.at(i+l).type=On.CubismPhysicsSource_Y,this._physicsRig.inputs.at(i+l).getNormalizedParameterValue=WO):"Angle"==r.getInputType(a,l)&&(this._physicsRig.inputs.at(i+l).type=On.CubismPhysicsSource_Angle,this._physicsRig.inputs.at(i+l).getNormalizedParameterValue=YO),this._physicsRig.inputs.at(i+l).source.targetType=fs.CubismPhysicsTargetType_Parameter,this._physicsRig.inputs.at(i+l).source.id=r.getInputSourceId(a,l);i+=this._physicsRig.settings.at(a).inputCount,this._physicsRig.settings.at(a).outputCount=r.getOutputCount(a),this._physicsRig.settings.at(a).baseOutputIndex=s;for(let l=0;l<this._physicsRig.settings.at(a).outputCount;++l)this._physicsRig.outputs.at(s+l).destinationParameterIndex=-1,this._physicsRig.outputs.at(s+l).vertexIndex=r.getOutputVertexIndex(a,l),this._physicsRig.outputs.at(s+l).angleScale=r.getOutputAngleScale(a,l),this._physicsRig.outputs.at(s+l).weight=r.getOutputWeight(a,l),this._physicsRig.outputs.at(s+l).destination.targetType=fs.CubismPhysicsTargetType_Parameter,this._physicsRig.outputs.at(s+l).destination.id=r.getOutputDestinationId(a,l),"X"==r.getOutputType(a,l)?(this._physicsRig.outputs.at(s+l).type=On.CubismPhysicsSource_X,this._physicsRig.outputs.at(s+l).getValue=XO,this._physicsRig.outputs.at(s+l).getScale=eB):"Y"==r.getOutputType(a,l)?(this._physicsRig.outputs.at(s+l).type=On.CubismPhysicsSource_Y,this._physicsRig.outputs.at(s+l).getValue=KO,this._physicsRig.outputs.at(s+l).getScale=tB):"Angle"==r.getOutputType(a,l)&&(this._physicsRig.outputs.at(s+l).type=On.CubismPhysicsSource_Angle,this._physicsRig.outputs.at(s+l).getValue=ZO,this._physicsRig.outputs.at(s+l).getScale=nB),this._physicsRig.outputs.at(s+l).reflect=r.getOutputReflect(a,l);s+=this._physicsRig.settings.at(a).outputCount,this._physicsRig.settings.at(a).particleCount=r.getParticleCount(a),this._physicsRig.settings.at(a).baseParticleIndex=o;for(let l=0;l<this._physicsRig.settings.at(a).particleCount;++l)this._physicsRig.particles.at(o+l).mobility=r.getParticleMobility(a,l),this._physicsRig.particles.at(o+l).delay=r.getParticleDelay(a,l),this._physicsRig.particles.at(o+l).acceleration=r.getParticleAcceleration(a,l),this._physicsRig.particles.at(o+l).radius=r.getParticleRadius(a,l),this._physicsRig.particles.at(o+l).position=r.getParticlePosition(a,l);o+=this._physicsRig.settings.at(a).particleCount}this.initialize(),r.release(),r=void 0,r=null}initialize(){let e,n,r;for(let i=0;i<this._physicsRig.subRigCount;++i){n=this._physicsRig.settings.at(i),e=this._physicsRig.particles.get(n.baseParticleIndex),e[0].initialPosition=new k(0,0),e[0].lastPosition=new k(e[0].initialPosition.x,e[0].initialPosition.y),e[0].lastGravity=new k(0,-1),e[0].lastGravity.y*=-1,e[0].velocity=new k(0,0),e[0].force=new k(0,0);for(let s=1;s<n.particleCount;++s)r=new k(0,0),r.y=e[s].radius,e[s].initialPosition=new k(e[s-1].initialPosition.x+r.x,e[s-1].initialPosition.y+r.y),e[s].position=new k(e[s].initialPosition.x,e[s].initialPosition.y),e[s].lastPosition=new k(e[s].initialPosition.x,e[s].initialPosition.y),e[s].lastGravity=new k(0,-1),e[s].lastGravity.y*=-1,e[s].velocity=new k(0,0),e[s].force=new k(0,0)}}}class Lw{constructor(){this.gravity=new k(0,0),this.wind=new k(0,0)}}function qO(t,e,n,r,i,s,o,a,l,u){t.x+=Sf(n,r,i,0,o.minimum,o.maximum,o.defalut,l)*u}function WO(t,e,n,r,i,s,o,a,l,u){t.y+=Sf(n,r,i,0,o.minimum,o.maximum,o.defalut,l)*u}function YO(t,e,n,r,i,s,o,a,l,u){e.angle+=Sf(n,r,i,0,a.minimum,a.maximum,a.defalut,l)*u}function XO(t,e,n,r,i){let s=t.x;return r&&(s*=-1),s}function KO(t,e,n,r,i){let s=t.y;return r&&(s*=-1),s}function ZO(t,e,n,r,i){let s;return i=n>=2?e[n-1].position.substract(e[n-2].position):i.multiplyByScaler(-1),s=Q.directionToRadian(i,t),r&&(s*=-1),s}function eB(t,e){return JSON.parse(JSON.stringify(t.x))}function tB(t,e){return JSON.parse(JSON.stringify(t.y))}function nB(t,e){return JSON.parse(JSON.stringify(e))}function rB(t,e,n,r,i,s,o,a){let l,u,c,d,h=new k(0,0),f=new k(0,0),g=new k(0,0),p=new k(0,0);t[0].position=new k(n.x,n.y),l=Q.degreesToRadian(r),d=Q.radianToDirection(l),d.normalize();for(let m=1;m<e;++m)t[m].force=d.multiplyByScaler(t[m].acceleration).add(i),t[m].lastPosition=new k(t[m].position.x,t[m].position.y),u=t[m].delay*o*30,h=t[m].position.substract(t[m-1].position),c=Q.directionToRadian(t[m].lastGravity,d)/a,h.x=Q.cos(c)*h.x-h.y*Q.sin(c),h.y=Q.sin(c)*h.x+h.y*Q.cos(c),t[m].position=t[m-1].position.add(h),f=t[m].velocity.multiplyByScaler(u),g=t[m].force.multiplyByScaler(u).multiplyByScaler(u),t[m].position=t[m].position.add(f).add(g),p=t[m].position.substract(t[m-1].position),p.normalize(),t[m].position=t[m-1].position.add(p.multiplyByScaler(t[m].radius)),Q.abs(t[m].position.x)<s&&(t[m].position.x=0),0!=u&&(t[m].velocity=t[m].position.substract(t[m].lastPosition),t[m].velocity=t[m].velocity.divisionByScalar(u),t[m].velocity=t[m].velocity.multiplyByScaler(t[m].mobility)),t[m].force=new k(0,0),t[m].lastGravity=new k(d.x,d.y)}function iB(t,e,n,r,i){let s,o,a;s=i.getScale(i.translationScale,i.angleScale),o=r*s,o<e?(o<i.valueBelowMinimum&&(i.valueBelowMinimum=o),o=e):o>n&&(o>i.valueExceededMaximum&&(i.valueExceededMaximum=o),o=n),a=i.weight/100,a>=1||(o=t[0]*(1-a)+o*a),t[0]=o}function Sf(t,e,n,r,i,s,o,a){let l=0;const u=Q.max(n,e);u<t&&(t=u);const c=Q.min(n,e);c>t&&(t=c);const d=Q.min(i,s),h=Q.max(i,s),f=o,g=function JO(t,e){return Q.min(t,e)+function QO(t,e){const n=Q.max(t,e),r=Q.min(t,e);return Q.abs(n-r)}(t,e)/2}(c,u),p=t-g;switch(function GO(t){let e=0;return t>0?e=1:t<0&&(e=-1),e}(p)){case 1:{const m=h-f,_=u-g;0!=_&&(l=p*(m/_),l+=f);break}case-1:{const m=d-f,_=c-g;0!=_&&(l=p*(m/_),l+=f);break}case 0:l=f}return a?l:-1*l}!function(t){t.CubismPhysics=$o,t.Options=Lw}(Ow||(Ow={}));class su{constructor(e,n,r,i){this.x=e,this.y=n,this.width=r,this.height=i}getCenterX(){return this.x+.5*this.width}getCenterY(){return this.y+.5*this.height}getRight(){return this.x+this.width}getBottom(){return this.y+this.height}setRect(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height}expand(e,n){this.x-=e,this.y-=n,this.width+=2*e,this.height+=2*n}}let si,zo,xf;!function(t){t.csmRect=su}(Bw||(Bw={}));class ou{constructor(){this._maskRenderTexture=null,this._colorBuffer=null,this._currentFrameNo=0,this._clippingMaskBufferSize=256,this._clippingContextListForMask=new z,this._clippingContextListForDraw=new z,this._channelColors=new z,this._tmpBoundsOnModel=new su,this._tmpMatrix=new Ne,this._tmpMatrixForMask=new Ne,this._tmpMatrixForDraw=new Ne,this._maskTexture=null;let e=new os;e.R=1,e.G=0,e.B=0,e.A=0,this._channelColors.pushBack(e),e=new os,e.R=0,e.G=1,e.B=0,e.A=0,this._channelColors.pushBack(e),e=new os,e.R=0,e.G=0,e.B=1,e.A=0,this._channelColors.pushBack(e),e=new os,e.R=0,e.G=0,e.B=0,e.A=1,this._channelColors.pushBack(e)}getChannelFlagAsColor(e){return this._channelColors.at(e)}getMaskRenderTexture(){let e=0;if(this._maskTexture&&0!=this._maskTexture.texture&&(this._maskTexture.frameNo=this._currentFrameNo,e=this._maskTexture.texture),0==e){const n=this._clippingMaskBufferSize;this._colorBuffer=this.gl.createTexture(),this.gl.bindTexture(this.gl.TEXTURE_2D,this._colorBuffer),this.gl.texImage2D(this.gl.TEXTURE_2D,0,this.gl.RGBA,n,n,0,this.gl.RGBA,this.gl.UNSIGNED_BYTE,null),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,this.gl.CLAMP_TO_EDGE),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MIN_FILTER,this.gl.LINEAR),this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_MAG_FILTER,this.gl.LINEAR),this.gl.bindTexture(this.gl.TEXTURE_2D,null),e=this.gl.createFramebuffer(),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,e),this.gl.framebufferTexture2D(this.gl.FRAMEBUFFER,this.gl.COLOR_ATTACHMENT0,this.gl.TEXTURE_2D,this._colorBuffer,0),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,xf),this._maskTexture=new Vw(this._currentFrameNo,e)}return e}setGL(e){this.gl=e}calcClippedDrawTotalBounds(e,n){let r=Number.MAX_VALUE,i=Number.MAX_VALUE,s=Number.MIN_VALUE,o=Number.MIN_VALUE;const a=n._clippedDrawableIndexList.length;for(let l=0;l<a;l++){const u=n._clippedDrawableIndexList[l],c=e.getDrawableVertexCount(u),d=e.getDrawableVertices(u);let h=Number.MAX_VALUE,f=Number.MAX_VALUE,g=Number.MIN_VALUE,p=Number.MIN_VALUE;const m=c*Er.vertexStep;for(let _=Er.vertexOffset;_<m;_+=Er.vertexStep){const v=d[_],y=d[_+1];v<h&&(h=v),v>g&&(g=v),y<f&&(f=y),y>p&&(p=y)}if(h!=Number.MAX_VALUE)if(h<r&&(r=h),f<i&&(i=f),g>s&&(s=g),p>o&&(o=p),r==Number.MAX_VALUE)n._allClippedDrawRect.x=0,n._allClippedDrawRect.y=0,n._allClippedDrawRect.width=0,n._allClippedDrawRect.height=0,n._isUsing=!1;else{n._isUsing=!0;const _=s-r,v=o-i;n._allClippedDrawRect.x=r,n._allClippedDrawRect.y=i,n._allClippedDrawRect.width=_,n._allClippedDrawRect.height=v}}}release(){for(let e=0;e<this._clippingContextListForMask.getSize();e++)this._clippingContextListForMask.at(e)&&(this._clippingContextListForMask.at(e).release(),this._clippingContextListForMask.set(e,void 0)),this._clippingContextListForMask.set(e,null);this._clippingContextListForMask=null;for(let e=0;e<this._clippingContextListForDraw.getSize();e++)this._clippingContextListForDraw.set(e,null);this._clippingContextListForDraw=null,this._maskTexture&&(this.gl.deleteFramebuffer(this._maskTexture.texture),this._maskTexture=null);for(let e=0;e<this._channelColors.getSize();e++)this._channelColors.set(e,null);this._channelColors=null,this.gl.deleteTexture(this._colorBuffer),this._colorBuffer=null}initialize(e,n,r,i){for(let s=0;s<n;s++){if(i[s]<=0){this._clippingContextListForDraw.pushBack(null);continue}let o=this.findSameClip(r[s],i[s]);null==o&&(o=new jw(this,r[s],i[s]),this._clippingContextListForMask.pushBack(o)),o.addClippedDrawable(s),this._clippingContextListForDraw.pushBack(o)}}setupClippingContext(e,n){this._currentFrameNo++;let r=0;for(let i=0;i<this._clippingContextListForMask.getSize();i++){const s=this._clippingContextListForMask.at(i);this.calcClippedDrawTotalBounds(e,s),s._isUsing&&r++}if(r>0){this.gl.viewport(0,0,this._clippingMaskBufferSize,this._clippingMaskBufferSize),this._maskRenderTexture=this.getMaskRenderTexture(),n.getMvpMatrix(),n.preDraw(),this.setupLayoutBounds(r),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this._maskRenderTexture),this.gl.clearColor(1,1,1,1),this.gl.clear(this.gl.COLOR_BUFFER_BIT);for(let s=0;s<this._clippingContextListForMask.getSize();s++){const o=this._clippingContextListForMask.at(s),a=o._allClippedDrawRect,l=o._layoutBounds,u=.05;this._tmpBoundsOnModel.setRect(a),this._tmpBoundsOnModel.expand(a.width*u,a.height*u);const c=l.width/this._tmpBoundsOnModel.width,d=l.height/this._tmpBoundsOnModel.height;this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(-1,-1),this._tmpMatrix.scaleRelative(2,2),this._tmpMatrix.translateRelative(l.x,l.y),this._tmpMatrix.scaleRelative(c,d),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForMask.setMatrix(this._tmpMatrix.getArray()),this._tmpMatrix.loadIdentity(),this._tmpMatrix.translateRelative(l.x,l.y),this._tmpMatrix.scaleRelative(c,d),this._tmpMatrix.translateRelative(-this._tmpBoundsOnModel.x,-this._tmpBoundsOnModel.y),this._tmpMatrixForDraw.setMatrix(this._tmpMatrix.getArray()),o._matrixForMask.setMatrix(this._tmpMatrixForMask.getArray()),o._matrixForDraw.setMatrix(this._tmpMatrixForDraw.getArray());const h=o._clippingIdCount;for(let f=0;f<h;f++){const g=o._clippingIdList[f];!e.getDrawableDynamicFlagVertexPositionsDidChange(g)||(n.setIsCulling(0!=e.getDrawableCulling(g)),n.setClippingContextBufferForMask(o),n.drawMesh(e.getDrawableTextureIndices(g),e.getDrawableVertexIndexCount(g),e.getDrawableVertexCount(g),e.getDrawableVertexIndices(g),e.getDrawableVertices(g),e.getDrawableVertexUvs(g),e.getDrawableOpacity(g),_n.CubismBlendMode_Normal,!1))}}this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,xf),n.setClippingContextBufferForMask(null),this.gl.viewport(zo[0],zo[1],zo[2],zo[3])}}findSameClip(e,n){for(let r=0;r<this._clippingContextListForMask.getSize();r++){const i=this._clippingContextListForMask.at(r),s=i._clippingIdCount;if(s!=n)continue;let o=0;for(let a=0;a<s;a++){const l=i._clippingIdList[a];for(let u=0;u<s;u++)if(e[u]==l){o++;break}}if(o==s)return i}return null}setupLayoutBounds(e){let n=e/4,r=e%4;n=~~n,r=~~r;let i=0;for(let s=0;s<4;s++){const o=n+(s<r?1:0);if(0!=o)if(1==o){const a=this._clippingContextListForMask.at(i++);a._layoutChannelNo=s,a._layoutBounds.x=0,a._layoutBounds.y=0,a._layoutBounds.width=1,a._layoutBounds.height=1}else if(2==o)for(let a=0;a<o;a++){let l=a%2;l=~~l;const u=this._clippingContextListForMask.at(i++);u._layoutChannelNo=s,u._layoutBounds.x=.5*l,u._layoutBounds.y=0,u._layoutBounds.width=.5,u._layoutBounds.height=1}else if(o<=4)for(let a=0;a<o;a++){let l=a%2,u=a/2;l=~~l,u=~~u;const c=this._clippingContextListForMask.at(i++);c._layoutChannelNo=s,c._layoutBounds.x=.5*l,c._layoutBounds.y=.5*u,c._layoutBounds.width=.5,c._layoutBounds.height=.5}else if(o<=9)for(let a=0;a<o;a++){let l=a%3,u=a/3;l=~~l,u=~~u;const c=this._clippingContextListForMask.at(i++);c._layoutChannelNo=s,c._layoutBounds.x=l/3,c._layoutBounds.y=u/3,c._layoutBounds.width=1/3,c._layoutBounds.height=1/3}else en("not supported mask count : {0}",o)}}getColorBuffer(){return this._colorBuffer}getClippingContextListForDraw(){return this._clippingContextListForDraw}setClippingMaskBufferSize(e){this._clippingMaskBufferSize=e}getClippingMaskBufferSize(){return this._clippingMaskBufferSize}}class Vw{constructor(e,n){this.frameNo=e,this.texture=n}}class jw{constructor(e,n,r){this._owner=e,this._clippingIdList=n,this._clippingIdCount=r,this._allClippedDrawRect=new su,this._layoutBounds=new su,this._clippedDrawableIndexList=[],this._matrixForMask=new Ne,this._matrixForDraw=new Ne}release(){null!=this._layoutBounds&&(this._layoutBounds=null),null!=this._allClippedDrawRect&&(this._allClippedDrawRect=null),null!=this._clippedDrawableIndexList&&(this._clippedDrawableIndexList=null)}addClippedDrawable(e){this._clippedDrawableIndexList.push(e)}getClippingManager(){return this._owner}setGl(e){this._owner.setGL(e)}}class ps{constructor(){this._shaderSets=new z}static getInstance(){return null==si&&(si=new ps),si}static deleteInstance(){si&&(si.release(),si=null)}release(){this.releaseShaderProgram()}setupShaderProgram(e,n,r,i,s,o,a,l,u,c,d,h,f){let g,p,m,_;if(d||en("NoPremultipliedAlpha is not allowed"),0==this._shaderSets.getSize()&&this.generateShaders(),null!=e.getClippingContextBufferForMask()){const v=this._shaderSets.at(Ar.ShaderNames_SetupMask);this.gl.useProgram(v.shaderProgram),this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,n),this.gl.uniform1i(v.samplerTexture0Location,0),null==a.vertex&&(a.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,i,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(v.attributePositionLocation),this.gl.vertexAttribPointer(v.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),null==a.uv&&(a.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(v.attributeTexCoordLocation),this.gl.vertexAttribPointer(v.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0);const y=e.getClippingContextBufferForMask()._layoutChannelNo,C=e.getClippingContextBufferForMask().getClippingManager().getChannelFlagAsColor(y);this.gl.uniform4f(v.uniformChannelFlagLocation,C.R,C.G,C.B,C.A),this.gl.uniformMatrix4fv(v.uniformClipMatrixLocation,!1,e.getClippingContextBufferForMask()._matrixForMask.getArray());const x=e.getClippingContextBufferForMask()._layoutBounds;this.gl.uniform4f(v.uniformBaseColorLocation,2*x.x-1,2*x.y-1,2*x.getRight()-1,2*x.getBottom()-1),g=this.gl.ZERO,p=this.gl.ONE_MINUS_SRC_COLOR,m=this.gl.ZERO,_=this.gl.ONE_MINUS_SRC_ALPHA}else{const v=null!=e.getClippingContextBufferForDraw(),y=v?f?2:1:0;let C=new Ef;switch(u){case _n.CubismBlendMode_Normal:default:C=this._shaderSets.at(Ar.ShaderNames_NormalPremultipliedAlpha+y),g=this.gl.ONE,p=this.gl.ONE_MINUS_SRC_ALPHA,m=this.gl.ONE,_=this.gl.ONE_MINUS_SRC_ALPHA;break;case _n.CubismBlendMode_Additive:C=this._shaderSets.at(Ar.ShaderNames_AddPremultipliedAlpha+y),g=this.gl.ONE,p=this.gl.ONE,m=this.gl.ZERO,_=this.gl.ONE;break;case _n.CubismBlendMode_Multiplicative:C=this._shaderSets.at(Ar.ShaderNames_MultPremultipliedAlpha+y),g=this.gl.DST_COLOR,p=this.gl.ONE_MINUS_SRC_ALPHA,m=this.gl.ZERO,_=this.gl.ONE}if(this.gl.useProgram(C.shaderProgram),null==a.vertex&&(a.vertex=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.vertex),this.gl.bufferData(this.gl.ARRAY_BUFFER,i,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(C.attributePositionLocation),this.gl.vertexAttribPointer(C.attributePositionLocation,2,this.gl.FLOAT,!1,0,0),null==a.uv&&(a.uv=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,a.uv),this.gl.bufferData(this.gl.ARRAY_BUFFER,o,this.gl.DYNAMIC_DRAW),this.gl.enableVertexAttribArray(C.attributeTexCoordLocation),this.gl.vertexAttribPointer(C.attributeTexCoordLocation,2,this.gl.FLOAT,!1,0,0),v){this.gl.activeTexture(this.gl.TEXTURE1);const x=e.getClippingContextBufferForDraw().getClippingManager().getColorBuffer();this.gl.bindTexture(this.gl.TEXTURE_2D,x),this.gl.uniform1i(C.samplerTexture1Location,1),this.gl.uniformMatrix4fv(C.uniformClipMatrixLocation,!1,e.getClippingContextBufferForDraw()._matrixForDraw.getArray());const W=e.getClippingContextBufferForDraw()._layoutChannelNo,Xe=e.getClippingContextBufferForDraw().getClippingManager().getChannelFlagAsColor(W);this.gl.uniform4f(C.uniformChannelFlagLocation,Xe.R,Xe.G,Xe.B,Xe.A)}this.gl.activeTexture(this.gl.TEXTURE0),this.gl.bindTexture(this.gl.TEXTURE_2D,n),this.gl.uniform1i(C.samplerTexture0Location,0),this.gl.uniformMatrix4fv(C.uniformMatrixLocation,!1,h.getArray()),this.gl.uniform4f(C.uniformBaseColorLocation,c.R,c.G,c.B,c.A)}null==a.index&&(a.index=this.gl.createBuffer()),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,a.index),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,s,this.gl.DYNAMIC_DRAW),this.gl.blendFuncSeparate(g,p,m,_)}releaseShaderProgram(){for(let e=0;e<this._shaderSets.getSize();e++)this.gl.deleteProgram(this._shaderSets.at(e).shaderProgram),this._shaderSets.at(e).shaderProgram=0,this._shaderSets.set(e,void 0),this._shaderSets.set(e,null)}generateShaders(){for(let e=0;e<10;e++)this._shaderSets.pushBack(new Ef);this._shaderSets.at(0).shaderProgram=this.loadShaderProgram(oB,aB),this._shaderSets.at(1).shaderProgram=this.loadShaderProgram(lB,uB),this._shaderSets.at(2).shaderProgram=this.loadShaderProgram(Uw,cB),this._shaderSets.at(3).shaderProgram=this.loadShaderProgram(Uw,dB),this._shaderSets.at(4).shaderProgram=this._shaderSets.at(1).shaderProgram,this._shaderSets.at(5).shaderProgram=this._shaderSets.at(2).shaderProgram,this._shaderSets.at(6).shaderProgram=this._shaderSets.at(3).shaderProgram,this._shaderSets.at(7).shaderProgram=this._shaderSets.at(1).shaderProgram,this._shaderSets.at(8).shaderProgram=this._shaderSets.at(2).shaderProgram,this._shaderSets.at(9).shaderProgram=this._shaderSets.at(3).shaderProgram,this._shaderSets.at(0).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram,"a_position"),this._shaderSets.at(0).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(0).shaderProgram,"a_texCoord"),this._shaderSets.at(0).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"s_texture0"),this._shaderSets.at(0).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_clipMatrix"),this._shaderSets.at(0).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_channelFlag"),this._shaderSets.at(0).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(0).shaderProgram,"u_baseColor"),this._shaderSets.at(1).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram,"a_position"),this._shaderSets.at(1).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(1).shaderProgram,"a_texCoord"),this._shaderSets.at(1).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"s_texture0"),this._shaderSets.at(1).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_matrix"),this._shaderSets.at(1).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(1).shaderProgram,"u_baseColor"),this._shaderSets.at(2).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram,"a_position"),this._shaderSets.at(2).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(2).shaderProgram,"a_texCoord"),this._shaderSets.at(2).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"s_texture0"),this._shaderSets.at(2).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"s_texture1"),this._shaderSets.at(2).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_matrix"),this._shaderSets.at(2).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_clipMatrix"),this._shaderSets.at(2).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_channelFlag"),this._shaderSets.at(2).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(2).shaderProgram,"u_baseColor"),this._shaderSets.at(3).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram,"a_position"),this._shaderSets.at(3).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(3).shaderProgram,"a_texCoord"),this._shaderSets.at(3).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"s_texture0"),this._shaderSets.at(3).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"s_texture1"),this._shaderSets.at(3).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_matrix"),this._shaderSets.at(3).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_clipMatrix"),this._shaderSets.at(3).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_channelFlag"),this._shaderSets.at(3).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(3).shaderProgram,"u_baseColor"),this._shaderSets.at(4).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram,"a_position"),this._shaderSets.at(4).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(4).shaderProgram,"a_texCoord"),this._shaderSets.at(4).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"s_texture0"),this._shaderSets.at(4).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_matrix"),this._shaderSets.at(4).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(4).shaderProgram,"u_baseColor"),this._shaderSets.at(5).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram,"a_position"),this._shaderSets.at(5).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(5).shaderProgram,"a_texCoord"),this._shaderSets.at(5).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"s_texture0"),this._shaderSets.at(5).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"s_texture1"),this._shaderSets.at(5).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_matrix"),this._shaderSets.at(5).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_clipMatrix"),this._shaderSets.at(5).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_channelFlag"),this._shaderSets.at(5).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(5).shaderProgram,"u_baseColor"),this._shaderSets.at(6).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram,"a_position"),this._shaderSets.at(6).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(6).shaderProgram,"a_texCoord"),this._shaderSets.at(6).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"s_texture0"),this._shaderSets.at(6).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"s_texture1"),this._shaderSets.at(6).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_matrix"),this._shaderSets.at(6).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_clipMatrix"),this._shaderSets.at(6).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_channelFlag"),this._shaderSets.at(6).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(6).shaderProgram,"u_baseColor"),this._shaderSets.at(7).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram,"a_position"),this._shaderSets.at(7).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(7).shaderProgram,"a_texCoord"),this._shaderSets.at(7).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"s_texture0"),this._shaderSets.at(7).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_matrix"),this._shaderSets.at(7).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(7).shaderProgram,"u_baseColor"),this._shaderSets.at(8).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram,"a_position"),this._shaderSets.at(8).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(8).shaderProgram,"a_texCoord"),this._shaderSets.at(8).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"s_texture0"),this._shaderSets.at(8).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"s_texture1"),this._shaderSets.at(8).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_matrix"),this._shaderSets.at(8).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_clipMatrix"),this._shaderSets.at(8).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_channelFlag"),this._shaderSets.at(8).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(8).shaderProgram,"u_baseColor"),this._shaderSets.at(9).attributePositionLocation=this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram,"a_position"),this._shaderSets.at(9).attributeTexCoordLocation=this.gl.getAttribLocation(this._shaderSets.at(9).shaderProgram,"a_texCoord"),this._shaderSets.at(9).samplerTexture0Location=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"s_texture0"),this._shaderSets.at(9).samplerTexture1Location=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"s_texture1"),this._shaderSets.at(9).uniformMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_matrix"),this._shaderSets.at(9).uniformClipMatrixLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_clipMatrix"),this._shaderSets.at(9).uniformChannelFlagLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_channelFlag"),this._shaderSets.at(9).uniformBaseColorLocation=this.gl.getUniformLocation(this._shaderSets.at(9).shaderProgram,"u_baseColor")}loadShaderProgram(e,n){let r=this.gl.createProgram(),i=this.compileShaderSource(this.gl.VERTEX_SHADER,e);if(!i)return en("Vertex shader compile error!"),0;let s=this.compileShaderSource(this.gl.FRAGMENT_SHADER,n);return s?(this.gl.attachShader(r,i),this.gl.attachShader(r,s),this.gl.linkProgram(r),this.gl.getProgramParameter(r,this.gl.LINK_STATUS)?(this.gl.deleteShader(i),this.gl.deleteShader(s),r):(en("Failed to link program: {0}",r),this.gl.deleteShader(i),i=0,this.gl.deleteShader(s),s=0,r&&(this.gl.deleteProgram(r),r=0),0)):(en("Vertex shader compile error!"),0)}compileShaderSource(e,n){const r=n,i=this.gl.createShader(e);if(this.gl.shaderSource(i,r),this.gl.compileShader(i),!i){const o=this.gl.getShaderInfoLog(i);en("Shader compile log: {0} ",o)}return this.gl.getShaderParameter(i,this.gl.COMPILE_STATUS)?i:(this.gl.deleteShader(i),null)}setGl(e){this.gl=e}}class Ef{}var Ar=(()=>(function(t){t[t.ShaderNames_SetupMask=0]="ShaderNames_SetupMask",t[t.ShaderNames_NormalPremultipliedAlpha=1]="ShaderNames_NormalPremultipliedAlpha",t[t.ShaderNames_NormalMaskedPremultipliedAlpha=2]="ShaderNames_NormalMaskedPremultipliedAlpha",t[t.ShaderNames_NomralMaskedInvertedPremultipliedAlpha=3]="ShaderNames_NomralMaskedInvertedPremultipliedAlpha",t[t.ShaderNames_AddPremultipliedAlpha=4]="ShaderNames_AddPremultipliedAlpha",t[t.ShaderNames_AddMaskedPremultipliedAlpha=5]="ShaderNames_AddMaskedPremultipliedAlpha",t[t.ShaderNames_AddMaskedPremultipliedAlphaInverted=6]="ShaderNames_AddMaskedPremultipliedAlphaInverted",t[t.ShaderNames_MultPremultipliedAlpha=7]="ShaderNames_MultPremultipliedAlpha",t[t.ShaderNames_MultMaskedPremultipliedAlpha=8]="ShaderNames_MultMaskedPremultipliedAlpha",t[t.ShaderNames_MultMaskedPremultipliedAlphaInverted=9]="ShaderNames_MultMaskedPremultipliedAlphaInverted"}(Ar||(Ar={})),Ar))();const oB="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_myPos;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_clipMatrix * a_position;   v_myPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",aB="precision mediump float;varying vec2       v_texCoord;varying vec4       v_myPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;void main(){   float isInside =        step(u_baseColor.x, v_myPos.x/v_myPos.w)       * step(u_baseColor.y, v_myPos.y/v_myPos.w)       * step(v_myPos.x/v_myPos.w, u_baseColor.z)       * step(v_myPos.y/v_myPos.w, u_baseColor.w);   gl_FragColor = u_channelFlag * texture2D(s_texture0, v_texCoord).a * isInside;}",lB="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;uniform mat4       u_matrix;void main(){   gl_Position = u_matrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",Uw="attribute vec4     a_position;attribute vec2     a_texCoord;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform mat4       u_matrix;uniform mat4       u_clipMatrix;void main(){   gl_Position = u_matrix * a_position;   v_clipPos = u_clipMatrix * a_position;   v_texCoord = a_texCoord;   v_texCoord.y = 1.0 - v_texCoord.y;}",uB="precision mediump float;varying vec2       v_texCoord;uniform vec4       u_baseColor;uniform sampler2D  s_texture0;void main(){   gl_FragColor = texture2D(s_texture0 , v_texCoord) * u_baseColor;}",cB="precision mediump float;varying vec2       v_texCoord;varying vec4       v_clipPos;uniform vec4       u_baseColor;uniform vec4       u_channelFlag;uniform sampler2D  s_texture0;uniform sampler2D  s_texture1;void main(){   vec4 col_formask = texture2D(s_texture0 , v_texCoord) * u_baseColor;   vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;   float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;   col_formask = col_formask * maskVal;   gl_FragColor = col_formask;}",dB="precision mediump float;varying vec2 v_texCoord;varying vec4 v_clipPos;uniform sampler2D s_texture0;uniform sampler2D s_texture1;uniform vec4 u_channelFlag;uniform vec4 u_baseColor;void main(){vec4 col_formask = texture2D(s_texture0, v_texCoord) * u_baseColor;vec4 clipMask = (1.0 - texture2D(s_texture1, v_clipPos.xy / v_clipPos.w)) * u_channelFlag;float maskVal = clipMask.r + clipMask.g + clipMask.b + clipMask.a;col_formask = col_formask * (1.0 - maskVal);gl_FragColor = col_formask;}";class bf extends Wl{constructor(){super(),this._clippingContextBufferForMask=null,this._clippingContextBufferForDraw=null,this._clippingManager=new ou,this.firstDraw=!0,this._textures=new vn,this._sortedDrawableIndexList=new z,this._bufferData={vertex:WebGLBuffer=null,uv:WebGLBuffer=null,index:WebGLBuffer=null},this._textures.prepareCapacity(32,!0)}initialize(e){e.isUsingMasking()&&(this._clippingManager=new ou,this._clippingManager.initialize(e,e.getDrawableCount(),e.getDrawableMasks(),e.getDrawableMaskCounts())),this._sortedDrawableIndexList.resize(e.getDrawableCount(),0),super.initialize(e)}bindTexture(e,n){this._textures.setValue(e,n)}getBindedTextures(){return this._textures}setClippingMaskBufferSize(e){this._clippingManager.release(),this._clippingManager=void 0,this._clippingManager=null,this._clippingManager=new ou,this._clippingManager.setClippingMaskBufferSize(e),this._clippingManager.initialize(this.getModel(),this.getModel().getDrawableCount(),this.getModel().getDrawableMasks(),this.getModel().getDrawableMaskCounts())}getClippingMaskBufferSize(){return this._clippingManager.getClippingMaskBufferSize()}release(){this._clippingManager.release(),this._clippingManager=void 0,this._clippingManager=null,this.gl.deleteBuffer(this._bufferData.vertex),this._bufferData.vertex=null,this.gl.deleteBuffer(this._bufferData.uv),this._bufferData.uv=null,this.gl.deleteBuffer(this._bufferData.index),this._bufferData.index=null,this._bufferData=null,this._textures=null}doDrawModel(){null!=this._clippingManager&&(this.preDraw(),this._clippingManager.setupClippingContext(this.getModel(),this)),this.preDraw();const e=this.getModel().getDrawableCount(),n=this.getModel().getDrawableRenderOrders();for(let r=0;r<e;++r)this._sortedDrawableIndexList.set(n[r],r);for(let r=0;r<e;++r){const i=this._sortedDrawableIndexList.at(r);!this.getModel().getDrawableDynamicFlagIsVisible(i)||(this.setClippingContextBufferForDraw(null!=this._clippingManager?this._clippingManager.getClippingContextListForDraw().at(i):null),this.setIsCulling(this.getModel().getDrawableCulling(i)),this.drawMesh(this.getModel().getDrawableTextureIndices(i),this.getModel().getDrawableVertexIndexCount(i),this.getModel().getDrawableVertexCount(i),this.getModel().getDrawableVertexIndices(i),this.getModel().getDrawableVertices(i),this.getModel().getDrawableVertexUvs(i),this.getModel().getDrawableOpacity(i),this.getModel().getDrawableBlendMode(i),this.getModel().getDrawableInvertedMaskBit(i)))}}drawMesh(e,n,r,i,s,o,a,l,u){this.isCulling()?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this.gl.frontFace(this.gl.CCW);const c=this.getModelColor();let d;null==this.getClippingContextBufferForMask()&&(c.A*=a,this.isPremultipliedAlpha()&&(c.R*=c.A,c.G*=c.A,c.B*=c.A)),d=null!=this._textures.getValue(e)?this._textures.getValue(e):null,ps.getInstance().setupShaderProgram(this,d,r,s,i,o,this._bufferData,a,l,c,this.isPremultipliedAlpha(),this.getMvpMatrix(),u),this.gl.drawElements(this.gl.TRIANGLES,n,this.gl.UNSIGNED_SHORT,0),this.gl.useProgram(null),this.setClippingContextBufferForDraw(null),this.setClippingContextBufferForMask(null)}static doStaticRelease(){ps.deleteInstance()}setRenderState(e,n){xf=e,zo=n}preDraw(){this.firstDraw&&(this.firstDraw=!1,this._anisortopy=this.gl.getExtension("EXT_texture_filter_anisotropic")||this.gl.getExtension("WEBKIT_EXT_texture_filter_anisotropic")||this.gl.getExtension("MOZ_EXT_texture_filter_anisotropic")),this.gl.disable(this.gl.SCISSOR_TEST),this.gl.disable(this.gl.STENCIL_TEST),this.gl.disable(this.gl.DEPTH_TEST),this.gl.frontFace(this.gl.CW),this.gl.enable(this.gl.BLEND),this.gl.colorMask(!0,!0,!0,!0),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,null),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,null)}setClippingContextBufferForMask(e){this._clippingContextBufferForMask=e}getClippingContextBufferForMask(){return this._clippingContextBufferForMask}setClippingContextBufferForDraw(e){this._clippingContextBufferForDraw=e}getClippingContextBufferForDraw(){return this._clippingContextBufferForDraw}startUp(e){this.gl=e,this._clippingManager.setGL(e),ps.getInstance().setGl(e)}}var Hw,zw,Gw;Wl.staticRelease=()=>{bf.doStaticRelease()},function(t){t.CubismClippingContext=jw,t.CubismClippingManager_WebGL=ou,t.CubismRenderTextureResource=Vw,t.CubismRenderer_WebGL=bf,t.CubismShaderSet=Ef,t.CubismShader_WebGL=ps,t.ShaderNames=Ar}(Hw||(Hw={}));class $w{constructor(e){this._model=e,this._parameterValues=null,this._parameterMaximumValues=null,this._parameterMinimumValues=null,this._partOpacities=null,this._savedParameters=new z,this._parameterIds=new z,this._drawableIds=new z,this._partIds=new z,this._notExistPartId=new vn,this._notExistParameterId=new vn,this._notExistParameterValues=new vn,this._notExistPartOpacities=new vn}update(){this._model.update(),this._model.drawables.resetDynamicFlags()}getCanvasWidth(){return null==this._model?0:this._model.canvasinfo.CanvasWidth/this._model.canvasinfo.PixelsPerUnit}getCanvasHeight(){return null==this._model?0:this._model.canvasinfo.CanvasHeight/this._model.canvasinfo.PixelsPerUnit}saveParameters(){const e=this._model.parameters.count,n=this._savedParameters.getSize();for(let r=0;r<e;++r)r<n?this._savedParameters.set(r,this._parameterValues[r]):this._savedParameters.pushBack(this._parameterValues[r])}getModel(){return this._model}getPartIndex(e){let n;const r=this._model.parts.count;for(n=0;n<r;++n)if(e==this._partIds.at(n))return n;return this._notExistPartId.isExist(e)?this._notExistPartId.getValue(e):(n=r+this._notExistPartId.getSize(),this._notExistPartId.setValue(e,n),this._notExistPartOpacities.appendKey(n),n)}getPartCount(){return this._model.parts.count}setPartOpacityByIndex(e,n){this._notExistPartOpacities.isExist(e)?this._notExistPartOpacities.setValue(e,n):(Ln(0<=e&&e<this.getPartCount()),this._partOpacities[e]=n)}setPartOpacityById(e,n){const r=this.getPartIndex(e);r<0||this.setPartOpacityByIndex(r,n)}getPartOpacityByIndex(e){return this._notExistPartOpacities.isExist(e)?this._notExistPartOpacities.getValue(e):(Ln(0<=e&&e<this.getPartCount()),this._partOpacities[e])}getPartOpacityById(e){const n=this.getPartIndex(e);return n<0?0:this.getPartOpacityByIndex(n)}getParameterIndex(e){let n;const r=this._model.parameters.count;for(n=0;n<r;++n)if(e==this._parameterIds.at(n))return n;return this._notExistParameterId.isExist(e)?this._notExistParameterId.getValue(e):(n=this._model.parameters.count+this._notExistParameterId.getSize(),this._notExistParameterId.setValue(e,n),this._notExistParameterValues.appendKey(n),n)}getParameterCount(){return this._model.parameters.count}getParameterMaximumValue(e){return this._model.parameters.maximumValues[e]}getParameterMinimumValue(e){return this._model.parameters.minimumValues[e]}getParameterDefaultValue(e){return this._model.parameters.defaultValues[e]}getParameterValueByIndex(e){return this._notExistParameterValues.isExist(e)?this._notExistParameterValues.getValue(e):(Ln(0<=e&&e<this.getParameterCount()),this._parameterValues[e])}getParameterValueById(e){const n=this.getParameterIndex(e);return this.getParameterValueByIndex(n)}setParameterValueByIndex(e,n,r=1){this._notExistParameterValues.isExist(e)?this._notExistParameterValues.setValue(e,1==r?n:this._notExistParameterValues.getValue(e)*(1-r)+n*r):(Ln(0<=e&&e<this.getParameterCount()),this._model.parameters.maximumValues[e]<n&&(n=this._model.parameters.maximumValues[e]),this._model.parameters.minimumValues[e]>n&&(n=this._model.parameters.minimumValues[e]),this._parameterValues[e]=1==r?n:this._parameterValues[e]=this._parameterValues[e]*(1-r)+n*r)}setParameterValueById(e,n,r=1){const i=this.getParameterIndex(e);this.setParameterValueByIndex(i,n,r)}addParameterValueByIndex(e,n,r=1){this.setParameterValueByIndex(e,this.getParameterValueByIndex(e)+n*r)}addParameterValueById(e,n,r=1){const i=this.getParameterIndex(e);this.addParameterValueByIndex(i,n,r)}multiplyParameterValueById(e,n,r=1){const i=this.getParameterIndex(e);this.multiplyParameterValueByIndex(i,n,r)}multiplyParameterValueByIndex(e,n,r=1){this.setParameterValueByIndex(e,this.getParameterValueByIndex(e)*(1+(n-1)*r))}getDrawableIndex(e){const n=this._model.drawables.count;for(let r=0;r<n;++r)if(this._drawableIds.at(r)==e)return r;return-1}getDrawableCount(){return this._model.drawables.count}getDrawableId(e){const n=this._model.drawables.ids;return le.getIdManager().getId(n[e])}getDrawableRenderOrders(){return this._model.drawables.renderOrders}getDrawableTextureIndices(e){return this._model.drawables.textureIndices[e]}getDrawableDynamicFlagVertexPositionsDidChange(e){return Live2DCubismCore.Utils.hasVertexPositionsDidChangeBit(this._model.drawables.dynamicFlags[e])}getDrawableVertexIndexCount(e){return this._model.drawables.indexCounts[e]}getDrawableVertexCount(e){return this._model.drawables.vertexCounts[e]}getDrawableVertices(e){return this.getDrawableVertexPositions(e)}getDrawableVertexIndices(e){return this._model.drawables.indices[e]}getDrawableVertexPositions(e){return this._model.drawables.vertexPositions[e]}getDrawableVertexUvs(e){return this._model.drawables.vertexUvs[e]}getDrawableOpacity(e){return this._model.drawables.opacities[e]}getDrawableCulling(e){return!Live2DCubismCore.Utils.hasIsDoubleSidedBit(this._model.drawables.constantFlags[e])}getDrawableBlendMode(e){const n=this._model.drawables.constantFlags;return Live2DCubismCore.Utils.hasBlendAdditiveBit(n[e])?_n.CubismBlendMode_Additive:Live2DCubismCore.Utils.hasBlendMultiplicativeBit(n[e])?_n.CubismBlendMode_Multiplicative:_n.CubismBlendMode_Normal}getDrawableInvertedMaskBit(e){return Live2DCubismCore.Utils.hasIsInvertedMaskBit(this._model.drawables.constantFlags[e])}getDrawableMasks(){return this._model.drawables.masks}getDrawableMaskCounts(){return this._model.drawables.maskCounts}isUsingMasking(){for(let e=0;e<this._model.drawables.count;++e)if(!(this._model.drawables.maskCounts[e]<=0))return!0;return!1}getDrawableDynamicFlagIsVisible(e){return Live2DCubismCore.Utils.hasIsVisibleBit(this._model.drawables.dynamicFlags[e])}getDrawableDynamicFlagVisibilityDidChange(e){return Live2DCubismCore.Utils.hasVisibilityDidChangeBit(this._model.drawables.dynamicFlags[e])}getDrawableDynamicFlagOpacityDidChange(e){return Live2DCubismCore.Utils.hasOpacityDidChangeBit(this._model.drawables.dynamicFlags[e])}getDrawableDynamicFlagRenderOrderDidChange(e){return Live2DCubismCore.Utils.hasRenderOrderDidChangeBit(this._model.drawables.dynamicFlags[e])}loadParameters(){let e=this._model.parameters.count;const n=this._savedParameters.getSize();e>n&&(e=n);for(let r=0;r<e;++r)this._parameterValues[r]=this._savedParameters.at(r)}initialize(){Ln(this._model),this._parameterValues=this._model.parameters.values,this._partOpacities=this._model.parts.opacities,this._parameterMaximumValues=this._model.parameters.maximumValues,this._parameterMinimumValues=this._model.parameters.minimumValues;{const e=this._model.parameters.ids,n=this._model.parameters.count;this._parameterIds.prepareCapacity(n);for(let r=0;r<n;++r)this._parameterIds.pushBack(le.getIdManager().getId(e[r]))}{const e=this._model.parts.ids,n=this._model.parts.count;this._partIds.prepareCapacity(n);for(let r=0;r<n;++r)this._partIds.pushBack(le.getIdManager().getId(e[r]))}{const e=this._model.drawables.ids,n=this._model.drawables.count;this._drawableIds.prepareCapacity(n);for(let r=0;r<n;++r)this._drawableIds.pushBack(le.getIdManager().getId(e[r]))}}release(){this._model.release(),this._model=null}}!function(t){t.CubismModel=$w}(zw||(zw={}));class au{constructor(e){this._moc=e,this._modelCount=0}static create(e){let n=null;const r=Live2DCubismCore.Moc.fromArrayBuffer(e);return r&&(n=new au(r)),n}static delete(e){e._moc._release(),e._moc=null,e=null}createModel(){let e=null;const n=Live2DCubismCore.Model.fromMoc(this._moc);return n&&(e=new $w(n),e.initialize(),++this._modelCount),e}deleteModel(e){null!=e&&(e.release(),e=null,--this._modelCount)}release(){Ln(0==this._modelCount),this._moc._release(),this._moc=null}}!function(t){t.CubismMoc=au}(Gw||(Gw={}));const If="UserData";class Ww{constructor(e,n){this._json=dt.create(e,n)}release(){dt.delete(this._json)}getUserDataCount(){return this._json.getRoot().getValueByString("Meta").getValueByString("UserDataCount").toInt()}getTotalUserDataSize(){return this._json.getRoot().getValueByString("Meta").getValueByString("TotalUserDataSize").toInt()}getUserDataTargetType(e){return this._json.getRoot().getValueByString(If).getValueByIndex(e).getValueByString("Target").getRawString()}getUserDataId(e){return le.getIdManager().getId(this._json.getRoot().getValueByString(If).getValueByIndex(e).getValueByString("Id").getRawString())}getUserDataValue(e){return this._json.getRoot().getValueByString(If).getValueByIndex(e).getValueByString("Value").getRawString()}}var Yw,Kw,Zw;!function(t){t.CubismModelUserDataJson=Ww}(Yw||(Yw={}));class Xw{}class Go{constructor(){this._userDataNodes=new z,this._artMeshUserDataNode=new z}static create(e,n){const r=new Go;return r.parseUserData(e,n),r}static delete(e){null!=e&&(e.release(),e=null)}getArtMeshUserDatas(){return this._artMeshUserDataNode}parseUserData(e,n){let r=new Ww(e,n);const i=le.getIdManager().getId("ArtMesh"),s=r.getUserDataCount();for(let o=0;o<s;o++){const a=new Xw;a.targetId=r.getUserDataId(o),a.targetType=le.getIdManager().getId(r.getUserDataTargetType(o)),a.value=new Jt(r.getUserDataValue(o)),this._userDataNodes.pushBack(a),a.targetType==i&&this._artMeshUserDataNode.pushBack(a)}r.release(),r=void 0}release(){for(let e=0;e<this._userDataNodes.getSize();++e)this._userDataNodes.set(e,null);this._userDataNodes=null}}!function(t){t.CubismModelUserData=Go,t.CubismModelUserDataNode=Xw}(Kw||(Kw={}));class lu{constructor(){this.loadMotion=(e,n,r,i)=>nu.create(e,n,i),this._moc=null,this._model=null,this._motionManager=null,this._expressionManager=null,this._eyeBlink=null,this._breath=null,this._modelMatrix=null,this._pose=null,this._dragManager=null,this._physics=null,this._modelUserData=null,this._initialized=!1,this._updating=!1,this._opacity=1,this._lipsync=!0,this._lastLipSyncValue=0,this._dragX=0,this._dragY=0,this._accelerationX=0,this._accelerationY=0,this._accelerationZ=0,this._debugMode=!1,this._renderer=null,this._motionManager=new jo,this._motionManager.setEventCallback(lu.cubismDefaultMotionEventCallback,this),this._expressionManager=new jo,this._dragManager=new WD}isInitialized(){return this._initialized}setInitialized(e){this._initialized=e}isUpdating(){return this._updating}setUpdating(e){this._updating=e}setDragging(e,n){this._dragManager.set(e,n)}setAcceleration(e,n,r){this._accelerationX=e,this._accelerationY=n,this._accelerationZ=r}getModelMatrix(){return this._modelMatrix}setOpacity(e){this._opacity=e}getOpacity(){return this._opacity}loadModel(e){this._moc=au.create(e),this._model=this._moc.createModel(),this._model.saveParameters(),null!=this._moc&&null!=this._model?this._modelMatrix=new HD(this._model.getCanvasWidth(),this._model.getCanvasHeight()):en("Failed to CreateModel().")}loadExpression(e,n,r){return Jl.create(e,n)}loadPose(e,n){this._pose=Oo.create(e,n)}loadUserData(e,n){this._modelUserData=Go.create(e,n)}loadPhysics(e,n){this._physics=$o.create(e,n)}isHit(e,n,r){const i=this._model.getDrawableIndex(e);if(i<0)return!1;const s=this._model.getDrawableVertexCount(i),o=this._model.getDrawableVertices(i);let a=o[0],l=o[0],u=o[1],c=o[1];for(let f=1;f<s;++f){const g=o[Er.vertexOffset+f*Er.vertexStep],p=o[Er.vertexOffset+f*Er.vertexStep+1];g<a&&(a=g),g>l&&(l=g),p<u&&(u=p),p>c&&(c=p)}const d=this._modelMatrix.invertTransformX(n),h=this._modelMatrix.invertTransformY(r);return a<=d&&d<=l&&u<=h&&h<=c}getModel(){return this._model}getRenderer(){return this._renderer}createRenderer(){this._renderer&&this.deleteRenderer(),this._renderer=new bf,this._renderer.initialize(this._model)}deleteRenderer(){null!=this._renderer&&(this._renderer.release(),this._renderer=null)}motionEventFired(e){yn("{0}",e.s)}static cubismDefaultMotionEventCallback(e,n,r){r?.motionEventFired(n)}release(){null!=this._motionManager&&(this._motionManager.release(),this._motionManager=null),null!=this._expressionManager&&(this._expressionManager.release(),this._expressionManager=null),null!=this._moc&&(this._moc.deleteModel(this._model),this._moc.release(),this._moc=null),this._modelMatrix=null,Oo.delete(this._pose),ff.delete(this._eyeBlink),Lo.delete(this._breath),this._dragManager=null,$o.delete(this._physics),Go.delete(this._modelUserData),this.deleteRenderer()}}!function(t){t.CubismUserModel=lu}(Zw||(Zw={}));class ce{static loadFileAsBytes(e,n){fetch(e).then(r=>r.arrayBuffer()).then(r=>n(r,r.byteLength))}static getDeltaTime(){return this.s_deltaTime}static updateTime(){this.s_currentFrame=Date.now(),this.s_deltaTime=(this.s_currentFrame-this.s_lastFrame)/1e3,this.s_lastFrame=this.s_currentFrame}static printMessage(e){console.log(e)}}function Qw(t,e,n,r,i,s,o){try{var a=t[s](o),l=a.value}catch(u){return void n(u)}a.done?e(l):Promise.resolve(l).then(r,i)}function Jw(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var s=t.apply(e,n);function o(l){Qw(s,r,i,o,a,"next",l)}function a(l){Qw(s,r,i,o,a,"throw",l)}o(void 0)})}}ce.lastUpdate=Date.now(),ce.s_currentFrame=0,ce.s_lastFrame=0,ce.s_deltaTime=0;let ms=null;class Tf{constructor(){this._loadFiletoBytes=(e,n)=>{this._byteReader._fileByte=e,this._byteReader._fileDataView=new DataView(this._byteReader._fileByte),this._byteReader._fileSize=n},this._pcmData=null,this._userTimeSeconds=0,this._lastRms=0,this._sampleOffset=0,this._wavFileInfo=new yB,this._byteReader=new vB}static getInstance(){return null==ms&&(ms=new Tf),ms}static releaseInstance(){null!=ms&&(ms=void 0),ms=null}update(e){let n,r;if(null==this._pcmData||this._sampleOffset>=this._wavFileInfo._samplesPerChannel)return this._lastRms=0,!1;this._userTimeSeconds+=e,n=Math.floor(this._userTimeSeconds*this._wavFileInfo._samplingRate),n>this._wavFileInfo._samplesPerChannel&&(n=this._wavFileInfo._samplesPerChannel),r=0;for(let i=0;i<this._wavFileInfo._numberOfChannels;i++)for(let s=this._sampleOffset;s<n;s++){const o=this._pcmData[i][s];r+=o*o}return r=Math.sqrt(r/(this._wavFileInfo._numberOfChannels*(n-this._sampleOffset))),this._lastRms=r,this._sampleOffset=n,!0}start(e){this._sampleOffset=0,this._userTimeSeconds=0,this._lastRms=0,this.loadWavFile(e)}getRms(){return this._lastRms}loadWavFile(e){var n=this;let r=!1;null!=this._pcmData&&this.releasePcmData();const i=function(){var o=Jw(function*(){return fetch(e).then(a=>a.arrayBuffer())});return function(){return o.apply(this,arguments)}}();return Jw(function*(){if(n._byteReader._fileByte=yield i(),n._byteReader._fileDataView=new DataView(n._byteReader._fileByte),n._byteReader._fileSize=n._byteReader._fileByte.byteLength,n._byteReader._readOffset=0,null==n._byteReader._fileByte||n._byteReader._fileSize<4)return!1;n._wavFileInfo._fileName=e;try{if(!n._byteReader.getCheckSignature("RIFF"))throw r=!1,new Error('Cannot find Signeture "RIFF".');if(n._byteReader.get32LittleEndian(),!n._byteReader.getCheckSignature("WAVE"))throw r=!1,new Error('Cannot find Signeture "WAVE".');if(!n._byteReader.getCheckSignature("fmt "))throw r=!1,new Error('Cannot find Signeture "fmt".');const o=n._byteReader.get32LittleEndian();if(1!=n._byteReader.get16LittleEndian())throw r=!1,new Error("File is not linear PCM.");for(n._wavFileInfo._numberOfChannels=n._byteReader.get16LittleEndian(),n._wavFileInfo._samplingRate=n._byteReader.get32LittleEndian(),n._byteReader.get32LittleEndian(),n._byteReader.get16LittleEndian(),n._wavFileInfo._bitsPerSample=n._byteReader.get16LittleEndian(),o>16&&(n._byteReader._readOffset+=o-16);!n._byteReader.getCheckSignature("data")&&n._byteReader._readOffset<n._byteReader._fileSize;)n._byteReader._readOffset+=n._byteReader.get32LittleEndian()+4;if(n._byteReader._readOffset>=n._byteReader._fileSize)throw r=!1,new Error('Cannot find "data" Chunk.');{const a=n._byteReader.get32LittleEndian();n._wavFileInfo._samplesPerChannel=8*a/(n._wavFileInfo._bitsPerSample*n._wavFileInfo._numberOfChannels)}n._pcmData=new Array(n._wavFileInfo._numberOfChannels);for(let a=0;a<n._wavFileInfo._numberOfChannels;a++)n._pcmData[a]=new Float32Array(n._wavFileInfo._samplesPerChannel);for(let a=0;a<n._wavFileInfo._samplesPerChannel;a++)for(let l=0;l<n._wavFileInfo._numberOfChannels;l++)n._pcmData[l][a]=n.getPcmSample();r=!0}catch(o){console.log(o)}})(),r}getPcmSample(){let e;switch(this._wavFileInfo._bitsPerSample){case 8:e=this._byteReader.get8()-128,e<<=24;break;case 16:e=this._byteReader.get16LittleEndian()<<16;break;case 24:e=this._byteReader.get24LittleEndian()<<8;break;default:e=0}return e/2147483647}releasePcmData(){for(let e=0;e<this._wavFileInfo._numberOfChannels;e++)delete this._pcmData[e];delete this._pcmData,this._pcmData=null}}class yB{constructor(){this._fileName="",this._numberOfChannels=0,this._bitsPerSample=0,this._samplingRate=0,this._samplesPerChannel=0}}class vB{constructor(){this._fileByte=null,this._fileDataView=null,this._fileSize=0,this._readOffset=0}get8(){const e=this._fileDataView.getUint8(this._readOffset);return this._readOffset++,e}get16LittleEndian(){const e=this._fileDataView.getUint8(this._readOffset+1)<<8|this._fileDataView.getUint8(this._readOffset);return this._readOffset+=2,e}get24LittleEndian(){const e=this._fileDataView.getUint8(this._readOffset+2)<<16|this._fileDataView.getUint8(this._readOffset+1)<<8|this._fileDataView.getUint8(this._readOffset);return this._readOffset+=3,e}get32LittleEndian(){const e=this._fileDataView.getUint8(this._readOffset+3)<<24|this._fileDataView.getUint8(this._readOffset+2)<<16|this._fileDataView.getUint8(this._readOffset+1)<<8|this._fileDataView.getUint8(this._readOffset);return this._readOffset+=4,e}getCheckSignature(e){const n=new Uint8Array(4),r=(new TextEncoder).encode(e);if(4!=e.length)return!1;for(let i=0;i<4;i++)n[i]=this.get8();return n[0]==r[0]&&n[1]==r[1]&&n[2]==r[2]&&n[3]==r[3]}}var se=(()=>(function(t){t[t.LoadAssets=0]="LoadAssets",t[t.LoadModel=1]="LoadModel",t[t.WaitLoadModel=2]="WaitLoadModel",t[t.LoadExpression=3]="LoadExpression",t[t.WaitLoadExpression=4]="WaitLoadExpression",t[t.LoadPhysics=5]="LoadPhysics",t[t.WaitLoadPhysics=6]="WaitLoadPhysics",t[t.LoadPose=7]="LoadPose",t[t.WaitLoadPose=8]="WaitLoadPose",t[t.SetupEyeBlink=9]="SetupEyeBlink",t[t.SetupBreath=10]="SetupBreath",t[t.LoadUserData=11]="LoadUserData",t[t.WaitLoadUserData=12]="WaitLoadUserData",t[t.SetupEyeBlinkIds=13]="SetupEyeBlinkIds",t[t.SetupLipSyncIds=14]="SetupLipSyncIds",t[t.SetupLayout=15]="SetupLayout",t[t.LoadMotion=16]="LoadMotion",t[t.WaitLoadMotion=17]="WaitLoadMotion",t[t.CompleteInitialize=18]="CompleteInitialize",t[t.CompleteSetupModel=19]="CompleteSetupModel",t[t.LoadTexture=20]="LoadTexture",t[t.WaitLoadTexture=21]="WaitLoadTexture",t[t.CompleteSetup=22]="CompleteSetup"}(se||(se={})),se))();class eS extends lu{constructor(e,n=!1){super(),this._showModel=n,this._eventCallback=e,this._isMotionCompleted=!1,this._modelSetting=null,this._modelHomeDir=null,this._userTimeSeconds=0,this._eyeBlinkIds=new z,this._lipSyncIds=new z,this._motions=new vn,this._expressions=new vn,this._hitArea=new z,this._userArea=new z,this._idParamAngleX=le.getIdManager().getId(T.ParamAngleX),this._idParamAngleY=le.getIdManager().getId(T.ParamAngleY),this._idParamAngleZ=le.getIdManager().getId(T.ParamAngleZ),this._idParamEyeBallX=le.getIdManager().getId(T.ParamEyeBallX),this._idParamEyeBallY=le.getIdManager().getId(T.ParamEyeBallY),this._idParamBodyAngleX=le.getIdManager().getId(T.ParamBodyAngleX),this._state=se.LoadAssets,this._expressionCount=0,this._textureCount=0,this._motionCount=0,this._allMotionCount=0,this._wavFileHandler=new Tf,this._enaMotions=new jo,this._enaExpressions=new jo}get isModelShown(){return this._showModel}showModel(){this._showModel=!0}hideModel(){this._showModel=!1}loadAssets(e,n){this._modelHomeDir=e,fetch(`${this._modelHomeDir}${n}`).then(r=>r.arrayBuffer()).then(r=>{const i=new kD(r,r.byteLength);this._state=se.LoadModel,this.setupModel(i)})}setupModel(e){if(this._updating=!0,this._initialized=!1,this._modelSetting=e,""!=this._modelSetting.getModelFileName()){const h=this._modelSetting.getModelFileName();fetch(`${this._modelHomeDir}${h}`).then(f=>f.arrayBuffer()).then(f=>{this.loadModel(f),this._state=se.LoadExpression,n()}),this._state=se.WaitLoadModel}else ce.printMessage("Model data does not exist.");const n=()=>{if(this._modelSetting.getExpressionCount()>0){const h=this._modelSetting.getExpressionCount();for(let f=0;f<h;f++){const g=this._modelSetting.getExpressionName(f),p=this._modelSetting.getExpressionFileName(f);fetch(`${this._modelHomeDir}${p}`).then(m=>m.arrayBuffer()).then(m=>{const _=this.loadExpression(m,m.byteLength,g);null!=this._expressions.getValue(g)&&(hs.delete(this._expressions.getValue(g)),this._expressions.setValue(g,null)),this._expressions.setValue(g,_),this._expressionCount++,this._expressionCount>=h&&(this._state=se.LoadPhysics,r())})}this._state=se.WaitLoadExpression}else this._state=se.LoadPhysics,r()},r=()=>{if(""!=this._modelSetting.getPhysicsFileName()){const h=this._modelSetting.getPhysicsFileName();fetch(`${this._modelHomeDir}${h}`).then(f=>f.arrayBuffer()).then(f=>{this.loadPhysics(f,f.byteLength),this._state=se.LoadPose,i()}),this._state=se.WaitLoadPhysics}else this._state=se.LoadPose,i()},i=()=>{if(""!=this._modelSetting.getPoseFileName()){const h=this._modelSetting.getPoseFileName();fetch(`${this._modelHomeDir}${h}`).then(f=>f.arrayBuffer()).then(f=>{this.loadPose(f,f.byteLength),this._state=se.SetupEyeBlink,s()}),this._state=se.WaitLoadPose}else this._state=se.SetupEyeBlink,s()},s=()=>{this._modelSetting.getEyeBlinkParameterCount()>0&&(this._eyeBlink=ff.create(this._modelSetting),this._state=se.SetupBreath),o()},o=()=>{this._breath=Lo.create();const h=new z;h.pushBack(new ds(this._idParamAngleX,0,15,6.5345,.5)),h.pushBack(new ds(this._idParamAngleY,0,8,3.5345,.5)),h.pushBack(new ds(this._idParamAngleZ,0,10,5.5345,.5)),h.pushBack(new ds(this._idParamBodyAngleX,0,4,15.5345,.5)),h.pushBack(new ds(le.getIdManager().getId(T.ParamBreath),.5,.5,3.2345,1)),this._breath.setParameters(h),this._state=se.LoadUserData,a()},a=()=>{if(""!=this._modelSetting.getUserDataFile()){const h=this._modelSetting.getUserDataFile();fetch(`${this._modelHomeDir}${h}`).then(f=>f.arrayBuffer()).then(f=>{this.loadUserData(f,f.byteLength),this._state=se.SetupEyeBlinkIds,l()}),this._state=se.WaitLoadUserData}else this._state=se.SetupEyeBlinkIds,l()},l=()=>{const h=this._modelSetting.getEyeBlinkParameterCount();for(let f=0;f<h;++f)this._eyeBlinkIds.pushBack(this._modelSetting.getEyeBlinkParameterId(f));this._state=se.SetupLipSyncIds,u()},u=()=>{const h=this._modelSetting.getLipSyncParameterCount();for(let f=0;f<h;++f)this._lipSyncIds.pushBack(this._modelSetting.getLipSyncParameterId(f));this._state=se.SetupLayout,c()},c=()=>{const h=new vn;this._modelSetting.getLayoutMap(h),this._modelMatrix.setupFromLayout(h),this._state=se.LoadMotion,d()},d=()=>{this._state=se.WaitLoadMotion,this._model.saveParameters(),this._allMotionCount=0,this._motionCount=0;const h=[],f=this._modelSetting.getMotionGroupCount();for(let g=0;g<f;g++)h[g]=this._modelSetting.getMotionGroupName(g),this._allMotionCount+=this._modelSetting.getMotionCount(h[g]);for(let g=0;g<f;g++)this.preLoadMotionGroup(h[g]);0==f&&(this._state=se.LoadTexture,this._motionManager.stopAllMotions(),this._updating=!1,this._initialized=!0,this.createRenderer(),this.setupTextures(),this.getRenderer().startUp(M))}}setupTextures(){if(this._state==se.LoadTexture){const n=this._modelSetting.getTextureCount();for(let r=0;r<n;r++){if(""==this._modelSetting.getTextureFileName(r)){console.log("getTextureFileName null");continue}let i=this._modelSetting.getTextureFileName(r);i=this._modelHomeDir+i;const s=o=>{this.getRenderer().bindTexture(r,o.id),this._textureCount++,this._textureCount>=n&&(this._eventCallback(ur.ModelLoaded),this._state=se.CompleteSetup)};de.getInstance().getTextureManager().createTextureFromPngFile(i,!0,s),this.getRenderer().setIsPremultipliedAlpha(!0)}this._state=se.WaitLoadTexture}}reloadRenderer(){this.deleteRenderer(),this.createRenderer(),this.setupTextures()}update(){let e=!1;const n=ce.getDeltaTime();if(this._userTimeSeconds+=n,this._dragManager.update(n),this._dragX=this._dragManager.getX(),this._dragY=this._dragManager.getY(),!this._isMotionCompleted){if(this._state!=se.CompleteSetup)return;if(this._model.loadParameters(),this._motionManager.isFinished()||(e=this._motionManager.updateMotion(this._model,n)),this._model.saveParameters(),this._lipsync){let r=0;this._wavFileHandler.update(n),r=this._wavFileHandler.getRms();for(let i=0;i<this._lipSyncIds.getSize();++i)this._model.addParameterValueById(this._lipSyncIds.at(i),r,.8)}null!=this._pose&&this._pose.updateParameters(this._model,n),null!=this._breath&&this._breath.updateParameters(this._model,n),null!=this._physics&&this._physics.evaluate(this._model,n)}e||null!=this._eyeBlink&&this._eyeBlink.updateParameters(this._model,n),null!=this._expressionManager&&this._expressionManager.updateMotion(this._model,n),this._model.update()}startMotion(e,n,r,i){if(3==r)this._motionManager.setReservePriority(r);else if(!this._motionManager.reserveMotion(r))return this._debugMode&&ce.printMessage("[APP]can't start motion."),ru;const s=this._modelSetting.getMotionFileName(e,n);let a=this._motions.getValue(`${e}_${n}`),l=!1;null==a?fetch(`${this._modelHomeDir}${s}`).then(c=>c.arrayBuffer()).then(c=>{a=this.loadMotion(c,c.byteLength,null,i);let d=this._modelSetting.getMotionFadeInTimeValue(e,n);d>=0&&a.setFadeInTime(d),d=this._modelSetting.getMotionFadeOutTimeValue(e,n),d>=0&&a.setFadeOutTime(d),a.setEffectIds(this._eyeBlinkIds,this._lipSyncIds),l=!0}):a.setFinishedMotionHandler(i);const u=this._modelSetting.getMotionSoundFileName(e,n);if(0!=u.localeCompare("")){let c=u;c=this._modelHomeDir+c,this._wavFileHandler.start(c)}return this._debugMode&&ce.printMessage(`[APP]start motion: [${e}_${n}`),this._motionManager.startMotionPriority(a,l,r)}startRandomMotion(e,n,r){if(0==this._modelSetting.getMotionCount(e))return ru;const i=Math.floor(Math.random()*this._modelSetting.getMotionCount(e));return this.startMotion(e,i,n,r)}setExpression(e){const n=this._expressions.getValue(e);this._debugMode&&ce.printMessage(`[APP]expression: [${e}]`),null!=n?this._expressionManager.startMotionPriority(n,!1,3):this._debugMode&&ce.printMessage(`[APP]expression[${e}] is null`)}setRandomExpression(){if(0==this._expressions.getSize())return;const e=Math.floor(Math.random()*this._expressions.getSize());for(let n=0;n<this._expressions.getSize();n++)if(n==e)return void this.setExpression(this._expressions._keyValues[n].first)}motionEventFired(e){yn("{0} is fired on LAppModel!!",e.s)}hitTest(e,n,r){return this._opacity<1||this._modelSetting.getHitAreasCount(),!1}preLoadMotionGroup(e){for(let n=0;n<this._modelSetting.getMotionCount(e);n++){const r=this._modelSetting.getMotionFileName(e,n),i=`${e}_${n}`;this._debugMode&&ce.printMessage(`[APP]load motion: ${r} => [${i}]`),fetch(`${this._modelHomeDir}${r}`).then(s=>s.arrayBuffer()).then(s=>{const o=this.loadMotion(s,s.byteLength,i);let a=this._modelSetting.getMotionFadeInTimeValue(e,n);a>=0&&o.setFadeInTime(a),a=this._modelSetting.getMotionFadeOutTimeValue(e,n),a>=0&&o.setFadeOutTime(a),o.setEffectIds(this._eyeBlinkIds,this._lipSyncIds),null!=this._motions.getValue(i)&&hs.delete(this._motions.getValue(i)),this._motions.setValue(i,o),this._motionCount++,this._motionCount>=this._allMotionCount&&(this._state=se.LoadTexture,this._motionManager.stopAllMotions(),this._updating=!1,this._initialized=!0,this.createRenderer(),this.setupTextures(),this.getRenderer().startUp(M))})}}releaseMotions(){this._motions.clear()}releaseExpressions(){this._expressions.clear()}doDraw(){if(null==this._model)return;const e=[0,0,ke.width,ke.height];this.getRenderer().setRenderState(Pf,e),this.getRenderer().drawModel()}draw(e){null!=this._model&&this._state==se.CompleteSetup&&(e.multiplyByMatrix(this._modelMatrix),this.getRenderer().setMvpMatrix(e),this.doDraw())}}let _s=null;class Bn{constructor(e){this._finishedMotion=n=>{ce.printMessage("Motion Finished:"),console.log(n)},this._eventCallback=e,this._viewMatrix=new Ne,this._models=new z,this._sceneIndex=0,this.loadModels()}static getInstance(e){return null==_s&&(_s=new Bn(e)),_s}static releaseInstance(){null!=_s&&(_s=void 0),_s=null}getModel(e){return e<this._models.getSize()?this._models.at(e):null}releaseAllModel(){for(let e=0;e<this._models.getSize();e++)this._models.at(e).release(),this._models.set(e,null);this._models.clear()}onDrag(e,n){for(let r=0;r<this._models.getSize();r++){const i=this.getModel(r);i&&i.setDragging(e,n)}}onTap(e,n){ce.printMessage(`[APP]tap point: {x: ${e.toFixed(2)} y: ${n.toFixed(2)}}`);for(let r=0;r<this._models.getSize();r++)this._models.at(r).hitTest("Head",e,n)?(ce.printMessage("[APP]hit area: [Head]"),this._models.at(r).setRandomExpression()):this._models.at(r).hitTest("Body",e,n)&&(ce.printMessage("[APP]hit area: [Body]"),this._models.at(r).startRandomMotion("TapBody",2,this._finishedMotion))}onUpdate(){const{width:e,height:n}=ke,r=this._models.get().filter(i=>i.isModelShown).length;for(let i=0;i<r;++i){const s=new Ne,o=this.getModel(i);o.getModel()&&(o.getModel().getCanvasWidth()>1&&e<n?(o.getModelMatrix().setWidth(2),s.scale(1,e/n)):s.scale(n/e,1),o.getModelMatrix().setWidth(2.05),s.translate(0,-.15),s.translateRelative(0,-.15),2==r?(s.translate(0==i?-.15:.15,-.15),s.translateRelative(0==i?-.15:.15,-.15)):r>2&&(s.translate(.3*i-.3,-.15),s.translateRelative(.3*i-.3,-.15)),null!=this._viewMatrix&&s.multiplyByMatrix(this._viewMatrix)),o.update(),o.draw(s)}}nextScene(){this.changeScene((this._sceneIndex+1)%NL)}changeScene(e){this._sceneIndex=e,ce.printMessage(`[APP]model index: ${this._sceneIndex}`);for(let n=0;n<cs.length;n++){const i=MD+cs[n]+"/";let s=cs[n];s+=".model3.json",this._models.pushBack(new eS(this._eventCallback,!0)),this._models.at(n).loadAssets(i,s)}}loadModels(){for(let e=0;e<3;e++)ce.printMessage(`[APP]model load: ${e}`),this.loadModel(cs[e],e)}loadModel(e,n){const i=MD+e+"/";let s=e;s+=".model3.json",this._models.pushBack(new eS(this._eventCallback,!0)),this._models.at(this._models.getSize()-1).loadAssets(i,s)}setViewMatrix(e){for(let n=0;n<16;n++)this._viewMatrix.getArray()[n]=e.getArray()[n]}}class CB{constructor(){this._textures=new z}release(){for(let e=this._textures.begin();e.notEqual(this._textures.end());e.preIncrement())M.deleteTexture(e.ptr().id);this._textures=null}createTextureFromPngFile(e,n,r){for(let s=this._textures.begin();s.notEqual(this._textures.end());s.preIncrement())if(s.ptr().fileName==e&&s.ptr().usePremultply==n)return s.ptr().img=new Image,s.ptr().img.onload=()=>r(s.ptr()),void(s.ptr().img.src=e);const i=new Image;i.onload=()=>{const s=M.createTexture();M.bindTexture(M.TEXTURE_2D,s),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MIN_FILTER,M.LINEAR_MIPMAP_LINEAR),M.texParameteri(M.TEXTURE_2D,M.TEXTURE_MAG_FILTER,M.LINEAR),n&&M.pixelStorei(M.UNPACK_PREMULTIPLY_ALPHA_WEBGL,1),M.texImage2D(M.TEXTURE_2D,0,M.RGBA,M.RGBA,M.UNSIGNED_BYTE,i),M.generateMipmap(M.TEXTURE_2D),M.bindTexture(M.TEXTURE_2D,null);const o=new DB;null!=o&&(o.fileName=e,o.width=i.width,o.height=i.height,o.id=s,o.img=i,o.usePremultply=n,this._textures.pushBack(o)),r(o)},i.src=e}releaseTextures(){for(let e=0;e<this._textures.getSize();e++)this._textures.set(e,null);this._textures.clear()}releaseTextureByTexture(e){for(let n=0;n<this._textures.getSize();n++)if(this._textures.at(n).id==e){this._textures.set(n,null),this._textures.remove(n);break}}releaseTextureByFilePath(e){for(let n=0;n<this._textures.getSize();n++)if(this._textures.at(n).fileName==e){this._textures.set(n,null),this._textures.remove(n);break}}}class DB{constructor(){this.id=null,this.width=0,this.height=0}}class tS extends Ne{constructor(){super(),this._screenLeft=0,this._screenRight=0,this._screenTop=0,this._screenBottom=0,this._maxLeft=0,this._maxRight=0,this._maxTop=0,this._maxBottom=0,this._maxScale=0,this._minScale=0}adjustTranslate(e,n){this._tr[0]*this._maxLeft+(this._tr[12]+e)>this._screenLeft&&(e=this._screenLeft-this._tr[0]*this._maxLeft-this._tr[12]),this._tr[0]*this._maxRight+(this._tr[12]+e)<this._screenRight&&(e=this._screenRight-this._tr[0]*this._maxRight-this._tr[12]),this._tr[5]*this._maxTop+(this._tr[13]+n)<this._screenTop&&(n=this._screenTop-this._tr[5]*this._maxTop-this._tr[13]),this._tr[5]*this._maxBottom+(this._tr[13]+n)>this._screenBottom&&(n=this._screenBottom-this._tr[5]*this._maxBottom-this._tr[13]);const r=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,e,n,0,1]);Ne.multiply(r,this._tr,this._tr)}adjustScale(e,n,r){const i=this.getMaxScale(),s=this.getMinScale(),o=r*this._tr[0];o<s?this._tr[0]>0&&(r=s/this._tr[0]):o>i&&this._tr[0]>0&&(r=i/this._tr[0]);const a=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,e,n,0,1]),l=new Float32Array([r,0,0,0,0,r,0,0,0,0,1,0,0,0,0,1]),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,-e,-n,0,1]);Ne.multiply(u,this._tr,this._tr),Ne.multiply(l,this._tr,this._tr),Ne.multiply(a,this._tr,this._tr)}setScreenRect(e,n,r,i){this._screenLeft=e,this._screenRight=n,this._screenBottom=r,this._screenTop=i}setMaxScreenRect(e,n,r,i){this._maxLeft=e,this._maxRight=n,this._maxTop=i,this._maxBottom=r}setMaxScale(e){this._maxScale=e}setMinScale(e){this._minScale=e}getMaxScale(){return this._maxScale}getMinScale(){return this._minScale}isMaxScale(){return this.getScaleX()>=this._maxScale}isMinScale(){return this.getScaleX()<=this._minScale}getScreenLeft(){return this._screenLeft}getScreenRight(){return this._screenRight}getScreenBottom(){return this._screenBottom}getScreenTop(){return this._screenTop}getMaxLeft(){return this._maxLeft}getMaxRight(){return this._maxRight}getMaxBottom(){return this._maxBottom}getMaxTop(){return this._maxTop}}var nS;!function(t){t.CubismViewMatrix=tS}(nS||(nS={}));class wB{constructor(){this._startX=0,this._startY=0,this._lastX=0,this._lastY=0,this._lastX1=0,this._lastY1=0,this._lastX2=0,this._lastY2=0,this._lastTouchDistance=0,this._deltaX=0,this._deltaY=0,this._scale=1,this._touchSingle=!1,this._flipAvailable=!1}getCenterX(){return this._lastX}getCenterY(){return this._lastY}getDeltaX(){return this._deltaX}getDeltaY(){return this._deltaY}getStartX(){return this._startX}getStartY(){return this._startY}getScale(){return this._scale}getX(){return this._lastX}getY(){return this._lastY}getX1(){return this._lastX1}getY1(){return this._lastY1}getX2(){return this._lastX2}getY2(){return this._lastY2}isSingleTouch(){return this._touchSingle}isFlickAvailable(){return this._flipAvailable}disableFlick(){this._flipAvailable=!1}touchesBegan(e,n){this._lastX=e,this._lastY=n,this._startX=e,this._startY=n,this._lastTouchDistance=-1,this._flipAvailable=!0,this._touchSingle=!0}touchesMoved(e,n){this._lastX=e,this._lastY=n,this._lastTouchDistance=-1,this._touchSingle=!0}getFlickDistance(){return this.calculateDistance(this._startX,this._startY,this._lastX,this._lastY)}calculateDistance(e,n,r,i){return Math.sqrt((e-r)*(e-r)+(n-i)*(n-i))}calculateMovingAmount(e,n){if(e>0!=n>0)return 0;const r=e>0?1:-1,i=Math.abs(e),s=Math.abs(n);return r*(i<s?i:s)}}class SB{constructor(){this._programId=null,this._back=null,this._gear=null,this._touchManager=new wB,this._deviceToScreen=new Ne,this._viewMatrix=new tS}setEventCallback(e){this._eventCallback=e}initialize(){const{width:e,height:n}=ke,r=e/n,i=-r,s=r;if(this._viewMatrix.setScreenRect(i,s,-1,1),this._viewMatrix.scale(1,1),this._deviceToScreen.loadIdentity(),e>n){const l=Math.abs(s-i);this._deviceToScreen.scaleRelative(l/e,-l/e)}else{const l=Math.abs(2);this._deviceToScreen.scaleRelative(l/n,-l/n)}this._deviceToScreen.translateRelative(.5*-e,.5*-n),this._viewMatrix.setMaxScale(2),this._viewMatrix.setMinScale(.8),this._viewMatrix.setMaxScreenRect(-2,2,-2,2)}release(){this._viewMatrix=null,this._touchManager=null,this._deviceToScreen=null,this._gear.release(),this._gear=null,this._back.release(),this._back=null,M.deleteProgram(this._programId),this._programId=null}render(){M.useProgram(this._programId),M.flush();const e=Bn.getInstance();e.setViewMatrix(this._viewMatrix),e.onUpdate()}initializeSprite(){null==this._programId&&(this._programId=de.getInstance().createShader())}onTouchesBegan(e,n){this._touchManager.touchesBegan(e,n)}onTouchesMoved(e,n){const r=this.transformViewX(this._touchManager.getX()),i=this.transformViewY(this._touchManager.getY());this._touchManager.touchesMoved(e,n),Bn.getInstance().onDrag(r,i)}onTouchesEnded(e,n){const r=Bn.getInstance();r.onDrag(0,0);{const i=this._deviceToScreen.transformX(this._touchManager.getX()),s=this._deviceToScreen.transformY(this._touchManager.getY());r.onTap(i,s)}}transformViewX(e){const n=this._deviceToScreen.transformX(e);return this._viewMatrix.invertTransformX(n)}transformViewY(e){const n=this._deviceToScreen.transformY(e);return this._viewMatrix.invertTransformY(n)}transformScreenX(e){return this._deviceToScreen.transformX(e)}transformScreenY(e){return this._deviceToScreen.transformY(e)}}let ke=null,oi=null,M=null,Pf=null;class de{constructor(){this._captured=!1,this._mouseX=0,this._mouseY=0,this._isEnd=!1,this._cubismOption=new xL,this._view=new SB,this._textureManager=new CB}static getInstance(){return null==oi&&(oi=new de),oi}changeMotion(e,n,r,i){Bn.getInstance().getModel(n).startRandomMotion(e,r??1,()=>{i&&i(),this._eventCallback(ur.MotionCompleted)})}loadModel(e){Bn.getInstance().loadModel(cs[e],e)}releaseModels(){Bn.getInstance().releaseAllModel(),this._eventCallback(ur.ModelReleased)}static releaseInstance(){oi?.release(),oi=null}eventListener(e){this._eventCallback=e,this._view.setEventCallback(e)}initialize(){var e=document.getElementById("l2d-canvas");return ke=document.createElement("canvas"),ke.style.marginTop="5px",this._resizeCanvas(),M=ke.getContext("webgl",{alpha:!0})||ke.getContext("experimental-webgl"),M?(e.appendChild(ke),Pf||(Pf=M.getParameter(M.FRAMEBUFFER_BINDING)),M.enable(M.BLEND),M.blendFunc(M.SRC_ALPHA,M.ONE_MINUS_SRC_ALPHA),"ontouchend"in ke?(ke.ontouchstart=bB,ke.ontouchmove=IB,ke.ontouchend=TB,ke.ontouchcancel=PB):(ke.onmousedown=MB,ke.onmousemove=xB,ke.onmouseup=EB),this._view.initialize(),this.initializeCubism(),!0):(alert("Cannot initialize WebGL. This browser does not support."),M=null,e.innerHTML="This browser does not support the <code>&lt;canvas&gt;</code> element.",!1)}onResize(){this._resizeCanvas(),this._view.initialize(),this._view.initializeSprite()}release(){this._textureManager.release(),this._textureManager=null,this._view.release(),this._view=null,Bn.releaseInstance(),le.dispose()}run(){const e=()=>{null!=oi&&(ce.updateTime(),M.clearColor(0,0,0,0),M.enable(M.DEPTH_TEST),M.depthFunc(M.LEQUAL),M.clear(M.COLOR_BUFFER_BIT|M.DEPTH_BUFFER_BIT),M.clearDepth(1),M.enable(M.BLEND),M.blendFunc(M.SRC_ALPHA,M.ONE_MINUS_SRC_ALPHA),M.enable(M.BLEND),M.blendFunc(M.SRC_ALPHA,M.ONE_MINUS_SRC_ALPHA),this._view.render(),requestAnimationFrame(e))};e()}createShader(){const e=M.createShader(M.VERTEX_SHADER);if(null==e)return ce.printMessage("failed to create vertexShader"),null;M.shaderSource(e,"precision mediump float;attribute vec3 position;attribute vec2 uv;varying vec2 vuv;void main(void){   gl_Position = vec4(position, 1.0);   vuv = uv;}"),M.compileShader(e);const r=M.createShader(M.FRAGMENT_SHADER);if(null==r)return ce.printMessage("failed to create fragmentShader"),null;M.shaderSource(r,"precision mediump float;varying vec2 vuv;uniform sampler2D texture;void main(void){   gl_FragColor = texture2D(texture, vuv);}"),M.compileShader(r);const s=M.createProgram();return M.attachShader(s,e),M.attachShader(s,r),M.deleteShader(e),M.deleteShader(r),M.linkProgram(s),M.useProgram(s),s}getView(){return this._view}getTextureManager(){return this._textureManager}initializeCubism(){this._cubismOption.logFunction=ce.printMessage,this._cubismOption.loggingLevel=VL,le.startUp(this._cubismOption),le.initialize(),Bn.getInstance(this._eventCallback),ce.updateTime(),this._view.initializeSprite()}_resizeCanvas(){ke.width=window.innerWidth,ke.height=window.innerHeight-3.001}}function MB(t){if(!de.getInstance()._view)return void ce.printMessage("view notfound");de.getInstance()._captured=!0;const e=t.pageX,n=t.pageY;de.getInstance()._view.onTouchesBegan(e,n)}function xB(t){if(!de.getInstance()._captured)return;if(!de.getInstance()._view)return void ce.printMessage("view notfound");const e=t.target.getBoundingClientRect(),n=t.clientX-e.left,r=t.clientY-e.top;de.getInstance()._view.onTouchesMoved(n,r)}function EB(t){if(de.getInstance()._captured=!1,!de.getInstance()._view)return void ce.printMessage("view notfound");const e=t.target.getBoundingClientRect(),n=t.clientX-e.left,r=t.clientY-e.top;de.getInstance()._view.onTouchesEnded(n,r)}function bB(t){if(!de.getInstance()._view)return void ce.printMessage("view notfound");de.getInstance()._captured=!0;const e=t.changedTouches[0].pageX,n=t.changedTouches[0].pageY;de.getInstance()._view.onTouchesBegan(e,n)}function IB(t){if(!de.getInstance()._captured)return;if(!de.getInstance()._view)return void ce.printMessage("view notfound");const e=t.target.getBoundingClientRect(),n=t.changedTouches[0].clientX-e.left,r=t.changedTouches[0].clientY-e.top;de.getInstance()._view.onTouchesMoved(n,r)}function TB(t){if(de.getInstance()._captured=!1,!de.getInstance()._view)return void ce.printMessage("view notfound");const e=t.target.getBoundingClientRect(),n=t.changedTouches[0].clientX-e.left,r=t.changedTouches[0].clientY-e.top;de.getInstance()._view.onTouchesEnded(n,r)}function PB(t){if(de.getInstance()._captured=!1,!de.getInstance()._view)return void ce.printMessage("view notfound");const e=t.target.getBoundingClientRect(),n=t.changedTouches[0].clientX-e.left,r=t.changedTouches[0].clientY-e.top;de.getInstance()._view.onTouchesEnded(n,r)}var Af,Rf,rS,Ff,Nf,kf,Lf,Of,iS,Bf,Vf,jf;class rt{}Af=rt,rt.characterName="Akito",rt.portName=`${Af.characterName} (Doru)`,rt.character=wt.Akito,rt.directoryIndex=Af.character,rt.motions=new class RB{constructor(){this.adultTilthead0304="m-adultnormal-tilthead0304"}},rt.expressions=new class AB{constructor(){this.smile1="face_smile_01"}};class Ue{}Rf=Ue,Ue.characterName="An",Ue.portName=`${Rf.characterName} (Sham)`,Ue.character=wt.An,Ue.directoryIndex=Rf.character,Ue.motions=new class NB{constructor(){this.happyForward2="w-happy-forward02",this.coolNodTilthead0102="w-cool-nodtilthead0102"}},Ue.expressions=new class FB{constructor(){this.smile5="face_smile_05",this.sparkling="face_sparkling_01"}};class De{}rS=De,De.characterName="Ena",De.character=wt.Ena,De.directoryIndex=rS.character,De.motions=new class LB{constructor(){this.adultGlad1="w-adult-glad01",this.adultPoseTrouble="w-adult-posetrouble02",this.adultTilthead1="w-adult-tilthead01",this.cuteSmug1="w-cute-smug01",this.coolShakehand1="w-cool-shakehand01"}},De.expressions=new class kB{constructor(){this.smile1="face_smile_01",this.smile5="face_smile_05",this.smile8="face_smile_08",this.Shy2="face_shy_02"}};class xe{}Ff=xe,xe.characterName="Haruka",xe.portName=`${Ff.characterName} (Juicy)`,xe.character=wt.Haruka,xe.directoryIndex=Ff.character,xe.motions=new class BB{constructor(){this.coolBlushed1="w-cool-blushed01",this.coolNod1="w-cool-nod01",this.adultTilthead2="w-adult-tilthead02",this.cuteFidget1="w-cute-fidget01"}},xe.expressions=new class OB{constructor(){this.smile1="face_smile_01",this.shy1="face_shy_01",this.sparkling="face_sparkling_01"}};class we{}Nf=we,we.characterName="Honami",we.portName=`${Nf.characterName} (Emma-Kun)`,we.character=wt.Honami,we.directoryIndex=Nf.character,we.motions=new class jB{constructor(){this.happyGlad1="w-happy-glad01",this.cuteGlad1="w-cute-glad01",this.cuteShy1="w-cute-shy01",this.cutePoseNod1="w-cute-posenod01",this.cuteSmug1="w-cute-smug01"}},we.expressions=new class VB{constructor(){this.sparkling="face_sparkling_01",this.smile1="face_smile_01",this.smile2="face_smile_02",this.closeEye2="face_closeeye_02"}};class me{}kf=me,me.characterName="Kaito",me.portName=`${kf.characterName} (Yuyan)`,me.character=wt.Kaito,me.directoryIndex=kf.character,me.motions=new class HB{constructor(){this.adultTilthead1="m-adult-tilthead01",this.normalShakehand1="m-normal-shakehand01",this.normalSmug1="m-normal-smug01",this.coolPlan1="m-cool-plan01"}},me.expressions=new class UB{constructor(){this.smile1="face_smile_01",this.smile2="face_smile_02",this.smile3="face_smile_03"}};class Sn{}Lf=Sn,Sn.characterName="Kanade",Sn.portName=`${Lf.characterName} (Asra)`,Sn.character=wt.Kanade,Sn.directoryIndex=Lf.character,Sn.motions=new class zB{constructor(){this.animalTiltheadNod0101="w-animal-tiltheadnod0101"}},Sn.expressions=new class $B{constructor(){this.smile1="face_smile_01"}};class B{}Of=B,B.characterName="Luka",B.portName=`${Of.characterName} (Arya)`,B.character=wt.Luka,B.directoryIndex=Of.character,B.motions=new class qB{constructor(){this.coolPoseNod1="w-cool-posenod01",this.adultNod3="w-adult-nod03",this.adultTilthead2="w-adult-tilthead02",this.happyForward1="w-happy-forward01",this.happyShakehand1="w-happy-shakehand01"}},B.expressions=new class GB{constructor(){this.smile1="face_smile_01",this.darkSmile1="face_darksmile_01",this.sparkling="face_sparkling_01",this.sad2="face_sad_02"}};class ne{}iS=ne,ne.characterName="Mafuyu",ne.character=wt.Mafuyu,ne.directoryIndex=iS.character,ne.motions=new class YB{constructor(){this.coolPoseNod3="w-cool-posenod03",this.adultNod1="w-adult-nod01",this.happyPoseNode3="w-happy-posenod03",this.cutePoseTilthead4="w-cute-posetilthead04",this.cuteShakehead2="w-cute-shakehead02",this.cuteShakehead3="w-cute-shakehead03",this.cuteShakehand1="w-cool-shakehand01"}},ne.expressions=new class WB{constructor(){this.normal1="face_normal_01",this.smile1="face_smile_01",this.smile3="face_smile_03",this.smile4="face_smile_04",this.smile5="face_smile_05",this.darkSmile2="face_darksmile_02",this.shy2="face_shy_02"}};class _e{}Bf=_e,_e.characterName="Shizuku",_e.portName=`${Bf.characterName} (Jikan)`,_e.character=wt.Shizuku,_e.directoryIndex=Bf.character,_e.motions=new class KB{constructor(){this.happyTilthead1="w-happy-tilthead01",this.coolTilthead2="w-cool-tilthead02"}},_e.expressions=new class XB{constructor(){this.smile1="face_smile_01",this.smile2="face_smile_02"}};class ee{}Vf=ee,ee.characterName="Touya",ee.portName=`${Vf.characterName} (Sky)`,ee.character=wt.Touya,ee.directoryIndex=Vf.character,ee.motions=new class QB{constructor(){this.adultTilthead1="m-adult-tilthead01",this.adultTilthead0304="m-adultnormal-tilthead0304",this.coolTilthead1="m-cool-tilthead01",this.coolTrouble1="m-cool-trouble01",this.coolThink2="m-cool-think02"}},ee.expressions=new class ZB{constructor(){this.smile1="face_smile_01",this.smile3="face_smile_03",this.normal1="face_normal_01",this.sad2="face_sad_02"}};class Mt{}jf=Mt,Mt.characterName="Tsukasa",Mt.portName=`${jf.characterName} (Bene)`,Mt.character=wt.Tsukasa,Mt.directoryIndex=jf.character,Mt.motions=new class eV{constructor(){this.adultTilthead2="m-adult-tilthead02",this.lookup1="m-tsukasa-lookup01",this.adultTilthead1="m-adult-tilthead01"}},Mt.expressions=new class JB{constructor(){this.smile2="face_smile_02",this.smile6="face_smile_06",this.sad1="face_sad_01"}};class re{constructor({page:e,characterName:n,dialog:r,modelMotion:i,changeModels:s,modalContent:o}){this.currentDialog="",this._page=e,this.characterName=n,this._dialogArray=Array.from(r),this._dialogString=r,this._motion=i,this._changeModels=s,this._modalContent=o}get length(){return this._dialogArray.length}get fullDialog(){return this._dialogString}get page(){return this._page}get motionLength(){return this._motion.length}get hasChangeModels(){return null!=this._changeModels&&this._changeModels.length>0}get hasModalContents(){return null!=this._modalContent}get changeModelLength(){return this._changeModels?this._changeModels.length:0}getDialogChar(e){return this._dialogArray[e]}getModalContents(){return this._modalContent}runMotion(e){this._motion&&this._motion.length>0&&(e?this._motion[e].run():this._motion.filter(r=>!r.hasTriggeredText).forEach(r=>r.run()))}updateModels(){if(this.hasChangeModels){const e=de.getInstance();e.releaseModels(),this._changeModels.forEach(n=>{e.loadModel(n)})}}dialogOnChange(){if(this._motion&&this._motion.filter(e=>e.hasTriggeredText).length>0){const e=this._motion.filter(n=>this.currentDialog.includes(n.triggeredText));if(e.length>0)for(let n=0;n<e.length;n++)e[n].run()}}}class ai{constructor({title:e,isImage:n=!0,isEmbed:r=!1,isPortrait:i,link:s}){this._modalTitle=e,this._isImage=n&&!r,this._isEmbed=r,this._isPortrait=i,this._link=s}get title(){return this._modalTitle}get isImage(){return this._isImage}get isEmbed(){return this._isEmbed}get isPortrait(){return this._isPortrait}get link(){return this._link}buildEmbed(e,n=!0){const r=document.createElement("iframe");return r.src=this.link,n&&(r.style.display="none"),e.append(r),r}buildImage(e,n=!0){const r=document.createElement("img");return r.src=this.link,n&&(r.style.display="none"),e.append(r),r}}class b{constructor({index:e=0,character:n,motion:r,expression:i,triggeredText:s}){this._index=e,this._character=n,this._motion=r,this._expression=i,this._triggeredText=s,this._l2dDelegate=de.getInstance()}get hasTriggeredText(){return null!=this._triggeredText}get triggeredText(){return this._triggeredText}run(e){this.hasTriggeredText&&e?e.includes(this._triggeredText)&&this._runMotion():this._runMotion()}_runMotion(){this._l2dDelegate.changeMotion(this._expression,this._index??this._character,3),this._l2dDelegate.changeMotion(this._motion,this._index??this._character,3)}}class sS{static getGreeting(e){const n=this._greetings.filter(r=>r.greetingId==e);return n.length>0?n[0]:null}}function nV(t,e){1&t&&function L_(t,e=0,n){const r=D(),i=te(),s=Ni(i,22+t,16,null,n||null);null===s.projection&&(s.projection=e),zu(),64!=(64&s.flags)&&function $E(t,e,n){Jp(e[H],0,e,n,Hp(t,n,e),Wp(n.parent||e[6],n,e))}(i,r,s)}(0,0,["*ngIf","!hasModalContents"])}function rV(t,e){1&t&&ut(0,"div",11)}sS._greetings=[new class tV{constructor(){this.dialogs=[],this.greetingId="intro",this._initDialog()}getDialog(e){return this.dialogs.filter(n=>n.page==e)[0]}_initDialog(){this.dialogs.push(new re({page:1,characterName:"Everyone",dialog:"Happy Birthday Akari!!!",modelMotion:[new b({index:0,character:De.character,motion:De.motions.adultGlad1,expression:De.expressions.smile1}),new b({index:1,character:B.character,motion:B.motions.coolPoseNod1,expression:B.expressions.smile1}),new b({index:2,character:ne.character,motion:ne.motions.coolPoseNod3,expression:ne.expressions.smile1})]})),this.dialogs.push(new re({page:2,characterName:De.characterName,dialog:"It's our first time celebrating Akari's birthday together.",modelMotion:[new b({index:0,character:De.character,motion:De.motions.adultTilthead1,expression:De.expressions.smile5}),new b({index:1,character:B.character,motion:B.motions.adultNod3,expression:B.expressions.sparkling}),new b({index:2,character:ne.character,motion:ne.motions.adultNod1,expression:ne.expressions.smile3})]})),this.dialogs.push(new re({page:3,characterName:B.characterName,dialog:"Yeah, It's kind of sad that we didn't met Akari back then.",modelMotion:[new b({index:1,character:B.character,motion:B.motions.adultTilthead2,expression:B.expressions.sad2})]})),this.dialogs.push(new re({page:4,characterName:ne.characterName,dialog:"By the way, Honami told me the other day that she was about to cry when she didn't get my card. Fufu",modelMotion:[new b({index:0,character:De.character,motion:De.motions.cuteSmug1,expression:De.expressions.smile8}),new b({index:1,character:B.character,motion:B.motions.happyForward1,expression:B.expressions.darkSmile1}),new b({index:2,character:ne.character,motion:ne.motions.happyPoseNode3,expression:ne.expressions.darkSmile2})]})),this.dialogs.push(new re({page:5,characterName:ne.characterName,dialog:"I hope you will get my card on your birthday. Why don't you\n        try to pull right now Akari? Hehehe",modelMotion:[new b({index:2,character:ne.character,motion:ne.motions.cutePoseTilthead4,expression:ne.expressions.smile4}),new b({index:2,character:ne.character,motion:ne.motions.cuteShakehead3,expression:ne.expressions.smile5,triggeredText:"pull"})]})),this.dialogs.push(new re({page:6,characterName:B.characterName,dialog:"Oh. Everyone is here!",modelMotion:[new b({index:0,character:De.character,motion:De.motions.coolShakehand1,expression:De.expressions.smile1}),new b({index:1,character:B.character,motion:B.motions.happyShakehand1,expression:B.expressions.sparkling}),new b({index:2,character:ne.character,motion:ne.motions.cuteShakehand1,expression:ne.expressions.shy2})]})),this.dialogs.push(new re({page:7,characterName:"Everyone",dialog:"Happy Birthday Akari!!",changeModels:[xe.character,Ue.character,we.character],modelMotion:[new b({index:0,character:xe.character,motion:xe.motions.coolBlushed1,expression:xe.expressions.sparkling}),new b({index:1,character:Ue.character,motion:Ue.motions.happyForward2,expression:Ue.expressions.sparkling}),new b({index:2,character:we.character,motion:we.motions.happyGlad1,expression:we.expressions.sparkling})]})),this.dialogs.push(new re({page:8,characterName:"Everyone",dialog:"Happy Birthday Akari!!",changeModels:[rt.character,ee.character,Mt.character],modelMotion:[new b({index:0,character:rt.character,motion:rt.motions.adultTilthead0304,expression:rt.expressions.smile1}),new b({index:1,character:ee.character,motion:ee.motions.adultTilthead1,expression:ee.expressions.smile1}),new b({index:2,character:Mt.character,motion:Mt.motions.adultTilthead2,expression:Mt.expressions.smile2})]})),this.dialogs.push(new re({page:9,characterName:"Everyone",dialog:"Happy Birthday Akari!!",changeModels:[Sn.character,me.character,_e.character],modelMotion:[new b({index:0,character:Sn.character,motion:Sn.motions.animalTiltheadNod0101,expression:Sn.expressions.smile1}),new b({index:1,character:me.character,motion:me.motions.adultTilthead1,expression:me.expressions.smile2}),new b({index:2,character:_e.character,motion:_e.motions.happyTilthead1,expression:_e.expressions.smile1})]})),this.dialogs.push(new re({page:10,characterName:B.characterName,dialog:"Since everyone is here, why don't we read our greetings to\n        Akari? then I will start first.",changeModels:[B.character],modelMotion:[new b({index:0,character:B.character,motion:B.motions.adultNod3,expression:B.expressions.smile1})]})),this.dialogs.push(new re({page:11,characterName:B.portName,dialog:'"Are you enjoying your day so far? Know this, superstar\n        A wonderful day still awaits you Right now is a grand moment for you\n        I wish you a great day and happy birthday" - Arya',modelMotion:[new b({character:B.character,motion:B.motions.adultTilthead2,expression:B.expressions.smile1})]})),this.dialogs.push(new re({page:12,characterName:B.characterName,dialog:"I'm done reading mine. Who's next?",modelMotion:[new b({character:B.character,motion:B.motions.coolPoseNod1,expression:B.expressions.smile1})]})),this.dialogs.push(new re({page:13,characterName:me.characterName,dialog:"Me.",changeModels:[me.character],modelMotion:[new b({character:me.character,motion:me.motions.normalShakehand1,expression:me.expressions.smile3})]})),this.dialogs.push(new re({page:14,characterName:me.portName,dialog:'"Happy Birthday Akariiiiiiiiin. Sana maging happy ang\n        araw mo today at wag ka pa stress sa work. Abusuhin ang VL\n        if ma pwede gashaahs chz" - Yuyan',modelMotion:[new b({character:me.character,motion:me.motions.normalSmug1,expression:me.expressions.smile1}),new b({character:me.character,motion:me.motions.adultTilthead1,expression:me.expressions.smile3,triggeredText:"Abusuhin"})]})),this.dialogs.push(new re({page:15,characterName:me.characterName,dialog:"That's all.",modelMotion:[new b({character:me.character,motion:me.motions.adultTilthead1,expression:me.expressions.smile1})]})),this.dialogs.push(new re({page:16,characterName:xe.characterName,dialog:"Then I'm next.",changeModels:[xe.character],modelMotion:[new b({character:xe.character,motion:xe.motions.coolBlushed1,expression:xe.expressions.smile1})]})),this.dialogs.push(new re({page:17,characterName:xe.portName,dialog:"Happy Birthday Akari. *Shows you a birthday card and\n        an art*",modelMotion:[new b({character:xe.character,motion:xe.motions.cuteFidget1,expression:xe.expressions.shy1})],modalContent:[new ai({title:"Juicy",isPortrait:!0,link:"assets/img/greetings/juicy/greeting.png"}),new ai({title:"Juicy",isPortrait:!1,link:"assets/img/greetings/juicy/art.png"})]})),this.dialogs.push(new re({page:18,characterName:xe.characterName,dialog:"I'm done.",modelMotion:[new b({character:xe.character,motion:xe.motions.coolNod1,expression:xe.expressions.smile1})]})),this.dialogs.push(new re({page:19,characterName:Ue.portName,dialog:'I\'m next. "Hallo ate Koharu my project sekai buddy!! Happy happy birthday!!!\n        I wuv u!!! Sana ay mag enjoy k sa iyong kaarawan!!!!" - Sham. *Shows you an art*',changeModels:[Ue.character],modelMotion:[new b({character:Ue.character,motion:Ue.motions.coolNodTilthead0102,expression:Ue.expressions.smile5})],modalContent:[new ai({title:"Sham",isPortrait:!0,link:"assets/img/greetings/sham/art.png"})]})),this.dialogs.push(new re({page:20,characterName:Ue.characterName,dialog:"I'm done.",modelMotion:[new b({character:Ue.character,motion:Ue.motions.happyForward2,expression:Ue.expressions.smile5})]})),this.dialogs.push(new re({page:21,characterName:ee.portName,dialog:"Oh It's my turn. \"Happy Birthday Akari! Thanks for being such a good friend.\n        Palagi kang nandyan para makinig sa mga problema ko at palagi mo akong sinasamahan sa mga laro. ",changeModels:[ee.character],modelMotion:[new b({character:ee.character,motion:ee.motions.coolTilthead1,expression:ee.expressions.normal1}),new b({character:ee.character,motion:ee.motions.adultTilthead0304,expression:ee.expressions.smile1,triggeredText:"Palagi kang"})]})),this.dialogs.push(new re({page:22,characterName:ee.portName,dialog:"Thank you kasi palagi mong sinasabayan mga trip ko at mga plans ko katulad nung sa party natin sa Port.\n        Wish ko na sana mas alagaan mo na sarili mo.",modelMotion:[new b({character:ee.character,motion:ee.motions.coolThink2,expression:ee.expressions.smile3})]})),this.dialogs.push(new re({page:23,characterName:ee.portName,dialog:"Nakakabahala kayo palagi sa Port pag may nagkakasakit dahil sa kakapuyat niyo or dahil\n        hindi kayo kumakain nang maayos. Wag masyadong matigas ang ulo!",modelMotion:[new b({character:ee.character,motion:ee.motions.coolTrouble1,expression:ee.expressions.sad2})]})),this.dialogs.push(new re({page:24,characterName:ee.portName,dialog:'Enjoy your day! More birthdays and more games to come. God Bless! Lablab!" - From your Anghel Friend.\n        *Shows you a video from Sky*',modelMotion:[new b({character:ee.character,motion:ee.motions.adultTilthead1,expression:ee.expressions.smile1})],modalContent:[new ai({title:"Sky",isPortrait:!1,isEmbed:!0,link:"https://drive.google.com/file/d/15mwpgUyylwdwtIpixTsooU7bKiKvXJ6x/preview"})]})),this.dialogs.push(new re({page:25,characterName:ee.characterName,dialog:"That's all.",modelMotion:[new b({character:ee.character,motion:ee.motions.coolTilthead1,expression:ee.expressions.smile3})]})),this.dialogs.push(new re({page:26,characterName:_e.portName,dialog:'My turn. "Happy birthday Akarin!! Sana ay mabuhay ka pa nang matagal and enjoy your life to the fullest!\n       alam kong super bait mo kaya you deserve all the good things in life and',changeModels:[_e.character],modelMotion:[new b({character:_e.character,motion:_e.motions.happyTilthead1,expression:_e.expressions.smile1}),new b({character:_e.character,motion:_e.motions.coolTilthead2,expression:_e.expressions.smile2,triggeredText:"alam kong"})]})),this.dialogs.push(new re({page:27,characterName:_e.portName,dialog:"hope that never a bad day approach you though it's impossible but I hope the world will be always gentle to you.",modelMotion:[new b({character:_e.character,motion:_e.motions.happyTilthead1,expression:_e.expressions.smile1})]})),this.dialogs.push(new re({page:28,characterName:_e.portName,dialog:' Enjoy your day and always take care of yourself <3 I love you! And always know you have me\n        and Port Caf\xe9 always." - Jikan. *Shows you a picture of both you and song*',modelMotion:[new b({character:_e.character,motion:_e.motions.coolTilthead2,expression:_e.expressions.smile1})],modalContent:[new ai({title:"Jikan",isPortrait:!1,link:"assets/img/greetings/jikan/genshin.png"}),new ai({title:"Jikan",isPortrait:!1,isEmbed:!0,link:"https://drive.google.com/file/d/1-H6liL_fORi_ZxZ0NT9IqpFv7ZcOGvRk/preview"})]})),this.dialogs.push(new re({page:29,characterName:rt.portName,dialog:"Oh, It's my turn. Happy Birthday Akarin! *Shows you a greeting picture*",changeModels:[rt.character],modelMotion:[new b({character:rt.character,motion:rt.motions.adultTilthead0304,expression:rt.expressions.smile1})],modalContent:[new ai({title:"Doru",isPortrait:!1,link:"assets/img/greetings/doru/greeting.jpg"})]})),this.dialogs.push(new re({page:30,characterName:rt.portName,dialog:'"Happy birthday AKARIN!!! Hope na makuha mo lahat ng mga gusto mo sa buhay pati si SUI-CHAN XDDDD!\n        and MBTC! Greet muna ngayon ha! bawi ako pag di na busy" - Pogi pero Gwapo (Bene)',changeModels:[Mt.character],modelMotion:[new b({character:Mt.character,motion:Mt.motions.lookup1,expression:Mt.expressions.smile6})]})),this.dialogs.push(new re({page:31,characterName:we.portName,dialog:"I'm last. \"Happy Birthday Akari!!! Sana ay masaya ka sa birthday mo. Pasensya kung kulang2x features\n        ng Project Akari: Birthday Stage! HAHAHA Ito lang nakayanan ni Emma xD.",changeModels:[we.character],modelMotion:[new b({character:we.character,motion:we.motions.cuteGlad1,expression:we.expressions.smile2}),new b({character:we.character,motion:we.motions.cuteShy1,expression:we.expressions.smile1,triggeredText:"Stage!"})]})),this.dialogs.push(new re({page:32,characterName:we.portName,dialog:'Sana ay makuha mo mga gusto mo sa buhay at si Ena Hihihi. Stay Healthy ka palagi kung hindi\n        matatalo na kita sa project sekai at kukunin ko trono mo xD" - Emma',modelMotion:[new b({character:we.character,motion:we.motions.cutePoseNod1,expression:we.expressions.sparkling}),new b({character:we.character,motion:we.motions.cuteSmug1,expression:we.expressions.closeEye2,triggeredText:"matatalo"})]})),this.dialogs.push(new re({page:33,characterName:B.characterName,dialog:"I think Honami was the last one. Happy Birthday Akari and Enjoy your day. Good Bye!",changeModels:[De.character,B.character,ne.character],modelMotion:[new b({index:0,character:De.character,motion:De.motions.adultGlad1,expression:De.expressions.smile1}),new b({index:1,character:B.character,motion:B.motions.coolPoseNod1,expression:B.expressions.smile1}),new b({index:2,character:ne.character,motion:ne.motions.coolPoseNod3,expression:ne.expressions.smile1}),new b({index:0,character:De.character,motion:De.motions.coolShakehand1,expression:De.expressions.smile1,triggeredText:"Good Bye"}),new b({index:1,character:B.character,motion:B.motions.happyShakehand1,expression:B.expressions.smile1,triggeredText:"Good Bye"}),new b({index:2,character:ne.character,motion:ne.motions.cuteShakehand1,expression:ne.expressions.smile1,triggeredText:"Good Bye"})]}))}}];const iV=["*"];let sV=(()=>{class t{constructor(){this.hasModalContents=!1,this.hidePrevBtn=!0,this.hideNextBtn=!1,this.title="",this._elements=[],this._currentIndex=0,this.modalContents=[],this.onClose=new ct}ngOnInit(){this.hasModalContents=!0,console.log("onInit = "+this.modalContents.length),this._renderContents()}ngOnChanges(n){n.modalContents.currentValue.length!=this.modalContents.length&&(this.modalContents=n.modalContents.currentValue,this.hasModalContents=!0,console.log("onChanges = "+this.modalContents.length),this._renderContents())}_renderContents(){this._currentIndex=0,this._elements=[],this.hideNextBtn=1==this.modalContents.length,this._changeContainerOrient(this.modalContents[this._currentIndex].isPortrait),setTimeout(()=>{const n=document.getElementById("modalContentElem");this.title=this.modalContents[0].title,this.modalContents.forEach((r,i)=>{r.isImage?this._elements.push(r.buildImage(n,0!=i)):r.isEmbed&&this._elements.push(r.buildEmbed(n,0!=i))})},200)}_changeContainerOrient(n){const i=document.getElementById("modalContainerId").classList;i.contains("portrait")&&!n?i.remove("portrait"):n&&i.add("portrait")}modalOnPrev(){this._elements[this._currentIndex--].style.display="none",this._changeContainerOrient(this.modalContents[this._currentIndex].isPortrait),this._elements[this._currentIndex].style.display="block",this.hidePrevBtn=0==this._currentIndex,this.hideNextBtn=!1,this.onPrev&&this.onPrev()}modalOnNext(){this._elements[this._currentIndex++].style.display="none",this._changeContainerOrient(this.modalContents[this._currentIndex].isPortrait),this._elements[this._currentIndex].style.display="block",this.hidePrevBtn=0==this._currentIndex,this.hideNextBtn=this.modalContents.length==this._currentIndex+1,this.onNext&&this.onNext()}modalOnClose(){this.onClose.emit()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=zn({type:t,selectors:[["app-modal"]],inputs:{modalContents:"modalContents",onPrev:"onPrev",onNext:"onNext"},outputs:{onClose:"onClose"},features:[Gn],ngContentSelectors:iV,decls:13,vars:5,consts:[[1,"menu-modal"],["id","modalContainerId",1,"menu-modal-container","portrait"],[1,"menu-modal-header"],[1,"menu-modal-header-box"],[1,"menu-modal-header-box","right"],[1,"menu-modal-body"],[1,"menu-model-arrow","left",3,"hidden","click"],[4,"ngIf"],["id","modalContentElem","class","app-modal-contents",4,"ngIf"],[1,"menu-model-arrow","right",3,"hidden","click"],[1,"menu-model-btn",3,"click"],["id","modalContentElem",1,"app-modal-contents"]],template:function(n,r){1&n&&(function k_(t){const e=D()[16][6];if(!e.projection){const r=e.projection=Ns(t?t.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){const o=t?zI(s,t):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}(),Qe(0,"div",0)(1,"div",1)(2,"div",2),ut(3,"div",3),yr(4),ut(5,"div",4),yt(),Qe(6,"div",5)(7,"div",6),er("click",function(){return r.modalOnPrev()}),yt(),Jn(8,nV,1,0,"ng-content",7),Jn(9,rV,1,0,"div",8),Qe(10,"div",9),er("click",function(){return r.modalOnNext()}),yt()(),Qe(11,"div",10),er("click",function(){return r.modalOnClose()}),yr(12,"Close"),yt()()()),2&n&&(_t(4),Wi(" ",r.title," "),_t(3),et("hidden",r.hidePrevBtn),_t(1),et("ngIf",!r.hasModalContents),_t(1),et("ngIf",r.hasModalContents),_t(1),et("hidden",r.hideNextBtn))},dependencies:[go],styles:['.menu-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;z-index:5;width:100vw;height:100vh;display:flex;justify-content:center;align-items:center;font-size:20px;font-weight:500;color:#fff;background-color:#0000007a}.menu-modal-container[_ngcontent-%COMP%]{position:relative;background-color:#fff;width:50%;height:60%;border-radius:20px}.menu-modal-container.portrait[_ngcontent-%COMP%]{width:40%;height:80%;margin-top:-5%}.menu-modal-header[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:55px;background-color:#0cb;border-top-left-radius:20px;border-top-right-radius:20px;display:flex;justify-content:center;align-items:center}.menu-modal-header-box[_ngcontent-%COMP%]{position:absolute;top:35%;left:3%;height:20px;width:20px;background-color:#0fd;transform:rotate(44deg)}.menu-modal-header-box.right[_ngcontent-%COMP%]{right:3%;left:unset}.menu-modal-header-box[_ngcontent-%COMP%]:after{position:absolute;top:-15px;left:-4px;font-size:30px;font-weight:700;color:#0cb;margin-left:10px;content:"."}.menu-modal-body[_ngcontent-%COMP%]{position:relative;padding-top:55px;width:100%;height:100%}.menu-model-arrow[_ngcontent-%COMP%]{cursor:pointer;animation:moveLeft 1s infinite;position:absolute;z-index:5;background-image:url(Arrow.0b427bc737ab89bb.png);background-size:70px 70px;height:70px;width:70px}.menu-model-arrow.left[_ngcontent-%COMP%]{animation:moveLeft 1s infinite;top:43%;left:5px}.menu-model-arrow.right[_ngcontent-%COMP%]{animation:moveRight 1s infinite;top:43%;right:5px}.menu-model-footer[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%}.menu-model-btn[_ngcontent-%COMP%]{position:absolute;bottom:10px;left:41%;cursor:pointer;padding:8px 30px;border-radius:10px;color:#000;border:1px solid #676688;border-bottom:2px solid #676688;background-color:#fff}@keyframes moveLeft{0%{transform:translate(0)}50%{transform:translate(-5px)}to{transform:translate(0)}}@keyframes moveRight{0%{transform:translate(0) rotate(180deg)}50%{transform:translate(5px) rotate(180deg)}to{transform:translate(0) rotate(180deg)}}']}),t})();function oV(t,e){if(1&t){const n=function T_(){return D()}();Qe(0,"app-modal",7),er("onClose",function(){return function Rg(t){return O.lFrame.contextLView=t,t[8]}(n),function Fg(t){return O.lFrame.contextLView=null,t}(Ka().modalOnClose())}),yt()}2&t&&et("modalContents",Ka().dialog.getModalContents())}let aV=(()=>{class t{constructor(){this.isShowModal=!1,this._isDialogCompleted=!1,this._timeouts=[],this._modalTimeouts=[],this._page=1,this._hasModalShown=!1}ngOnChanges(n){this.dialog&&this.dialog.hasChangeModels&&n.modelLoaded.currentValue==this.dialog.changeModelLength&&this.dialog.runMotion()}ngOnInit(){this.dialog=this.greeting.getDialog(this._page++),this.startDialog()}_showModal(n){this.isShowModal=n}startDialog(){for(;this._timeouts.length;)clearTimeout(this._timeouts.pop());for(;this._modalTimeouts.length;)clearTimeout(this._modalTimeouts.pop());this._hasModalShown=!this.dialog.hasModalContents,this._isDialogCompleted&&(this._isDialogCompleted=!1),this.dialog.hasChangeModels||this.dialog.runMotion();for(let n=0;n<this.dialog.length;n++)this._timeouts.push(setTimeout(()=>{this.dialog.currentDialog+=this.dialog.getDialogChar(n),this.dialog.dialogOnChange(),this.dialog.length-1==n&&(this._modalTimeouts.push(setTimeout(()=>{this.dialog.hasModalContents&&this._showModal(!0)},1300)),this._isDialogCompleted=!0)},20*n))}dialogOnClick(){if(this._isDialogCompleted)this._hasModalShown&&this.greeting.dialogs.length!=this._page-1&&(this.dialog=this.greeting.getDialog(this._page++),this.dialog.updateModels(),this.dialog&&this.startDialog());else{for(;this._timeouts.length;)clearTimeout(this._timeouts.pop());const n=this.dialog.motionLength;n>1&&this.dialog.runMotion(n-1),this._isDialogCompleted=!0,this.dialog.currentDialog=this.dialog.fullDialog,this._modalTimeouts.push(setTimeout(()=>{this.dialog.hasModalContents&&this._showModal(!0)},1300))}}modalOnClose(){this._showModal(!1),this._hasModalShown=!0}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=zn({type:t,selectors:[["app-dialog-box"]],inputs:{greeting:"greeting",modelLoaded:"modelLoaded"},features:[Gn],decls:9,vars:3,consts:[[1,"dialog-container","fade-in"],[1,"dialog-title"],[1,"dialog-title-box"],[1,"dialog-title-content"],[1,"dialog-body",3,"click"],[1,"dialog-body-content"],[3,"modalContents","onClose",4,"ngIf"],[3,"modalContents","onClose"]],template:function(n,r){1&n&&(Qe(0,"div",0)(1,"div",1),ut(2,"div",2),Qe(3,"div",3),yr(4),yt()(),Qe(5,"div",4),er("click",function(){return r.dialogOnClick()}),Qe(6,"div",5),yr(7),yt()()(),Jn(8,oV,1,1,"app-modal",6)),2&n&&(_t(4),Wi(" ",r.dialog.characterName," "),_t(3),Wi(" ",r.dialog.currentDialog," "),_t(1),et("ngIf",r.isShowModal))},dependencies:[go,sV],styles:['[_nghost-%COMP%]{position:fixed;bottom:10%;left:10%;height:200px;width:80%;z-index:3}.dialog-container[_ngcontent-%COMP%]{position:relative;width:100%}.dialog-title[_ngcontent-%COMP%]{position:relative;padding:10px;top:-38px;left:6%;height:50px;width:30%;z-index:4;border-radius:200px;background-color:#67658a;border:3px solid #c5cbe1}.dialog-title-box[_ngcontent-%COMP%]{position:absolute;height:20px;width:20px;background-color:#00f7d6;transform:rotate(44deg);top:34%;left:7%}.dialog-title-box[_ngcontent-%COMP%]:after{position:absolute;top:-15px;left:-4px;font-size:30px;font-weight:700;color:#676688;margin-left:10px;content:"."}.dialog-title-content[_ngcontent-%COMP%]{position:absolute;font-size:30px;font-weight:400;color:#fff;top:24%;left:16%}.dialog-body[_ngcontent-%COMP%]{cursor:pointer;position:absolute;top:0;left:0;background-color:#fff;height:200px;width:100%;border-radius:500px;border:3px solid rgb(184,184,184)}.dialog-body-content[_ngcontent-%COMP%]{cursor:pointer;position:relative;font-size:30px;font-weight:400;color:#fff;top:24%;padding:0 8%;color:#67658a}.fade-in[_ngcontent-%COMP%]{animation:fadeIn 1s}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeOut{0%{opacity:1}to{opacity:0}}']}),t})(),lV=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=zn({type:t,selectors:[["app-loading-screen"]],decls:3,vars:0,consts:[[1,"loading-screen-bg"],[1,"loading-screen-loading"]],template:function(n,r){1&n&&(Qe(0,"div",0)(1,"div",1),yr(2," Now Loading... "),yt()())},styles:[".loading-screen-bg[_ngcontent-%COMP%]{position:relative;top:0;left:0;z-index:100;background-color:#fff;width:100vw;height:100vh}.loading-screen-loading[_ngcontent-%COMP%]{position:absolute;bottom:20px;right:15px;background-color:#363535;padding:10px;color:#fff;font-size:25px;font-weight:700;border-radius:10px}"]}),t})();function uV(t,e){if(1&t&&ut(0,"app-dialog-box",4),2&t){const n=Ka();et("greeting",n.greeting)("modelLoaded",n.modelLoadedCount)}}function cV(t,e){1&t&&ut(0,"app-loading-screen")}const dV=[{path:"",component:pL},{path:"greetings",component:(()=>{class t{constructor(n){this.routh=n,this.showDialogBox=!1,this.isModelLoaded=!1,this.modelLoadedCount=0}ngOnInit(){this.routh.queryParams.subscribe(r=>{this.greeting=sS.getGreeting(r.greetedby)});const n=de.getInstance();n.eventListener(r=>{switch(r){case ur.ModelLoaded:0==this.modelLoadedCount&&setTimeout(()=>{this.isModelLoaded=!0,this.showDialogBox=!0},200),++this.modelLoadedCount,console.log("Model Loaded");break;case ur.MotionCompleted:console.log("Motion Completed");break;case ur.ModelReleased:this.modelLoadedCount=0,console.log("Model Released")}}),0!=n.initialize()&&n.run()}ngOnDestroy(){de.releaseInstance()}}return t.\u0275fac=function(n){return new(n||t)(I(Qr))},t.\u0275cmp=zn({type:t,selectors:[["app-greetings"]],decls:4,vars:2,consts:[["src","assets/img/background/classroom.jpg","alt","",1,"background"],["id","l2d-canvas"],[3,"greeting","modelLoaded",4,"ngIf"],[4,"ngIf"],[3,"greeting","modelLoaded"]],template:function(n,r){1&n&&(ut(0,"img",0)(1,"div",1),Jn(2,uV,1,2,"app-dialog-box",2),Jn(3,cV,1,0,"app-loading-screen",3)),2&n&&(_t(2),et("ngIf",r.showDialogBox),_t(1),et("ngIf",!r.isModelLoaded))},dependencies:[go,aV,lV],styles:[".background[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:100vh;width:100%;z-index:0}#l2d-canvas[_ngcontent-%COMP%]{position:fixed;top:0;left:0;height:100vh;width:100%;z-index:1}#l2d-canvas[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{margin-top:20px}"]}),t})()}];let hV=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=dr({type:t}),t.\u0275inj=Hn({imports:[rD.forRoot(dV),rD]}),t})(),fV=(()=>{class t{constructor(){this.title="project-akari"}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=zn({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(n,r){1&n&&ut(0,"router-outlet")},dependencies:[Kh]}),t})();const gV=["addListener","removeListener"],pV=["addEventListener","removeEventListener"],mV=["on","off"];function uu(t,e,n,r){if(J(n)&&(r=n,n=void 0),r)return uu(t,e,n).pipe(Q0(r));const[i,s]=function vV(t){return J(t.addEventListener)&&J(t.removeEventListener)}(t)?pV.map(o=>a=>t[o](e,a,n)):function _V(t){return J(t.addListener)&&J(t.removeListener)}(t)?gV.map(oS(t,e)):function yV(t){return J(t.on)&&J(t.off)}(t)?mV.map(oS(t,e)):[];if(!i&&yu(t))return $e(o=>uu(o,e,n))(Mn(t));if(!i)throw new TypeError("Invalid event target");return new Ee(o=>{const a=(...l)=>o.next(1<l.length?l:l[0]);return i(a),()=>s(a)})}function oS(t,e){return n=>r=>t[n](e,r)}const Rr=new Ee(Jo),DV={connector:()=>new At};function aS(t,e=DV){const{connector:n}=e;return He((r,i)=>{const s=n();ze(t(function CV(t){return new Ee(e=>t.subscribe(e))}(s))).subscribe(i),i.add(r.subscribe(s))})}class MV extends Pt{constructor(e,n){super()}schedule(e,n=0){return this}}const cu={setInterval(t,e,...n){const{delegate:r}=cu;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){const{delegate:e}=cu;return(e?.clearInterval||clearInterval)(t)},delegate:void 0},lS={now:()=>(lS.delegate||Date).now(),delegate:void 0};class qo{constructor(e,n=qo.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}}qo.now=lS.now;const uS=new class EV extends qo{constructor(e,n=qo.now){super(e,n),this.actions=[],this._active=!1,this._scheduled=void 0}flush(e){const{actions:n}=this;if(this._active)return void n.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}}(class xV extends MV{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){if(this.closed)return this;this.state=e;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(i,this.id,n),this}requestAsyncId(e,n,r=0){return cu.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return n;cu.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,n);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ci(r,this),null!=e&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}}),bV=uS;function cS(t,e){return e?n=>yo(e.pipe(Rt(1),function IV(){return He((t,e)=>{t.subscribe(Ke(e,Jo))})}()),n.pipe(cS(t))):$e((n,r)=>t(n,r).pipe(Rt(1),rC(n)))}const Wo="Service workers are disabled or not supported by this browser";class du{constructor(e){if(this.serviceWorker=e,e){const r=uu(e,"controllerchange").pipe(ie(()=>e.controller)),s=yo(Al(()=>L(e.controller)),r);this.worker=s.pipe(Zt(c=>!!c)),this.registration=this.worker.pipe(pn(()=>e.getRegistration()));const u=uu(e,"message").pipe(ie(c=>c.data)).pipe(Zt(c=>c&&c.type)).pipe(function SV(t){return t?e=>aS(t)(e):e=>function wV(t,e){const n=J(t)?t:()=>t;return J(e)?aS(e,{connector:n}):r=>new kh(r,n)}(new At)(e)}());u.connect(),this.events=u}else this.worker=this.events=this.registration=function RV(t){return Al(()=>rs(new Error(t)))}(Wo)}postMessage(e,n){return this.worker.pipe(Rt(1),tt(r=>{r.postMessage({action:e,...n})})).toPromise().then(()=>{})}postMessageWithOperation(e,n,r){const i=this.waitForOperationCompleted(r),s=this.postMessage(e,n);return Promise.all([s,i]).then(([,o])=>o)}generateNonce(){return Math.round(1e7*Math.random())}eventsOfType(e){let n;return n="string"==typeof e?r=>r.type===e:r=>e.includes(r.type),this.events.pipe(Zt(n))}nextEventOfType(e){return this.eventsOfType(e).pipe(Rt(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(Zt(n=>n.nonce===e),Rt(1),ie(n=>{if(void 0!==n.result)return n.result;throw new Error(n.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}}let FV=(()=>{class t{constructor(n){if(this.sw=n,this.subscriptionChanges=new At,!n.isEnabled)return this.messages=Rr,this.notificationClicks=Rr,void(this.subscription=Rr);this.messages=this.sw.eventsOfType("PUSH").pipe(ie(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(ie(i=>i.data)),this.pushManager=this.sw.registration.pipe(ie(i=>i.pushManager));const r=this.pushManager.pipe(pn(i=>i.getSubscription()));this.subscription=Cu(r,this.subscriptionChanges)}get isEnabled(){return this.sw.isEnabled}requestSubscription(n){if(!this.sw.isEnabled)return Promise.reject(new Error(Wo));const r={userVisibleOnly:!0};let i=this.decodeBase64(n.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(i.length));for(let o=0;o<i.length;o++)s[o]=i.charCodeAt(o);return r.applicationServerKey=s,this.pushManager.pipe(pn(o=>o.subscribe(r)),Rt(1)).toPromise().then(o=>(this.subscriptionChanges.next(o),o))}unsubscribe(){return this.sw.isEnabled?this.subscription.pipe(Rt(1),pn(r=>{if(null===r)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(i=>{if(!i)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})})).toPromise():Promise.reject(new Error(Wo))}decodeBase64(n){return atob(n)}}return t.\u0275fac=function(n){return new(n||t)(E(du))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})(),NV=(()=>{class t{constructor(n){if(this.sw=n,!n.isEnabled)return this.versionUpdates=Rr,this.available=Rr,this.activated=Rr,void(this.unrecoverable=Rr);this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.available=this.versionUpdates.pipe(Zt(r=>"VERSION_READY"===r.type),ie(r=>({type:"UPDATE_AVAILABLE",current:r.currentVersion,available:r.latestVersion}))),this.activated=this.sw.eventsOfType("UPDATE_ACTIVATED"),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}get isEnabled(){return this.sw.isEnabled}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Wo));const n=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:n},n)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Wo));const n=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:n},n)}}return t.\u0275fac=function(n){return new(n||t)(E(du))},t.\u0275prov=G({token:t,factory:t.\u0275fac}),t})();class Uf{}const dS=new q("NGSW_REGISTER_SCRIPT");function kV(t,e,n,r){return()=>{if(!R0(r)||!("serviceWorker"in navigator)||!1===n.enabled)return;let s;if(navigator.serviceWorker.addEventListener("controllerchange",()=>{null!==navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({action:"INITIALIZE"})}),"function"==typeof n.registrationStrategy)s=n.registrationStrategy();else{const[a,...l]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":s=L(null);break;case"registerWithDelay":s=hS(+l[0]||0);break;case"registerWhenStable":s=l[0]?Cu(fS(t),hS(+l[0])):fS(t);break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}t.get(Re).runOutsideAngular(()=>s.pipe(Rt(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:n.scope}).catch(a=>console.error("Service worker registration failed with:",a))))}}function hS(t){return L(null).pipe(function AV(t,e=uS){const n=function PV(t=0,e,n=bV){let r=-1;return null!=e&&(cg(e)?n=e:r=e),new Ee(i=>{let s=function TV(t){return t instanceof Date&&!isNaN(t)}(t)?+t-n.now():t;s<0&&(s=0);let o=0;return n.schedule(function(){i.closed||(i.next(o++),0<=r?this.schedule(void 0,r):i.complete())},s)})}(t,e);return cS(()=>n)}(t))}function fS(t){return t.get(lo).isStable.pipe(Zt(n=>n))}function LV(t,e){return new du(R0(e)&&!1!==t.enabled?navigator.serviceWorker:void 0)}let OV=(()=>{class t{static register(n,r={}){return{ngModule:t,providers:[{provide:dS,useValue:n},{provide:Uf,useValue:r},{provide:du,useFactory:LV,deps:[Uf,dl]},{provide:ul,useFactory:kV,deps:[bt,dS,Uf,dl],multi:!0}]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=dr({type:t}),t.\u0275inj=Hn({providers:[FV,NV]}),t})();let BV=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=dr({type:t,bootstrap:[fV]}),t.\u0275inj=Hn({imports:[TF,hV,OV.register("ngsw-worker.js",{enabled:true,registrationStrategy:"registerWhenStable:30000"})]}),t})();(function c1(){t0=!1})(),IF().bootstrapModule(BV).catch(t=>console.error(t))}},J=>{J(J.s=491)}]);